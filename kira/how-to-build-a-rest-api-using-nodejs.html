<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" content="The guide to teach you how to build a REST API from beginning till deployment."> <meta name="twitter:description" content="The guide to teach you how to build a REST API from beginning till deployment."> <meta property="og:description" content="The guide to teach you how to build a REST API from beginning till deployment."> <meta property="og:title" content="How to build a REST API using NodeJS"> <meta property="og:image" content="https://user-images.githubusercontent.com/90365542/150640432-993a9fd8-4472-457c-9074-9e6fbd273743.png"> <meta property="og:image:alt" content="How to build a REST API using NodeJS"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="@genicsblog"> <meta name="twitter:image" content="https://user-images.githubusercontent.com/90365542/150640432-993a9fd8-4472-457c-9074-9e6fbd273743.png"> <meta name="twitter:creator" content="@kira_272921"> <meta property="og:type" content="article"> <meta property="article:section" content="backend"> <meta property="article:tag" content="node-js, mongodb, api"> <meta property="article:author" content="https://genicsblog.com/author/kira/"> <meta property="article:published_time" content="2022-01-23T00:00:00+0000"> <meta property="og:url" content="https://genicsblog.com/kira/how-to-build-a-rest-api-using-nodejs"> <meta name="theme-color" content="#16161f"> <meta name="msapplication-TileColor" content="#16161f"> <meta name="msapplication-navbutton-color" content="#16161f"> <meta name="apple-mobile-web-app-status-bar-style" content="#16161f"> <link rel="canonical" href="https://kirablog.hashnode.dev/rest-api-using-nodejs"> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Fira+Code&amp;family=Sen&amp;display=swap" rel="stylesheet"> <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon"> <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png"> <link rel="stylesheet" href="/assets/css/theme.css"> <link rel="stylesheet" href="/assets/css/prism.css"> <link rel="manifest" href="/manifest.json"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-KQJM9Z9N1Z"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KQJM9Z9N1Z");</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8114751086331659" crossorigin="anonymous"></script> <script src="https://proxy.beyondwords.io/npm/@beyondwords/player@latest/dist/umd.js"></script> <title>How to build a REST API using NodeJS</title> </head> <body> <nav> <p class="bg-primary p-3 text-center text-white font-medium flex flex-col sm:block"> <span class="md:hidden px-1">Connect with us on discord to stay updated.</span> <span class="hidden md:inline px-1">Connect with us on discord to stay updated on the blog's development.</span> <a href="https://discord.genicsblog.com" target="_blank" class="font-bold underline header-anchor hover:text-slate-300" rel="nofollow noopener noreferrer"> Join &gt; </a> </p> <header class="w-full top-0 z-10" id="navbar"> <div class="bg-background max-h-20 py-1 px-3 sm:px-8 lg:px-8 mx-auto"> <div class="flex justify-between h-16"> <div class="flex lg:px-0"> <a class="group flex-shrink-0 flex items-center logo-anchor" href="/" aria-label="Home Page Link"> <div class="flex items-center space-x-2 whitespace-nowrap flex-nowrap"> <div class="h-8 w-8 md:mx-2"> <svg class="h-8 w-8 fill-white group-hover:fill-slate-300" viewbox="0 0 79.784508 91.197495" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <g id="layer1" transform="translate(-68.235445,-52.679805)"> <path id="path962" style=" stroke: none; stroke-width: 0.999999px; stroke-linecap: butt; stroke-linejoin: miter; stroke-opacity: 1; " d="m 408.73047,210.44336 -139.49414,80.59961 0.87109,162.49414 52.71289,-32.94922 85.34766,48.85938 87.42773,-48.85743 -0.63476,-53.22851 -84.8711,-0.88477 v 27.79297 h 56.02735 v 9.45508 l -58.31446,33.66797 -56.13085,-32.4082 0.63476,-66.94922 55.81836,-32.22461 57.25195,32.76172 82.41016,-47.75782 z m 0.43945,32.62695 83.28125,48.08203 -26.93555,15.55274 -57.21484,-33.0332 -84.18359,48.60351 v 66.39453 l -25.48047,14.71094 0.084,-96.54102 z" transform="scale(0.26458333)"></path> <path style=" stroke: none; stroke-width: 0.264583px; stroke-linecap: butt; stroke-linejoin: miter; stroke-opacity: 1; " d="m 81.889144,125.74786 26.204966,15.12944 36.92584,-21.31914 V 88.998204 l -7.22758,4.172845 V 115.03627 L 108.1902,132.12709 89.310794,121.22706 Z" id="path1416"></path> </g> </svg> </div> <span class="font-bold hidden sm:block text-xl tracking-tight text-white group-hover:text-slate-300"> Genics Blog</span> </div> </a> </div> <div class="flex items-center h-16"> <div class="hidden lg:block"> <a class="nav-item text-white" href="/topics">Topics</a> <a class="nav-item text-white" href="/about">About Us</a> <a class="nav-item text-white" href="/contact">Contact</a> <a class="nav-item text-white" target="_blank" href="https://docs.genicsblog.com">Docs</a> </div> <button onclick="showSearch()" aria-label="Search across the site..."> <svg xmlns="http://www.w3.org/2000/svg" class="ml-4 h-6 w-6 stroke-white hover:stroke-slate-300" fill="none" viewbox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path> </svg> </button> <button type="button" class="ml-2" onclick="saveTheme(isDark() ? LIGHT : DARK)" title="Ctrl + Shift + L"> <svg viewbox="0 0 512 512" class="h-8 w-8 fill-white hover:fill-slate-300 transition-all" id="theme-toggle-icon"> <g> <path d="M262.524,164.624c-49.466,0-89.592,40.119-89.592,89.596c0,49.487,40.126,89.606,89.592,89.606 c49.487,0,89.613-40.119,89.613-89.606C352.138,204.743,312.012,164.624,262.524,164.624z M262.524,320.136 c-36.39,0-65.902-29.513-65.902-65.916c0-36.396,29.513-65.903,65.902-65.903c36.41,0,65.924,29.506,65.924,65.903 C328.448,290.623,298.935,320.136,262.524,320.136z"></path> <path d="M264.078,149.221c0,0-39.031-73.758,0-73.758C303.103,75.462,264.078,149.221,264.078,149.221z"></path> <path d="M261.922,363.328c0,0,39.053,73.737,0,73.737C222.905,437.045,261.922,363.328,261.922,363.328z"></path> <path d="M186.536,331.194c0,0-24.539,79.766-52.142,52.148C106.817,355.746,186.536,331.194,186.536,331.194z"></path> <path d="M155.941,255.181c0,0-73.745,39.048-73.745,0C82.224,216.177,155.941,255.181,155.941,255.181z"></path> <path d="M188.068,179.794c0,0-79.746-24.524-52.142-52.142C163.503,100.086,188.068,179.794,188.068,179.794z"></path> <path d="M428.852,254.552c0,49.668-40.276,89.931-89.935,89.931c-49.657,0-89.928-40.263-89.928-89.931 c0-49.672,40.271-89.928,89.928-89.928C388.575,164.624,428.852,204.88,428.852,254.552z"></path> </g> </svg> </button> <a class="ml-2 md:ml-4 px-2.5 py-1.5 font-bold rounded-md text-black bg-white hover:bg-slate-300 hover:scale-110 transition underline-none" href="/contribute">Contribute</a> <div class="ml-4 lg:hidden cursor-pointer"> <div id="menu-btn" class="h-8 w-8 relative" onclick="toggleNav()"> <div class="menu-btn-lines"></div> </div> </div> </div> </div> </div> <div class="top-0 bg-background hidden p-6 lg:hidden" id="mobile-nav"> <div class="grid grid-cols-2 gap-y-2 gap-x-4"> <a class="group mobile-nav-item " href="/topics"> <span class="group-hover:text-white">Topics</span> </a> <a class="group mobile-nav-item " href="/about"> <span class="group-hover:text-white">About Us</span> </a> <a class="group mobile-nav-item " href="/contact"> <span class="group-hover:text-white">Contact</span> </a> <a class="group mobile-nav-item" href="https://docs.genicsblog.com" target="_blank"> <span class="group-hover:text-white">Documentation</span> </a> </div> </div> </header> </nav> <header class="banner"> <div class="flex flex-col lg:flex-row p-2"> <div class="flex justify-center items-center lg:w-1/2 md:mb-0"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://user-images.githubusercontent.com/90365542/150640432-993a9fd8-4472-457c-9074-9e6fbd273743.png" class="m-8 w-full rounded-xl shadow-xl aspect-video max-w-3xl" loading="lazy"> </div> <div class="flex flex-col justify-center lg:items-start w-full lg:w-1/2 lg:ml-12 max-w-3xl"> <h1 class="text-4xl font-black tracking-tight">How to build a REST API using NodeJS</h1> <span class="mt-0.5 text-justify">The guide to teach you how to build a REST API from beginning till deployment.</span> <div class="flex items-center mt-8"> <a class="underline-none" href="/author/kira/"> <img class="rounded-full w-14 h-14" src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/90365542?v=4" loading="lazy"> </a> <div class="ml-4 leading-3"> <a class="font-extrabold text-xl" href="/author/kira/"> Kira </a> <br> <span class="text-sm"> Posted on January 23, 2022 </span> </div> </div> <div class="mt-8"> <span>Category: </span> <a class="text-sm ml-2 archive-name !bg-backend underline-none" href="/category/backend">#backend</a> </div> <div class="mt-4 sm:mt-3"> <span>Tags: </span> <a class="text-sm ml-2 my-0.5 archive-name !bg-node-js underline-none" href="/tag/node-js">#node-js</a> <a class="text-sm ml-2 my-0.5 archive-name !bg-mongodb underline-none" href="/tag/mongodb">#mongodb</a> <a class="text-sm ml-2 my-0.5 archive-name !bg-api underline-none" href="/tag/api">#api</a> </div> </div> </div> </header> <main> <br> <div align="center"> <ins class="adsbygoogle" style="display: block" data-ad-format="fluid" data-ad-layout-key="-fb+5w+4e-db+86" data-ad-client="ca-pub-8114751086331659" data-ad-slot="3535897708"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> <section class="lg:flex lg:justify-center"> <div class="content-area elevated"> <div class="notice"> <span class="text-base italic leading-8"> Originally published at <a href="https://kirablog.hashnode.dev/rest-api-using-nodejs" target="_blank" rel="nofollow noopener noreferrer">kirablog.hashnode.dev</a>. </span> </div> <article class="p-6 md:p-8"> <div class="mb-6" id="audio-player" data-audio-id="3468413"></div> <p data-beyondwords-marker="e82bb9c7-5b9f-4b1f-a1f1-c5326e5b02da">ğŸ‘‹ Hey everyone, in this blog post we are doing to build a REST API that would serve as a source of motivation for developers using NodeJS and MongoDB. So letâ€™s get started ğŸ„â€â™‚ï¸</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://c.tenor.com/r3XdvPsAV3kAAAAS/despicable-me-minions.gif" alt="" loading="lazy"></p> <h1 id="whats-an-api-" data-beyondwords-marker="00dbfe3a-25d5-4f16-9f78-e890b062cf3c">Whatâ€™s an API? ğŸ¤”</h1> <p data-beyondwords-marker="c04a68fe-7a70-47fb-a57a-5944ccaf7299">API stands for â€œApplication Programming Interfaceâ€ which is a tool that allows two applications to talk to each other ğŸ“. Letâ€™s understand the meaning of API by some real-life examples âœ¨</p> <p data-beyondwords-marker="1a0cffb2-68d7-484b-8472-674085b14182">So you have built an amazing e-store application and you wanted other developers to build applications on it. Now you have to build some sort of software that communicates between your web service and the developerâ€™s application and thatâ€™s where API comes in.</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://user-images.githubusercontent.com/26124625/104198884-ca1bcf80-544c-11eb-94d1-22548426ad4d.png" alt="" loading="lazy"></p> <h2 id="whats-a-rest-api-" data-beyondwords-marker="24c7b398-5814-43e5-811f-8f5d153319b9">Whatâ€™s a REST API? ğŸ¤”</h2> <p data-beyondwords-marker="a37068d8-8b87-4d8f-9a0d-26e331f1fd47">Now as you have letâ€™s talk something about â€œREST APIsâ€. REST stands for <strong>Representational State Transfer</strong>, itâ€™s one of the most popularly known type of API architecture. These types of APIs follow the client-server model, where one program sends a request and the other response with some data.</p> <p data-beyondwords-marker="5e3509dc-0b0c-48b9-9c00-207fd58248e0">The requests are HTTP methods such as POST, GET, PUT, DELETEâ€¦</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://user-images.githubusercontent.com/26124625/104204412-431e2580-5453-11eb-9827-29a65aa6ff82.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="ac2d0b53-28f9-4a63-8c09-94a9a47ac182">You would have a more clear understanding of APIs and REST APIs when we build a project ğŸ‘€. So what are we waiting for, letâ€™s dive started into coding ğŸ‘¨â€ğŸ’».</p> <h1 id="setting-up-the-project-" data-beyondwords-marker="b6706077-2498-45a7-8efd-713a61a32b4d">Setting up the project ğŸ› </h1> <p data-beyondwords-marker="7c32df11-0a37-43b4-a3bb-32676b0a869b">Letâ€™s set up our project so that we can start coding ğŸ‘¨â€ğŸ’».</p> <ol> <li> <p data-beyondwords-marker="f43cf56a-817e-4e44-9409-c21963fc08fd">Creating a separate folder for our project</p> <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mkdir </span>dev-credits-api
</code></pre></div> </div> </li> <li> <p data-beyondwords-marker="8dadfbc8-22bf-4447-89df-5600d3a697c4">Navigate into the folder</p> <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd </span>dev-credits-api
</code></pre></div> </div> </li> <li> <p data-beyondwords-marker="34dc585b-c826-4639-b524-26c078c8ddbb">Initializing the project</p> <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm init
</code></pre></div> </div> </li> <li> <p data-beyondwords-marker="2fb9cab4-1bb0-449f-a120-45f35ca64b08">Installing the required packages</p> <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install </span>mongoose express dotenv cors

<span class="c"># or</span>

<span class="nv">$ </span>yarn add mongoose express dotenv cors
</code></pre></div> </div> <ul> <li data-beyondwords-marker="cdd2593a-f7c0-4429-871f-079bcbf2b7f1">Express is the framework by which we are going to our REST API</li> <li> <p data-beyondwords-marker="a6a0a537-29b3-4fc1-8096-dcb2521cd4ae">Mongoose is the tool that we are going to use to communicate with our MongoDB database</p> <p data-beyondwords-marker="4bcad3d0-1c75-4b88-a160-c535f4d7c5da">4.1. Installing nodemon as a dev dependency</p> <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install </span>nodemon <span class="nt">-D</span>

<span class="c"># or</span>

<span class="nv">$ </span>yarn add nodemon <span class="nt">-D</span>
</code></pre></div> </div> <ul> <li data-beyondwords-marker="d8c640bc-f7c3-4480-a762-91ecb345529d">Nodemon is used for automatically restarting the server on file changes detected in the directory. This would be helpful as we would not be restarting the server each time we do changes</li> </ul> </li> </ul> </li> </ol> <h1 id="building-the-rest-api-" data-beyondwords-marker="3c233c1b-9b84-4c7e-83ac-c2391ac26d5b">Building the REST API ğŸ‘¨â€ğŸ’»</h1> <p data-beyondwords-marker="fe5f54af-e9ac-4fbe-90c6-db905fedde23">As we have completed the setup for our project, letâ€™s get started building the REST API.</p> <p data-beyondwords-marker="e75213bc-0086-45a1-a485-39ec72044eb8">Create a new file named <code class="language-plaintext highlighter-rouge">index.js</code></p> <p data-beyondwords-marker="3f49691e-adba-4f2a-bff0-b3d38f2e7f9d">Here is the boilerplate code for a basic express app</p> <p data-beyondwords-marker="8d848dde-1eab-4e7e-80e4-3ed06b8ba487"><code class="language-plaintext highlighter-rouge">index.js</code></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nf">express</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">3000</span><span class="p">;</span>

<span class="nx">app</span><span class="p">.</span><span class="nf">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`Server is running at port </span><span class="p">${</span><span class="nx">port</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div> <p data-beyondwords-marker="d5f42bff-132f-4149-ad96-b7e4e66f6ec6">Letâ€™s breakdown it into and understand each part:</p> <ul> <li> <p data-beyondwords-marker="e432d418-c863-4fea-bf2c-23e6aa29da78">We are requiring the express package into our file so that we can use it.</p> </li> <li> <p data-beyondwords-marker="ac7728bc-0b16-4ffe-a8af-628da1f4fbdf">We are assigning some value to the variable port, the port where our server would be running. You might be thinking why is there a <code class="language-plaintext highlighter-rouge">process.env.PORT</code>? Itâ€™s because during deployment on services such as Heroku the port number might vary, it may not be 3000 so we are telling that if there is a PORT environment variable then use that else use <code class="language-plaintext highlighter-rouge">3000</code>.</p> </li> <li> <p data-beyondwords-marker="1d6c506d-326b-4250-84eb-b1135a8c8b87">The last piece of code is telling to which port the server should listen, in our case itâ€™s the <code class="language-plaintext highlighter-rouge">PORT</code> variable.</p> </li> </ul> <p data-beyondwords-marker="7e3395aa-8366-4a61-bd56-e7b56d35b98d">Letâ€™s add a new script named <code class="language-plaintext highlighter-rouge">start</code> to the <code class="language-plaintext highlighter-rouge">package.json</code> file which uses nodemon to automatically restart the server on file changes detected. So after the changes our scripts in <code class="language-plaintext highlighter-rouge">package.json</code> would look something like this:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nodemon index.js"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="c0514c08-616e-4f10-8b27-343107bd8047">Letâ€™s start our server by running the <code class="language-plaintext highlighter-rouge">npm start</code> command. The server would be running at <a href="http://localhost:3000" rel="nofollow noopener noreferrer" target="_blank">http://localhost:3000</a>. You prompted with an error something like this:</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/XeUfz0l.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="0fd377c0-a68c-402b-bfc5-5c11f39f5142">This is happening because we havenâ€™t defined the <code class="language-plaintext highlighter-rouge">/</code> (aka the root route)</p> <h2 id="http-methods-explained" data-beyondwords-marker="67a5bdda-7e3d-432b-acfe-02203d31e01a">HTTP methods explained</h2> <p data-beyondwords-marker="a05942c4-f795-495e-81ef-1d772d3599e4">Letâ€™s take a break from coding and understand what do they do and whatâ€™s the success and error status so that it would be easy for debugging ğŸ˜</p> <h3 id="get" data-beyondwords-marker="3cae3734-e8df-4a64-b434-df2c9821a4a2">GET</h3> <p data-beyondwords-marker="71573689-affb-4718-a24a-17e819f26e3e"><strong>What it does</strong>: Request data from a specified resource</p> <p data-beyondwords-marker="73f96f36-23f2-4e2a-a8ca-0c6b46c560dd"><strong>Successful response</strong>: 200 OK</p> <p data-beyondwords-marker="7f942d25-f99b-43cf-bf42-00f4bf3b750d"><strong>Error response</strong>: 404 not found</p> <h3 id="post" data-beyondwords-marker="9c7ff204-7d3b-4839-bbd9-0c2241618bd7">POST</h3> <p data-beyondwords-marker="a4ebeb7d-9ab4-4e54-9a39-79f6713dc056"><strong>What it does</strong>: Send data to the server to create a new resource</p> <p data-beyondwords-marker="55834599-070a-4c3f-a491-4c8b0185b592"><strong>Successful response</strong>: 201 Created</p> <p data-beyondwords-marker="9fa4c57a-a340-4996-ad23-a40ed30c9f9c"><strong>Error response</strong>: 404 not found or 409 conflict - if the resource already exists</p> <h3 id="put" data-beyondwords-marker="7093f2b1-f1f4-4aeb-abbd-3b460c185f11">PUT</h3> <p data-beyondwords-marker="946dd3a6-cb12-43ff-8efa-6d073e9ba128"><strong>What it does</strong>: Send data to the server to update a pre-existing resource</p> <p data-beyondwords-marker="d20f6a10-8fc2-45d9-a90e-be0f37dee2a7"><strong>Successful response</strong>: 200 OK</p> <p data-beyondwords-marker="478ab831-91dd-43a5-ace8-22b3822f298b"><strong>Error response</strong>: 204 no content, 404 not found or 405 method not allowed</p> <h3 id="delete" data-beyondwords-marker="97d7c858-47a3-46ae-8d4d-98b2b43acc35">DELETE</h3> <p data-beyondwords-marker="de19cc15-c556-421e-abf5-db73fa7b834c"><strong>What it does</strong>: Deletes a resource from the server</p> <p data-beyondwords-marker="b1544f00-be7e-4aa8-852a-d2b90bb90c9f"><strong>Successful response</strong>: 200 OK</p> <p data-beyondwords-marker="4e0f25e5-38be-4138-b601-5912fcaff0a0"><strong>Error response</strong>: 404 not found or 405 method not allowed</p> <p data-beyondwords-marker="3fe9e584-6e51-4188-8be4-3e5b1203c783">Check out <a href="https://http.cat/" rel="nofollow noopener noreferrer" target="_blank">http.cat</a> for understanding what each HTTP status code means via funny cat images ğŸ˜¹</p> <h2 id="adding-routes-" data-beyondwords-marker="1ef87bea-d5ee-4526-9393-76ac451e1db6">Adding routes ğŸ›£</h2> <p data-beyondwords-marker="0f49d36e-a8d5-4c2b-b8db-b0e1b2bcd6a6">Routes are different URL paths of an express app that are associated with different HTTP methods, such as <code class="language-plaintext highlighter-rouge">GET</code>, <code class="language-plaintext highlighter-rouge">POST</code>, <code class="language-plaintext highlighter-rouge">DELETE</code>, <code class="language-plaintext highlighter-rouge">PUT</code>.</p> <p data-beyondwords-marker="432bb720-6fa4-4624-afc8-73cab3a683c4">Letâ€™s get started by creating <code class="language-plaintext highlighter-rouge">/</code> which sends â€œHello, World!â€</p> <p data-beyondwords-marker="f77c2173-4440-4f47-8f61-6001a5f10926">Add the below piece of code above the line where we declared the <code class="language-plaintext highlighter-rouge">port</code> variable</p> <p data-beyondwords-marker="9d7379ac-4c30-4a9d-ac10-941e63687f1d"><code class="language-plaintext highlighter-rouge">index.js</code></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="nf">function </span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello, World!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div> <p data-beyondwords-marker="caa30fb8-3919-40e9-84bb-eed545bec4ee">Letâ€™s breakdown this piece of code:</p> <ul> <li data-beyondwords-marker="e3cb54f5-5cd2-4ee2-92d4-456752e558e1">The <code class="language-plaintext highlighter-rouge">get</code> method specifies the HTTP method for that route. You could use other HTTP methods like <code class="language-plaintext highlighter-rouge">post</code>, <code class="language-plaintext highlighter-rouge">delete</code>â€¦ <ul> <li data-beyondwords-marker="ebf3be59-deb9-47d6-aa2b-7bd8e89d34f4">There is a special routing method <code class="language-plaintext highlighter-rouge">all</code> which is used for the routes which handle all kinds of HTTP methods</li> </ul> </li> <li data-beyondwords-marker="3a822cd8-f341-4987-b70a-764a1dcaeb3a">There is a callback method that is called when the server receives a request from that endpoint with that specified HTTP method</li> </ul> <p data-beyondwords-marker="851869b4-5d5a-44b4-addf-1da4ae15097b">ğŸ¥³ Horray! â€œHello, Worldâ€ is now visible in the <code class="language-plaintext highlighter-rouge">/</code> route</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/Lw35Azu.png" alt="" loading="lazy"></p> <h2 id="setting-up-mongodb" data-beyondwords-marker="576a528c-d973-44d6-98b9-a3ab5c5c279d">Setting up MongoDB</h2> <p data-beyondwords-marker="07885d0c-0c03-4786-b047-d9a2310c4838">Letâ€™s get in the MongoDB database now ğŸ˜.</p> <p data-beyondwords-marker="9cf61828-d0b8-4a0e-a67a-388eb7049269">Head over <a href="https://www.mongodb.com/" rel="nofollow noopener noreferrer" target="_blank">MongoDB</a> and sign up/sign in and create a new project</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/P1PiZ7r.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="0422395d-5a42-4380-adb6-92ef59f3918b">You could your co-worker into the project if you wanted too.</p> <p data-beyondwords-marker="fe4ff868-a65b-4db1-83e9-b854b45471a6">After the creation of the project, click on <code class="language-plaintext highlighter-rouge">Build a Database</code></p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/COT14kz.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="7b3646f7-8c17-4bcb-b008-6772335d8a78">You would be shown with a screen something like this:</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/gLTxjxN.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="8cf22be6-1fd7-43d5-829c-f5cb843c5e53">Letâ€™s go ahead and choose the free plan ğŸ‘€</p> <p data-beyondwords-marker="fccd70f8-45a0-4187-8290-2a0f169e72dd">You would be shown some more options about the cloud provider and the location</p> <p data-beyondwords-marker="a1f82b29-ddef-47ac-bd00-6e169aadabe1">Letâ€™s choose the nearest region and move forward.</p> <p data-beyondwords-marker="cf78d79f-a2da-425c-8929-360c9eb19780">You would be asked to create a user. This is required as you would need the username and password to generate a connection URL which is then used to connect MongoDB with your NodeJS app.</p> <p data-beyondwords-marker="22ae0c76-72b2-45aa-b6a5-0cbadf34e1b5">The creation of the cluster would take 1 - 3 minutes. So letâ€™s grab a cup of coffee until then â˜•. Ahhâ€¦ itâ€™s been successfully created so letâ€™s get back to coding ğŸ‘¨â€ğŸ’»</p> <p data-beyondwords-marker="ebf781f8-f0f7-4414-b7dd-fd200b83f346">Click on <code class="language-plaintext highlighter-rouge">Connect</code></p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/YXMw142.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="cdce8963-fd2a-464d-b3b4-debb41fc4fae">Click on <code class="language-plaintext highlighter-rouge">Connect your application</code></p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/26S40MA.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="3749753d-b51f-45f2-a9f7-4d1a40605160">Copy the connection URL</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/YqtMG1i.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="4b939333-e54e-42d4-b23e-f65fc8eb191b">Create a <code class="language-plaintext highlighter-rouge">.env</code> file and replace <code class="language-plaintext highlighter-rouge">&lt;password&gt;</code> with the password of the user which you have replaced previously</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MONGODB_URL="mongodb+srv://kira272921:&lt;password&gt;@dev-credits-api.t5tkf.mongodb.net/myFirstDatabase?retryWrites=true&amp;w=majority"
</code></pre></div></div> <p data-beyondwords-marker="09c244f8-d5f3-4a68-9d4b-192da2f8b16c">Letâ€™s head back to the good old <code class="language-plaintext highlighter-rouge">index.js</code> file</p> <h2 id="connecting-express-app-to-mongodb" data-beyondwords-marker="cc0dc06d-574d-44d0-8882-02856092a382">Connecting Express app to MongoDB</h2> <p data-beyondwords-marker="79efbcb5-30c7-4b29-9ac0-b65d3f91a403">Letâ€™s start by requiring <code class="language-plaintext highlighter-rouge">mongoose</code> and <code class="language-plaintext highlighter-rouge">dotenv</code></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">mongoose</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">dotenv</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">dotenv</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div> <p data-beyondwords-marker="d8b9e04b-113d-4220-b153-b495d5672f7e">Letâ€™s configure dotenv as well</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">dotenv</span><span class="p">.</span><span class="nf">config</span><span class="p">();</span>
</code></pre></div></div> <p data-beyondwords-marker="3e395499-439b-4ec1-95d9-85dc48e621a5">Letâ€™s finally add the piece of code which connects our express application to MongoDB</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">mongoose</span>
  <span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">MONGODB_URL</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">useNewUrlParser</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">useUnifiedTopology</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nf">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Connected to MongoDB</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div></div> <p data-beyondwords-marker="95cb1a72-e32d-495c-8022-3c062cc6c4de">The <code class="language-plaintext highlighter-rouge">index.js</code> file show looks something like this now</p> <p data-beyondwords-marker="fe6c06e8-3943-43b5-8f0f-f0fc62ae3928"><code class="language-plaintext highlighter-rouge">index.js</code></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">mongoose</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">dotenv</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">dotenv</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">dotenv</span><span class="p">.</span><span class="nf">config</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nf">express</span><span class="p">();</span>

<span class="nx">mongoose</span>
  <span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">MONGODB_URL</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">useNewUrlParser</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">useUnifiedTopology</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nf">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Connected to MongoDB</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="nf">function </span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello, World!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">3000</span><span class="p">;</span>

<span class="nx">app</span><span class="p">.</span><span class="nf">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`Server is running at port </span><span class="p">${</span><span class="nx">port</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div> <p data-beyondwords-marker="f08efed7-4ae6-4e9b-8191-cf24e6fbc048">ğŸ¥³ We successfully connected our express app to the MongoDB database.</p> <h2 id="creating-schema-and-model-" data-beyondwords-marker="773013c4-2f51-4111-bce6-d57cdff218e2">Creating Schema and Model ğŸ“</h2> <p data-beyondwords-marker="fc7f52a5-115f-450e-b0d3-c03ba3a7736d">A Schema is the structure of the documents in our database. It tells what fields are required, whatâ€™s the data type of each field.</p> <p data-beyondwords-marker="d6211166-7695-4ec4-8a70-d0d3ced18552">A model provides a programming interface for interacting with the database (read, insert, update, etc).</p> <p data-beyondwords-marker="1cd39655-7720-4425-a2fa-dae880fddeb3">Letâ€™s create a new folder named <code class="language-plaintext highlighter-rouge">model</code> and inside it letâ€™s create a <code class="language-plaintext highlighter-rouge">model.js</code> where we will define our schema</p> <p data-beyondwords-marker="687616fa-83ef-4262-8adf-5b64b9a27976"><code class="language-plaintext highlighter-rouge">model/model.js</code></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">mongoose</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">devCredits</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nc">Schema</span><span class="p">({</span>
  <span class="na">credits</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="nb">Number</span><span class="p">,</span>
    <span class="na">required</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">id</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="nb">Number</span><span class="p">,</span>
    <span class="na">required</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nf">model</span><span class="p">(</span><span class="dl">'</span><span class="s1">devCredits</span><span class="dl">'</span><span class="p">,</span> <span class="nx">devCredits</span><span class="p">);</span>
</code></pre></div></div> <p data-beyondwords-marker="897e5129-66d8-4431-b651-d2f86fdcbdaa">Letâ€™s breakdown it down and understand</p> <ul> <li data-beyondwords-marker="f0db4abb-6484-44da-a2f0-67b929c4b469">We imported the <code class="language-plaintext highlighter-rouge">mongoose</code> package into the <code class="language-plaintext highlighter-rouge">model/model.js</code> file</li> <li data-beyondwords-marker="ddeadb38-f2a0-4136-99c8-6e089e3f7bf7">We created a new schema named <code class="language-plaintext highlighter-rouge">devCredits</code>. The structure has the <code class="language-plaintext highlighter-rouge">credits</code> and <code class="language-plaintext highlighter-rouge">id</code>. Credits are the number of dev credits the person has and the id is the discord id of the user (This API was initially created for a discord bot <a href="https://github.com/Kira272921/dev-credits-bot" rel="nofollow noopener noreferrer" target="_blank">Dev credits bot</a> so the schema of the database is kinda based on discord ğŸ¤·â€â™‚ï¸)</li> <li data-beyondwords-marker="9df0804e-1a63-4378-a804-c6583939c17c">We have finally created a model named â€œdevCreditsâ€</li> </ul> <h2 id="adding-more-features-" data-beyondwords-marker="f76b65e6-51cb-4396-80b4-2e8fe658f52e">Adding more features ğŸ˜</h2> <p data-beyondwords-marker="ce214b5f-b97a-446e-9831-7249e3d0b8a1">Letâ€™s add more routes to our REST API. Letâ€™s add routes where we can get the total dev credits of a user via their discord ID and give dev credits to other users using another route.</p> <h3 id="giving-dev-credits-to-other-devs" data-beyondwords-marker="57a35e02-1562-4a10-9129-cd7b03da0b38">Giving dev credits to other devs</h3> <p data-beyondwords-marker="94ae936e-1199-4c2a-a2fc-fa522da6530d">Letâ€™s import our model which we have just created into the <code class="language-plaintext highlighter-rouge">index.js</code> file.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">devCredits</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./model/model.js</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div> <p data-beyondwords-marker="d6cc122c-1925-47a2-896c-ba9eb84f5b87">Letâ€™s add a new POST route in the <code class="language-plaintext highlighter-rouge">index.js</code> file</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/post</span><span class="dl">'</span><span class="p">,</span> <span class="nf">function </span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">credit</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">devCredits</span><span class="p">({</span>
    <span class="na">id</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
    <span class="na">credits</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">credits</span><span class="p">,</span>
  <span class="p">});</span>

  <span class="nx">devCredits</span><span class="p">.</span><span class="nf">countDocuments</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span> <span class="p">},</span> <span class="nf">function </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">count</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">devCredits</span><span class="p">.</span><span class="nf">findOneAndUpdate</span><span class="p">(</span>
        <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span> <span class="p">},</span>
        <span class="p">{</span>
          <span class="na">$inc</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">credits</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">credits</span><span class="p">,</span>
          <span class="p">},</span>
        <span class="p">},</span>
        <span class="p">{</span> <span class="na">new</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
        <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">devCredit</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">if </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">(</span><span class="nx">devCredit</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">credit</span><span class="p">.</span><span class="nf">save</span><span class="p">((</span><span class="nx">err</span><span class="p">,</span> <span class="nx">credits</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">(</span><span class="nx">credits</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div> <p data-beyondwords-marker="de7fa412-88b6-463f-a376-075a08eed755">Letâ€™s understand what exactly is going on:</p> <ul> <li data-beyondwords-marker="a3d21b0d-70a7-4532-9667-a02f4107a69f">We have created a new POST route (<code class="language-plaintext highlighter-rouge">/post</code>)</li> <li data-beyondwords-marker="3d5ef430-b654-4edb-aa4e-aa4b3a4bfc26">We validate the data which we receive from the client using our model</li> <li data-beyondwords-marker="71bc1385-a22c-4bd0-8031-55e0ce2bb001">In the next piece of code we are checking if the user (user id) already exists in the database or not <ul> <li data-beyondwords-marker="bac53119-a297-42a2-aec7-63dff6344c31">If exists then we are going to increment the credits value</li> <li data-beyondwords-marker="27adb232-90e2-4009-a896-9629b8a33b80">Else we are going to create a new document with the user id and add the credits</li> </ul> </li> </ul> <h3 id="how-to-test-the-api" data-beyondwords-marker="df215085-95c4-4210-bbf6-7f04f2f691b5">How to test the API?</h3> <p data-beyondwords-marker="b27969b8-b91a-49cb-b237-b2883e3e25a4">We have successfully created added a new feature in our API ğŸ¥³. But wait how are we going to test it out ğŸ¤”</p> <p data-beyondwords-marker="034e732b-208f-4b99-829d-3727fc6c3852">ğŸ‘€ We are going to use a VSCode extension called <a href="https://marketplace.visualstudio.com/items?itemName=rangav.vscode-thunder-client" rel="nofollow noopener noreferrer" target="_blank">Thunder Client</a>, which is used for API testing. So letâ€™s quickly download it and test our new feature in our API ğŸ¥³.</p> <p data-beyondwords-marker="dd793cd0-5c87-43cb-9e74-bf90e558b0c3">After the completion of the download, you are going to see a thunder icon in your sidebar ğŸ‘€</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/xpDcJ9t.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="12bc5c90-4670-4f15-94a3-c08c549f4ad9">Click the thunder icon and you are going to see a section something like this</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/FEa3FBo.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="7d23c22d-457d-4d3a-9040-b3d2e5a884d6">Click on <code class="language-plaintext highlighter-rouge">New Request</code>. You would be prompted to screen something like this</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/8Df3YZO.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="aa34a59d-a9fb-415e-8732-e0cc490b57c5">Letâ€™s test out our <code class="language-plaintext highlighter-rouge">/post</code> route now ğŸ¥³. Change the URL in the input box from to <code class="language-plaintext highlighter-rouge">localhost:3000/post</code></p> <p data-beyondwords-marker="030261b5-fb69-4d58-856b-5a5e7a428c94">Change the request method from <code class="language-plaintext highlighter-rouge">GET</code> to <code class="language-plaintext highlighter-rouge">POST</code></p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/ID9Ieie.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="e6006f58-98ea-41c5-9771-2f9442e0f02c">Navigate to the <code class="language-plaintext highlighter-rouge">Body</code> tab, this is the section where we are going to write the body of the request.</p> <p data-beyondwords-marker="e2f68e94-2a7f-4a40-9611-248819cab108">I have added my discord ID and gave 100 dev credits to it, <em>cuz why not</em></p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/RUfKWjt.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="de6f80ff-67b4-4565-8006-9c01ff1c3d1a">Letâ€™s click and hope that it works ğŸ¤</p> <p data-beyondwords-marker="93371919-0af8-4aa9-a18a-dfe817fe0ec1">ğŸ¥ğŸ¥ğŸ¥ğŸ¥ğŸ¥ and we got an error</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/LP7dnOb.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="448f9e30-9ac2-428d-b1d1-c65831112689">This happened because we didnâ€™t have any middleware so letâ€™s them quickly</p> <p data-beyondwords-marker="3b379467-46d9-481c-be0f-cee477cd8786"><code class="language-plaintext highlighter-rouge">index.js</code></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nf">cors</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nf">json</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nf">urlencoded</span><span class="p">({</span> <span class="na">extended</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}));</span>
</code></pre></div></div> <p data-beyondwords-marker="59900435-fc53-4a68-af51-34e92f73ad8d"><strong>NOTE</strong>: We had installed cors as a separated package, so donâ€™t forget to import it as well</p> <p data-beyondwords-marker="4399db20-0e82-415d-a143-407dcbada685">Letâ€™s try again now so that it works now ğŸ¤</p> <p data-beyondwords-marker="b747ca8c-efef-4803-8d0b-23293fe3ecdb">ğŸ‰ <strong>TADA</strong>! We have successfully created our first feature in the API which interacts with the MongoDB database</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/JIJUj9f.png" alt="" loading="lazy"></p> <h3 id="getting-the-total-dev-credits-of-a-user" data-beyondwords-marker="cbe6f0f2-4d47-498d-9b1a-24ec9f52dde5">Getting the total dev credits of a user</h3> <p data-beyondwords-marker="c4c5fa77-5220-417f-9cb8-0a224e888c8c">Letâ€™s import our model which we have just created into the <code class="language-plaintext highlighter-rouge">index.js</code> file.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">devCredits</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./model/model.js</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div> <p data-beyondwords-marker="87164ba8-8aa3-459a-a082-91257addc0a3">Letâ€™s add a new route in the <code class="language-plaintext highlighter-rouge">index.js</code> file</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/get/:id</span><span class="dl">'</span><span class="p">,</span> <span class="nf">function </span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">devCredits</span><span class="p">.</span><span class="nf">find</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span> <span class="p">},</span> <span class="p">{</span> <span class="na">_id</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">__v</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div> <p data-beyondwords-marker="9aa31abe-4dba-4085-93c6-53d544be8875">Letâ€™s breakdown this down</p> <ul> <li data-beyondwords-marker="bbe1f7f3-a8eb-4924-91fe-44598f58b288">We have created a new route with the GET method</li> <li data-beyondwords-marker="69d74318-ff60-44e1-b60e-04f8d36ef95d">We are finding in the database for the ID given in the parameters</li> </ul> <p data-beyondwords-marker="af6e8820-60a2-41be-8238-8265c6b25bdf">Letâ€™s test it out again using Thunder Client ğŸ‘€.</p> <p data-beyondwords-marker="9bd23621-efd5-4c0b-be5b-fc48fdb72a7f">ğŸ‰<strong>TADA</strong>! Itâ€™s works</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/GBIj7Xk.png" alt="" loading="lazy"></p> <h2 id="cleaning-up-the-codebase" data-beyondwords-marker="7588decf-0ffe-4963-905f-a87a6881284e">Cleaning up the codebase</h2> <p data-beyondwords-marker="26833619-f066-4c2a-a5e6-c86d38a1dafb">Letâ€™s clean up the codebase a bit ğŸ˜….</p> <p data-beyondwords-marker="24774d43-7360-4ed3-990b-9e556993c546">Letâ€™s create a new folder called <code class="language-plaintext highlighter-rouge">routes</code> and inside it letâ€™s create a new file <code class="language-plaintext highlighter-rouge">router.js</code> which contains the routes</p> <p data-beyondwords-marker="a306f6c9-bede-43eb-a29e-e3abdf98cb09"><code class="language-plaintext highlighter-rouge">routes/router.js</code></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">).</span><span class="nc">Router</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">devCredits</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">../model/model.js</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">router</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/get/:id</span><span class="dl">'</span><span class="p">,</span> <span class="nf">function </span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">devCredits</span><span class="p">.</span><span class="nf">find</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span> <span class="p">},</span> <span class="p">{</span> <span class="na">_id</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">__v</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">router</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/post</span><span class="dl">'</span><span class="p">,</span> <span class="nf">function </span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">credit</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">devCredits</span><span class="p">({</span>
    <span class="na">id</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
    <span class="na">credits</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">credits</span><span class="p">,</span>
  <span class="p">});</span>

  <span class="nx">devCredits</span><span class="p">.</span><span class="nf">countDocuments</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span> <span class="p">},</span> <span class="nf">function </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">count</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">devCredits</span><span class="p">.</span><span class="nf">findOneAndUpdate</span><span class="p">(</span>
        <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span> <span class="p">},</span>
        <span class="p">{</span>
          <span class="na">$inc</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">credits</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">credits</span><span class="p">,</span>
          <span class="p">},</span>
        <span class="p">},</span>
        <span class="p">{</span> <span class="na">new</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
        <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">devCredit</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">if </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">(</span><span class="nx">devCredit</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">credit</span><span class="p">.</span><span class="nf">save</span><span class="p">((</span><span class="nx">err</span><span class="p">,</span> <span class="nx">credits</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">(</span><span class="nx">credits</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</code></pre></div></div> <p data-beyondwords-marker="1fe6e266-d001-4d34-905c-ad6a94132415">We have imported the <code class="language-plaintext highlighter-rouge">routes/router.js</code> file into the <code class="language-plaintext highlighter-rouge">index.js</code> file and used it</p> <p data-beyondwords-marker="b88ee035-a355-49d9-820c-e2bfc0b61eea"><code class="language-plaintext highlighter-rouge">index.js</code></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">mongoose</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">dotenv</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">dotenv</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">cors</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">dotenv</span><span class="p">.</span><span class="nf">config</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./routes/router.js</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nf">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nf">cors</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nf">json</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nf">urlencoded</span><span class="p">({</span> <span class="na">extended</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}));</span>

<span class="nx">mongoose</span>
  <span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">MONGODB_URL</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">useNewUrlParser</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">useUnifiedTopology</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nf">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Connected to MongoDB</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="nf">function </span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello, World!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">router</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">3000</span><span class="p">;</span>

<span class="nx">app</span><span class="p">.</span><span class="nf">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`Server is running at port </span><span class="p">${</span><span class="nx">port</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div> <p data-beyondwords-marker="58329f84-cfb7-4672-a407-cd9f2eb135ed">Letâ€™s test it out so that we are sure that our code and we didnâ€™t mess up by cleaning up the mess ğŸ˜†</p> <p data-beyondwords-marker="be69d18a-bc7f-458f-830b-6e651cf634e4">ğŸ¥³ Horray! There isnâ€™t any error and the code still works as it was before</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/Jj9ee1L.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="4c35952d-9068-4fdc-9aa4-e1b69c919bc6">ğŸ˜… Doesnâ€™t <code class="language-plaintext highlighter-rouge">routes/router.js</code> seem kinda filled up with the logic and make it kinda messy?</p> <p data-beyondwords-marker="113dafd6-0d28-4eae-841b-c1515e47498f">Letâ€™s create a new folder named <code class="language-plaintext highlighter-rouge">controllers</code>. In this folder, we will store the logic related to each route.</p> <p data-beyondwords-marker="2f889a14-16c7-4c95-83f4-778f30c5edb0">Letâ€™s get started by creating a new file in the <code class="language-plaintext highlighter-rouge">controllers</code> folder named <code class="language-plaintext highlighter-rouge">getCredits.js</code> and <code class="language-plaintext highlighter-rouge">postCredits.js</code> which contains the logic related to the <code class="language-plaintext highlighter-rouge">/get</code> route and <code class="language-plaintext highlighter-rouge">/post</code> route respectively</p> <p data-beyondwords-marker="a80f6811-bed9-45a8-9662-3ad0c53ccf82"><code class="language-plaintext highlighter-rouge">controllers/getCredits.js</code></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">devCredits</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">../model/model.js</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">getCredits</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">devCredits</span><span class="p">.</span><span class="nf">find</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span> <span class="p">},</span> <span class="p">{</span> <span class="na">_id</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">__v</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">getCredits</span><span class="p">;</span>
</code></pre></div></div> <p data-beyondwords-marker="db990e45-386c-4857-ba82-c71f054326af"><code class="language-plaintext highlighter-rouge">controllers/postCredits.js</code></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">devCredits</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">../model/model.js</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">postCredits</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">credit</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">devCredits</span><span class="p">({</span>
    <span class="na">id</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
    <span class="na">credits</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">credits</span><span class="p">,</span>
  <span class="p">});</span>

  <span class="nx">devCredits</span><span class="p">.</span><span class="nf">countDocuments</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span> <span class="p">},</span> <span class="nf">function </span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">count</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">devCredits</span><span class="p">.</span><span class="nf">findOneAndUpdate</span><span class="p">(</span>
        <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span> <span class="p">},</span>
        <span class="p">{</span>
          <span class="na">$inc</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">credits</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">credits</span><span class="p">,</span>
          <span class="p">},</span>
        <span class="p">},</span>
        <span class="p">{</span> <span class="na">new</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
        <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">devCredit</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">if </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">(</span><span class="nx">devCredit</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">credit</span><span class="p">.</span><span class="nf">save</span><span class="p">((</span><span class="nx">err</span><span class="p">,</span> <span class="nx">image</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">(</span><span class="nx">image</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">postCredits</span><span class="p">;</span>
</code></pre></div></div> <p data-beyondwords-marker="7aaa18b6-92cd-4d0c-9adf-e35b12ad9ba9"><code class="language-plaintext highlighter-rouge">routes/router.js</code></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">).</span><span class="nc">Router</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">devCredits</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">../model/model.js</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">getCredits</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">../controllers/getCredits.js</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">postCredits</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">../controllers/postCredits.js</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">router</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/get/:id</span><span class="dl">'</span><span class="p">,</span> <span class="nx">getCredits</span><span class="p">);</span>

<span class="nx">router</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/post</span><span class="dl">'</span><span class="p">,</span> <span class="nx">postCredits</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</code></pre></div></div> <p data-beyondwords-marker="3e85fc38-3c74-4af6-97a8-d5aeed981ae0">Phew, that was a lot of work ğŸ˜¹</p> <h2 id="adding-rate-limit" data-beyondwords-marker="f61d3ae4-8f4b-403c-a875-ffed1b81ee59">Adding rate limit</h2> <p data-beyondwords-marker="394dd8a2-b6b1-4fc3-a853-59758f91a54d">You donâ€™t want some random guy to just spam your entire database ğŸ˜†. So letâ€™s add a rate limit to our API when restricts the client to perform only a few requests every x minutes</p> <p data-beyondwords-marker="31d40aae-b7c3-41bf-9c4f-0f571b1ff7e9">Letâ€™s install <a href="https://www.npmjs.com/package/express-rate-limit" rel="nofollow noopener noreferrer" target="_blank">express-rate-limit</a> package</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install </span>express-rate-limit

<span class="c"># or</span>

<span class="nv">$ </span>yarn add express-rate-limit
</code></pre></div></div> <p data-beyondwords-marker="56540ae7-c434-46eb-9d05-59473e2b2731">Letâ€™s create a <code class="language-plaintext highlighter-rouge">middleware</code> folder that contains all the middlewares of our API. Create a file named <code class="language-plaintext highlighter-rouge">rateLimiter.js</code> under the <code class="language-plaintext highlighter-rouge">middleware</code> folder</p> <p data-beyondwords-marker="fb793352-710e-4413-b424-36f5954a2895"><code class="language-plaintext highlighter-rouge">middleware/rateLimiter.js</code></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">rateLimit</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express-rate-limit</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">rateLimiter</span> <span class="o">=</span> <span class="nf">rateLimit</span><span class="p">({</span>
  <span class="na">windowMs</span><span class="p">:</span> <span class="mi">1</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span> <span class="c1">// 1 minute</span>
  <span class="na">max</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bonk ğŸ”¨</span><span class="dl">'</span><span class="p">,</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">rateLimiter</span><span class="p">;</span>
</code></pre></div></div> <p data-beyondwords-marker="f16dd652-3b23-49c4-af86-4dea2b0c805f">Letâ€™s understand what this piece of code is doing?</p> <ul> <li data-beyondwords-marker="65d7ee0b-8148-4cc3-acbf-154fb22ae6a8">We are importing the <code class="language-plaintext highlighter-rouge">express-rate-limit</code> package</li> <li data-beyondwords-marker="53018696-0a45-4cf8-a93d-bca4210b7886">The <code class="language-plaintext highlighter-rouge">windowMs</code> specifies the duration</li> <li data-beyondwords-marker="6928cfdd-37a2-4b43-a699-8f1d31f835a1">The <code class="language-plaintext highlighter-rouge">max</code> specifies the max amount of requests the client can make in the duration specified</li> <li data-beyondwords-marker="16779b07-af3f-4ada-8987-bd69b3cece72">The <code class="language-plaintext highlighter-rouge">message</code> is the message which is shown to the client when he exceeds the max limit</li> </ul> <p data-beyondwords-marker="13933cf1-1f4a-41ec-aaab-752d956dfe98">So letâ€™s import into the <code class="language-plaintext highlighter-rouge">index.js</code> file and test it out</p> <p data-beyondwords-marker="a97003b4-2fee-49d8-bbe7-9a1a1b897e98"><code class="language-plaintext highlighter-rouge">index.js</code></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">rateLimiter</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./middleware/rateLimiter.js</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">rateLimiter</span><span class="p">);</span>
</code></pre></div></div> <p data-beyondwords-marker="e6a902dd-fa6e-443b-b027-06a615cfdbcb">ğŸ˜¹ I got bonked by myself</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/zDzExMZ.png" alt="" loading="lazy"></p> <h1 id="deploying-our-api-on-heroku" data-beyondwords-marker="58da8113-71dd-4c9f-8e2d-7359256fef20">Deploying our API on Heroku</h1> <p data-beyondwords-marker="29d32c95-09f0-42e0-9ea3-995354993c8e">ğŸ‘€ We have successfully built an API but how would other developers use it if it isnâ€™t deployed?</p> <p data-beyondwords-marker="7f9b7c77-debe-4a8b-b514-4478abdb2e1a">Letâ€™s deploy it on Heroku ğŸš€.</p> <p data-beyondwords-marker="cc39f5a2-33de-4f58-b90b-06b8e56bf505">Get started by initializing a git repository in the directory. Create a new GitHub repository and push your changes into that repository ğŸ‘€</p> <p data-beyondwords-marker="12aaa667-3085-459d-8771-cb0231bd5322">Letâ€™s create a new file named <code class="language-plaintext highlighter-rouge">Procfile</code> which is just a file that tells Heroku which command is need to be run. Add the below content to the <code class="language-plaintext highlighter-rouge">Procfile</code> file</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>web: node index.js
</code></pre></div></div> <p data-beyondwords-marker="1da66c45-fc62-4dc9-bf7d-9716732c4be3"><strong>NOTE</strong>: nodemon doesnâ€™t work in the production stage. It only works in the development stage, so we have to use the good old <code class="language-plaintext highlighter-rouge">node index.js</code></p> <p data-beyondwords-marker="6fecb62a-8fd7-466e-a5a8-b1802a8c9bf0">Create an account on <a href="https://herokuapp.com/" rel="nofollow noopener noreferrer" target="_blank">Heroku</a> and click on <code class="language-plaintext highlighter-rouge">Create new app</code>, give some cool name to your API</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/pqdLULG.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="0192f9e3-5852-4949-a341-31636298fa08">Head over to the settings tab and click <code class="language-plaintext highlighter-rouge">Reveal Config Vars</code></p> <p data-beyondwords-marker="852e968e-9fcc-4e65-a530-b62175c87d67">These are the environment variables</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/aj7mHCD.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="10018c4c-14fe-46d4-b626-d5543c12b90d">Add a new config var with the key as <code class="language-plaintext highlighter-rouge">MONGODB_URL</code> and the value as your MongoDB connection URL</p> <p data-beyondwords-marker="6b3e77af-d4ef-4208-bd71-afa23efa77f2">Head back to the deploy tab and connect the GitHub repository which you have created just before to your Heroku application</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://imgur.com/eBgS6pU.png" alt="" loading="lazy"></p> <p data-beyondwords-marker="724e4d5a-8e9e-4aea-a22d-b04aff9d19b1">Click the <code class="language-plaintext highlighter-rouge">Deploy branch</code> button. <strong>TADA</strong> ğŸš€ You have successfully created a REST API and deployed it as well :D</p> <p data-beyondwords-marker="a3d8af49-4e3d-43fb-b124-669608bf63e3">The entire source code for this tutorial will be available on <a href="https://github.com/Kira272921/dev-credits-api" rel="nofollow noopener noreferrer" target="_blank">my GitHub</a>.</p> <p data-beyondwords-marker="4cc19227-4bc6-4eb5-9dd6-015ca43b9f64"><a href="https://devcredits-api.herokuapp.com" rel="nofollow noopener noreferrer" target="_blank">Check out the API</a> which we built today.</p> <p data-beyondwords-marker="efd354af-2a23-4e24-9fa4-46b4e27efcd6">Thatâ€™s it for this blog folks ğŸ¤. Meet yâ€™all in the next blog post</p> </article> <hr> <div class="px-6 pb-6 md:px-8 md:pb-8 flex flex-col items-center rounded-bl-2xl rounded-br-2xl"> <p class="text-center mb-4"> Join discussions at <a href="https://discord.genicsblog.com" target="_blank" class="cta-link"> our discord server &gt; </a> <br> Did you learn something new? Add a comment below and spread the word! </p> <div class="grid grid-flow-col gap-6"> <a class="social-link underline-none" rel="nofollow noopener noreferrer" href="https://facebook.com/sharer.php?u=https://genicsblog.com/kira/how-to-build-a-rest-api-using-nodejs" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/facebook.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a class="social-link underline-none" rel="nofollow noopener noreferrer" href="https://api.whatsapp.com/send?text=Checkout%20this%20amazing%20article%20at%20Genics%20Blog%20'How%20to%20build%20a%20REST%20API%20using%20NodeJS':%20https://genicsblog.com/kira/how-to-build-a-rest-api-using-nodejs" onclick="window.open(this.href, 'whatsapp-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/whatsapp.svg" class="social-image w-10 h-10" loading="lazy"> </a> <a class="social-link underline-none" rel="nofollow noopener noreferrer" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://genicsblog.com/kira/how-to-build-a-rest-api-using-nodejs" onclick="window.open(this.href, 'linkedin-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/linkedin.svg" class="social-image w-7 h-7" loading="lazy"> </a> <a class="social-link underline-none" rel="nofollow noopener noreferrer" href="https://twitter.com/intent/tweet?text=Check%20out%20this%20amazing%20article%20by%20@kira_272921%20at%20@genicsblog:%20How%20to%20build%20a%20REST%20API%20using%20NodeJS&amp;url=https://genicsblog.com/kira/how-to-build-a-rest-api-using-nodejs" onclick="window.open(this.href, 'twitter-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/twitter.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a class="social-link underline-none" rel="nofollow noopener noreferrer" href="https://www.snapchat.com/scan?attachmentUrl=https://genicsblog.com/kira/how-to-build-a-rest-api-using-nodejs" onclick="window.open(this.href, 'snapchat-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/snapchat.svg" class="social-image w-14 h-14 -m-2" loading="lazy"> </a> </div> </div> </div> <aside class="sidebar-area"> <figure class="p-6 md:p-8 elevated"> <a class="underline-none" href="/author/kira/"> <img class="w-24 h-24 rounded-full mx-auto" src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/90365542?v=4" alt="Kira" loading="lazy"> </a> <div class="pt-4 space-y-4"> <figcaption class="font-medium text-center"> <div> <a href="/author/kira/" class="text-xl font-bold"> Kira </a> </div> <div class="text-slate-700 dark:text-slate-200 text-sm"> Full stack web developer, open-source enthusiast and tech blogger </div> </figcaption> <p class="leading-5 font-medium text-justify">Hey ğŸ‘‹, I am Kira, a full stack web developer, open-source enthusiast and tech blogger</p> </div> </figure> <div class="adverts-container"> <figure class="advert elevated"> <div align="center"> <ins class="adsbygoogle" data-ad-client="ca-pub-8114751086331659" data-ad-slot="8698895132" style="display:inline-block; min-width:150px; max-width:310px; width:100%; height:600px"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> </figure> <figure class="sponsor elevated lg:sticky lg:top-24"> <img src="https://dash.beyondwords.io/logo-dark.svg" class="logo hidden dark:block" loading="lazy"> <img src="https://dash.beyondwords.io/logo.svg" class="logo dark:hidden" loading="lazy"> <h4 class="mt-4"> BeyondWords <span class="text-xs text-white px-3 py-1 align-middle rounded-xl bg-primary">Sponsored</span> </h4> <p>BeyondWords is an AI voice and audio publishing platform that brings frictionless audio to writers, newsrooms, and businesses!</p> <div class="flex justify-center"> <a class="px-3 py-1 mt-4 linkbtn underline-none" href="https://beyondwords.io?utm_source=genicsblog.com&amp;utm_medium=cpc&amp;utm_campaign=advertisement" rel="nofollow" target="_blank"> Check it out &gt; </a> </div> </figure> </div> </aside> </section> <br> <div align="center"> <ins class="adsbygoogle" style="display: block" data-ad-format="fluid" data-ad-layout-key="-fb+5w+4e-db+86" data-ad-client="ca-pub-8114751086331659" data-ad-slot="3535897708"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> <br> <div class="cta elevated"> <div class="p-8 md:p-10 grid grid-flow-row sm:grid-flow-col gap-x-8 items-center justify-between"> <section class="md:mr-4"> <h3>Contribute to the Genics Blog!</h3> <p> Genics Blog is a purely <a href="https://github.com/genicsblog" rel="nofollow noreferrer noopener" target="_blank" class="cta-link">open source</a> publication. Authors at Genics post highly resourceful content on varied topics relevant to the developer community. Join us and start publishing today! </p> </section> <a class="px-4 py-1.5 mt-8 md:mt-0 md:ml-4 linkbtn underline-none font-bold text-lg" href="/contribute"> Contribute </a> </div> </div> <h1 class="mt-12 mx-6 lg:mx-10 xl:mx-14">Comments</h1> <section class="lg:flex lg:justify-center"> <div id="comments" class="content-area"></div> <aside class="sidebar-area"> <div class="p-6 space-y-4 lg:sticky lg:top-24 elevated"> <p class="leading-5 font-medium text-justify"> Please adhere to our <a href="/code-of-conduct">Code of Conduct</a> while adding a comment. Respect other's opinion. </p> </div> </aside> </section> <div class="m-8 md:m-10 lg:m-14"> <div class="flex justify-center"> <h2>Related content</h2> </div> <div class="flex flex-col sm:grid sm:grid-cols-2 lg:grid-cols-3 sm:gap-4 md:gap-4 lg:gap-6 text-center"> <a class="mt-4 mb-6 px-6 pt-2 pb-6 postbox hover:border-web3 dark:hover:!border-web3 underline-none" href="/kira/how-to-build-a-faucet-cli-using-node-js"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://imgur.com/0qQxUt3.png" alt="How to build a faucet CLI using NodeJS ğŸš€" title="How to build a faucet CLI using NodeJS ğŸš€" class="aspect-video w-full mt-4" loading="lazy"> <div class="mt-6 mb-16"> <h2 class="line-clamp-2">How to build a faucet CLI using NodeJS ğŸš€</h2> <p class="line-clamp-3">The complete guide to building a faucet CLI using NodeJS.</p> </div> <div class="absolute mt-20 right-6 bottom-6 left-6"> <div class="flex items-center justify-between mt-6"> <div class="flex items-center"> <img src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/90365542?v=4" alt="Kira's Profile Picture" title="Kira's Profile Picture" class="rounded-full w-10 h-10" width="40px" height="40px" loading="lazy"> <span class="ml-2">Kira</span> </div> <span>Apr 24, 2022</span> </div> </div> </a> <a class="mt-4 mb-6 px-6 pt-2 pb-6 postbox hover:border-web dark:hover:!border-web underline-none" href="/usman/how-to-use-mongoose-with-next-js-for-mongodb"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1650187197534/EONUGmGt8.png" alt="How to use Mongoose with Next.js for MongoDB?" title="How to use Mongoose with Next.js for MongoDB?" class="aspect-video w-full mt-4" loading="lazy"> <div class="mt-6 mb-16"> <h2 class="line-clamp-2">How to use Mongoose with Next.js for MongoDB?</h2> <p class="line-clamp-3">Learn using Mongoose for MongoDB by building a hands-on project!</p> </div> <div class="absolute mt-20 right-6 bottom-6 left-6"> <div class="flex items-center justify-between mt-6"> <div class="flex items-center"> <img src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://i.ibb.co/Fs6Kww8/PFP.jpg" alt="Usman Sabuwala's Profile Picture" title="Usman Sabuwala's Profile Picture" class="rounded-full w-10 h-10" width="40px" height="40px" loading="lazy"> <span class="ml-2">Usman</span> </div> <span>Apr 17, 2022</span> </div> </div> </a> <a class="mt-4 mb-6 px-6 pt-2 pb-6 postbox hover:border-backend dark:hover:!border-backend underline-none" href="/dhruva/intro-to-graphql-with-node-and-typescript"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://user-images.githubusercontent.com/46792249/151178959-781d2ea4-a4dc-4f89-90d9-b98d62821944.png" alt="Intro to GraphQL with Node.js and TypeScript" title="Intro to GraphQL with Node.js and TypeScript" class="aspect-video w-full mt-4" loading="lazy"> <div class="mt-6 mb-16"> <h2 class="line-clamp-2">Intro to GraphQL with Node.js and TypeScript</h2> <p class="line-clamp-3">The complete guide to working with GraphQL using TypeGraphQL and building a basic CRUD functionality with TypeORM and Postgres.</p> </div> <div class="absolute mt-20 right-6 bottom-6 left-6"> <div class="flex items-center justify-between mt-6"> <div class="flex items-center"> <img src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/66675022" alt="Dhruva Srinivas's Profile Picture" title="Dhruva Srinivas's Profile Picture" class="rounded-full w-10 h-10" width="40px" height="40px" loading="lazy"> <span class="ml-2">Dhruva</span> </div> <span>Jan 26, 2022</span> </div> </div> </a> </div> </div> </main> <footer class="px-12 py-8 text-center"> <div class="flex justify-center"> <a aria-label="Genics Blog's Discord server" class="mr-2 underline-none hover:scale-125 transition" href="https://discord.genicsblog.com" target="_blank"> <img alt="Discord's logo" src="/assets/images/social/discord.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a aria-label="Genics Blog's GitHub organization" class="mx-4 underline-none hover:scale-125 transition" href="https://github.com/genicsblog" target="_blank" rel="nofollow noopener noreferrer"> <img alt="GitHub's logo" src="/assets/images/social/github.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a aria-label="Genics Blog's Twitter page" class="ml-2 underline-none hover:scale-125 transition" href="https://twitter.com/genicsblog" target="_blank" rel="nofollow noopener noreferrer"> <img alt="Twitter's logo" src="/assets/images/social/twitter.svg" class="social-image w-8 h-8" loading="lazy"> </a> </div> <br> Â© 2021 <a href="/">Genics Blog</a> <br> Built with <a href="https://jekyllrb.com" target="_blank" rel="nofollow noopener noreferrer">Jekyll</a>. Hosted on <a href="https://github.com" target="_blank" rel="nofollow noopener noreferrer">GitHub</a>. <br><br> Developed by <a href="https://github.com/gouravkhunger" rel="nofollow noopener noreferrer" target="_blank"> Gourav Khunger</a>. Thanks to the <a href="https://github.com/genicsblog/genicsblog.com/graphs/contributors" rel="nofollow noopener noreferrer" target="_blank"> contributors</a>! <br><br> <a class="nav-item text-white" href="/terms">T&amp;C</a> <a class="nav-item text-white" href="/privacy-policy">Privacy Policy</a> <a class="nav-item text-white" href="/licensing">Licensing</a> </footer> <div class="hidden fixed top-0 w-full h-full p-6 md:p-14 backdrop-blur-md cursor-pointer z-20" id="search-container"> <div class="p-4 bg-white dark:bg-slate-800 mx-auto w-full max-h-full sm:w-3/4 lg:w-1/2 content-center rounded-lg shadow-md shadow-slate-200 dark:shadow-none cursor-auto overflow-auto" id="search-box"> <div class="flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 stroke-slate-400" fill="none" viewbox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path> </svg> <input type="text" class="w-full h-full pl-4 text-2xl outline-none dark:bg-slate-800" id="search-input" placeholder="Search..."> <span class="hidden lg:block text-sm text-gray-600 text-right tracking-tight ml-2"> <kbd class="bg-gray-200 dark:bg-slate-600 dark:text-gray-200 rounded-md shadow-sm py-1 px-2">Esc</kbd> </span> </div> <div id="results-container"></div> </div> </div> <script src="/assets/js/theme.js" data-no-instant></script> <script src="/assets/js/search.js" data-no-instant></script> <script src="/assets/js/prism.js" data-no-instant></script> <script src="/assets/js/instantclick.min.js" data-no-instant></script> <script data-no-instant>InstantClick.on("change",()=>{setTheme(),Prism.highlightAll(),initCodeBlocks(),window.onscroll=(()=>{setStickyness()}),document.getElementById("search-container").addEventListener("click",t=>{"search-container"===t.target.id&&hideSearch()});const t=window.location.pathname+window.location.search+window.location.hash;gtag("set","page_path",t);const e=document.getElementById("audio-player");if(e)new BeyondWords.Player({projectId:11987,target:e,playerStyle:"large",widgetStyle:"small",skipButtonStyle:"seconds",highlightColor:isDark()?DARK_HIGHLIGHT:LIGHT_HIGHLIGHT,contentId:e.dataset.audioId});const n=document.getElementById("comments");if(n){const t={src:"https://giscus.app/client.js","data-repo":"genicsblog/comments","data-repo-id":"R_kgDOG0-Vlw","data-category":"Announcements","data-category-id":"DIC_kwDOG0-Vl84CP8Dz","data-mapping":"pathname","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":`${isDark()?GISCUS_DARK:GISCUS_LIGHT}`,"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");for(key in t)e.setAttribute(key,t[key]);n.appendChild(e)}}),InstantClick.on("receive",()=>{BeyondWords.Player.destroyAll(),"function"==typeof window.cleanup&&(window.cleanup(),window.cleanup())}),InstantClick.init("mousedown");</script> </body> </html>