<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" content="The complete guide to working with GraphQL using TypeGraphQL and building a basic CRUD functionality with TypeORM and Postgres."> <meta name="twitter:description" content="The complete guide to working with GraphQL using TypeGraphQL and building a basic CRUD functionality with TypeORM and Postgres."> <meta property="og:description" content="The complete guide to working with GraphQL using TypeGraphQL and building a basic CRUD functionality with TypeORM and Postgres."> <meta property="og:title" content="Intro to GraphQL with Node.js and TypeScript"> <meta property="og:image" content="https://user-images.githubusercontent.com/46792249/151178959-781d2ea4-a4dc-4f89-90d9-b98d62821944.png"> <meta property="og:image:alt" content="Intro to GraphQL with Node.js and TypeScript"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="@genicsblog"> <meta name="twitter:image" content="https://user-images.githubusercontent.com/46792249/151178959-781d2ea4-a4dc-4f89-90d9-b98d62821944.png"> <meta name="twitter:creator" content="@carrotfarmer17"> <meta property="og:type" content="article"> <meta property="article:section" content="backend"> <meta property="article:tag" content="api, node-js, web-development"> <meta property="article:author" content="https://genicsblog.com/author/dhruva/"> <meta property="article:published_time" content="2022-01-26T00:00:00+0000"> <meta property="og:url" content="https://genicsblog.com/dhruva/intro-to-graphql-with-node-and-typescript"> <meta name="theme-color" content="#16161f"> <meta name="msapplication-TileColor" content="#16161f"> <meta name="msapplication-navbutton-color" content="#16161f"> <meta name="apple-mobile-web-app-status-bar-style" content="#16161f"> <link rel="canonical" href="https://thecatblog.hashnode.dev/intro-to-graphql-with-nodejs-and-typescript"> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Fira+Code&amp;family=Sen&amp;display=swap" rel="stylesheet"> <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon"> <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png"> <link rel="stylesheet" href="/assets/css/theme.css"> <link rel="stylesheet" href="/assets/css/prism.css"> <link rel="manifest" href="/manifest.json"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-KQJM9Z9N1Z"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KQJM9Z9N1Z");</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8114751086331659" crossorigin="anonymous"></script> <script src="https://proxy.beyondwords.io/npm/@beyondwords/player@latest/dist/umd.js"></script> <title>Intro to GraphQL with Node.js and TypeScript</title> </head> <body> <nav> <p class="bg-primary p-3 text-center text-white font-medium flex flex-col sm:block"> <span class="md:hidden px-1">Connect with us on discord to stay updated.</span> <span class="hidden md:inline px-1">Connect with us on discord to stay updated on the blog's development.</span> <a href="https://discord.genicsblog.com" target="_blank" class="font-bold underline header-anchor hover:text-slate-300" rel="nofollow noopener noreferrer"> Join &gt; </a> </p> <header class="w-full top-0 z-10" id="navbar"> <div class="bg-background max-h-20 py-1 px-3 sm:px-8 lg:px-8 mx-auto"> <div class="flex justify-between h-16"> <div class="flex lg:px-0"> <a class="group flex-shrink-0 flex items-center logo-anchor" href="/" aria-label="Home Page Link"> <div class="flex items-center space-x-2 whitespace-nowrap flex-nowrap"> <div class="h-8 w-8 md:mx-2"> <svg class="h-8 w-8 fill-white group-hover:fill-slate-300" viewbox="0 0 79.784508 91.197495" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <g id="layer1" transform="translate(-68.235445,-52.679805)"> <path id="path962" style=" stroke: none; stroke-width: 0.999999px; stroke-linecap: butt; stroke-linejoin: miter; stroke-opacity: 1; " d="m 408.73047,210.44336 -139.49414,80.59961 0.87109,162.49414 52.71289,-32.94922 85.34766,48.85938 87.42773,-48.85743 -0.63476,-53.22851 -84.8711,-0.88477 v 27.79297 h 56.02735 v 9.45508 l -58.31446,33.66797 -56.13085,-32.4082 0.63476,-66.94922 55.81836,-32.22461 57.25195,32.76172 82.41016,-47.75782 z m 0.43945,32.62695 83.28125,48.08203 -26.93555,15.55274 -57.21484,-33.0332 -84.18359,48.60351 v 66.39453 l -25.48047,14.71094 0.084,-96.54102 z" transform="scale(0.26458333)"></path> <path style=" stroke: none; stroke-width: 0.264583px; stroke-linecap: butt; stroke-linejoin: miter; stroke-opacity: 1; " d="m 81.889144,125.74786 26.204966,15.12944 36.92584,-21.31914 V 88.998204 l -7.22758,4.172845 V 115.03627 L 108.1902,132.12709 89.310794,121.22706 Z" id="path1416"></path> </g> </svg> </div> <span class="font-bold hidden sm:block text-xl tracking-tight text-white group-hover:text-slate-300"> Genics Blog</span> </div> </a> </div> <div class="flex items-center h-16"> <div class="hidden lg:block"> <a class="nav-item text-white" href="/topics">Topics</a> <a class="nav-item text-white" href="/about">About Us</a> <a class="nav-item text-white" href="/contact">Contact</a> <a class="nav-item text-white" target="_blank" href="https://docs.genicsblog.com">Docs</a> </div> <button onclick="showSearch()" aria-label="Search across the site..."> <svg xmlns="http://www.w3.org/2000/svg" class="ml-4 h-6 w-6 stroke-white hover:stroke-slate-300" fill="none" viewbox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path> </svg> </button> <button type="button" class="ml-2" onclick="saveTheme(isDark() ? LIGHT : DARK)" title="Ctrl + Shift + L"> <svg viewbox="0 0 512 512" class="h-8 w-8 fill-white hover:fill-slate-300 transition-all" id="theme-toggle-icon"> <g> <path d="M262.524,164.624c-49.466,0-89.592,40.119-89.592,89.596c0,49.487,40.126,89.606,89.592,89.606 c49.487,0,89.613-40.119,89.613-89.606C352.138,204.743,312.012,164.624,262.524,164.624z M262.524,320.136 c-36.39,0-65.902-29.513-65.902-65.916c0-36.396,29.513-65.903,65.902-65.903c36.41,0,65.924,29.506,65.924,65.903 C328.448,290.623,298.935,320.136,262.524,320.136z"></path> <path d="M264.078,149.221c0,0-39.031-73.758,0-73.758C303.103,75.462,264.078,149.221,264.078,149.221z"></path> <path d="M261.922,363.328c0,0,39.053,73.737,0,73.737C222.905,437.045,261.922,363.328,261.922,363.328z"></path> <path d="M186.536,331.194c0,0-24.539,79.766-52.142,52.148C106.817,355.746,186.536,331.194,186.536,331.194z"></path> <path d="M155.941,255.181c0,0-73.745,39.048-73.745,0C82.224,216.177,155.941,255.181,155.941,255.181z"></path> <path d="M188.068,179.794c0,0-79.746-24.524-52.142-52.142C163.503,100.086,188.068,179.794,188.068,179.794z"></path> <path d="M428.852,254.552c0,49.668-40.276,89.931-89.935,89.931c-49.657,0-89.928-40.263-89.928-89.931 c0-49.672,40.271-89.928,89.928-89.928C388.575,164.624,428.852,204.88,428.852,254.552z"></path> </g> </svg> </button> <a class="ml-2 md:ml-4 px-2.5 py-1.5 font-bold rounded-md text-black bg-white hover:bg-slate-300 hover:scale-110 transition underline-none" href="/contribute">Contribute</a> <div class="ml-4 lg:hidden cursor-pointer"> <div id="menu-btn" class="h-8 w-8 relative" onclick="toggleNav()"> <div class="menu-btn-lines"></div> </div> </div> </div> </div> </div> <div class="top-0 bg-background hidden p-6 lg:hidden" id="mobile-nav"> <div class="grid grid-cols-2 gap-y-2 gap-x-4"> <a class="group mobile-nav-item " href="/topics"> <span class="group-hover:text-white">Topics</span> </a> <a class="group mobile-nav-item " href="/about"> <span class="group-hover:text-white">About Us</span> </a> <a class="group mobile-nav-item " href="/contact"> <span class="group-hover:text-white">Contact</span> </a> <a class="group mobile-nav-item" href="https://docs.genicsblog.com" target="_blank"> <span class="group-hover:text-white">Documentation</span> </a> </div> </div> </header> </nav> <header class="banner"> <div class="flex flex-col lg:flex-row p-2"> <div class="flex justify-center items-center lg:w-1/2 md:mb-0"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://user-images.githubusercontent.com/46792249/151178959-781d2ea4-a4dc-4f89-90d9-b98d62821944.png" class="m-8 w-full rounded-xl shadow-xl aspect-video max-w-3xl" loading="lazy"> </div> <div class="flex flex-col justify-center lg:items-start w-full lg:w-1/2 lg:ml-12 max-w-3xl"> <h1 class="text-4xl font-black tracking-tight">Intro to GraphQL with Node.js and TypeScript</h1> <span class="mt-0.5 text-justify">The complete guide to working with GraphQL using TypeGraphQL and building a basic CRUD functionality with TypeORM and Postgres.</span> <div class="flex items-center mt-8"> <a class="underline-none" href="/author/dhruva/"> <img class="rounded-full w-14 h-14" src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/66675022" loading="lazy"> </a> <div class="ml-4 leading-3"> <a class="font-extrabold text-xl" href="/author/dhruva/"> Dhruva Srinivas </a> <br> <span class="text-sm"> Posted on January 26, 2022 </span> </div> </div> <div class="mt-8"> <span>Category: </span> <a class="text-sm ml-2 archive-name !bg-backend underline-none" href="/category/backend">#backend</a> </div> <div class="mt-4 sm:mt-3"> <span>Tags: </span> <a class="text-sm ml-2 my-0.5 archive-name !bg-api underline-none" href="/tag/api">#api</a> <a class="text-sm ml-2 my-0.5 archive-name !bg-node-js underline-none" href="/tag/node-js">#node-js</a> <a class="text-sm ml-2 my-0.5 archive-name !bg-web-development underline-none" href="/tag/web-development">#web-development</a> </div> </div> </div> </header> <main> <br> <div align="center"> <ins class="adsbygoogle" style="display: block" data-ad-format="fluid" data-ad-layout-key="-fb+5w+4e-db+86" data-ad-client="ca-pub-8114751086331659" data-ad-slot="3535897708"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> <section class="lg:flex lg:justify-center"> <div class="content-area elevated"> <div class="notice"> <span class="text-base italic leading-8"> Originally published at <a href="https://thecatblog.hashnode.dev/intro-to-graphql-with-nodejs-and-typescript" target="_blank" rel="nofollow noopener noreferrer">thecatblog.hashnode.dev</a>. </span> </div> <article class="p-6 md:p-8"> <div class="mb-6" id="audio-player" data-audio-id="3468789"></div> <p data-beyondwords-marker="d9250271-8931-4b63-a540-e0e8578d6826">In this post, I’ll help you get a solid understanding of working with GraphQL in Node.js and TypeScript using a library called <a href="https://typegraphql.com" rel="nofollow noopener noreferrer" target="_blank">TypeGraphQL</a>.</p> <p data-beyondwords-marker="0128700c-12b6-4f6f-9954-3cc0c95030ad">TypeGraphQL is an awesome way to create your GraphQL resolvers and it has seamless integration capabilities with ORMs like <code class="language-plaintext highlighter-rouge">TypeORM</code> (we’ll be using it in this post!) and mikro-orm. It uses classes and decorators to beautifully generate our schemas using very less code.</p> <p data-beyondwords-marker="01c7eade-6b39-4756-ab3f-ebc0647ba3f5">Also stick around till the end to find some challenges to reinforce your skills!</p> <h1 id="what-were-gonna-do" data-beyondwords-marker="73a73cd9-9c71-4401-8761-c6d369c8b6dd">What we’re gonna do</h1> <ul> <li data-beyondwords-marker="387f215e-c39b-40bc-97a2-26dab1b24f93">First, we’ll setup a basic TypeScript project</li> <li data-beyondwords-marker="f6fc2fc7-7aee-4e53-94e2-1fd628e2f1ed">Then, we’ll configure <strong>TypeORM</strong>, to interact with our database</li> <li data-beyondwords-marker="7ceade4f-11e1-48c2-920d-c3837b73121f">We’ll create a <code class="language-plaintext highlighter-rouge">Task</code> database entity and hook it up with TypeORM</li> <li data-beyondwords-marker="522d5478-4ce7-46e4-ab85-5acec0e0bd3b">After that, we’ll set up a basic Apollo/Express web server</li> <li data-beyondwords-marker="a4078648-57c5-4ecf-bfae-6c9a10de0629">And finally, we’ll create our own GraphQL resolver using TypeGraphQL with CRUD (create, read, update, delete) functionality</li> </ul> <p data-beyondwords-marker="3217e5b5-96ad-44c3-b1ec-32b03ec13240">Alright, let’s get started!</p> <h1 id="setting-up-a-typescript-project" data-beyondwords-marker="03401e8d-15d8-407f-9d06-233597a1819a">Setting up a TypeScript project</h1> <p data-beyondwords-marker="537a0e25-b760-4df3-a31c-93639a22a81a">First let’s create an empty directory called <code class="language-plaintext highlighter-rouge">graphql-crud</code>.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>graphql-crud
</code></pre></div></div> <p data-beyondwords-marker="2bc8c324-a44c-41a6-9c3e-0ceec08d7129">And you can open this directory with the editor of your choice (I’ll be using Visual Studio Code).</p> <p data-beyondwords-marker="47b2377a-9c7e-4e6e-a2fc-b93ab31ec388">Now let’s initialize this as an NPM project using</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm init <span class="nt">-y</span>
</code></pre></div></div> <p data-beyondwords-marker="43f9b634-2dff-4388-9b8c-08dab09a9a3c">This creates a basic <code class="language-plaintext highlighter-rouge">package.json</code>.</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"graphql-crud"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"main"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index.js"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="s2">"echo </span><span class="se">\"</span><span class="s2">Error: no test specified</span><span class="se">\"</span><span class="s2"> &amp;&amp; exit 1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"keywords"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ISC"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="64d56dad-2310-477f-9fa0-cea502e50bf9">Alright cool!</p> <p data-beyondwords-marker="94ad6d46-3927-4754-a168-e188955e01d1">So now since we have an NPM project set up, we can install TypeScript and the type definitions for Node:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yarn add typescript
</code></pre></div></div> <p data-beyondwords-marker="21495901-f7f7-4505-9026-dac94015c80a">and</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yarn add <span class="nt">-D</span> @types/node
</code></pre></div></div> <p data-beyondwords-marker="d802ff5c-79c6-4fa7-b2b9-c8c774bcc182"><strong>Note:</strong> I’ll be using Yarn throughout this post, feel free to use NPM.</p> <p data-beyondwords-marker="f70375a5-f843-4efc-97cd-e4bb69a3c7de">Also we need to make a <code class="language-plaintext highlighter-rouge">tsconfig.json</code> file to configure the TypeScript compiler, so to do that we’ll use a library called <code class="language-plaintext highlighter-rouge">tsconfig.json</code></p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npx tsconfig.json
</code></pre></div></div> <p data-beyondwords-marker="e3b26e46-a882-4e8a-bc9e-fc054bbcd271">Select <code class="language-plaintext highlighter-rouge">node</code> from the options</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://i.imgur.com/cSC9N19.png" alt="Untitled" loading="lazy"></p> <p data-beyondwords-marker="52e883c7-729b-4bcd-96d3-6a4e9766e37b">And now, it will create a TSConfig in your root directory.</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"compilerOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es2017"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"module"</span><span class="p">:</span><span class="w"> </span><span class="s2">"commonjs"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lib"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"dom"</span><span class="p">,</span><span class="w"> </span><span class="s2">"es6"</span><span class="p">,</span><span class="w"> </span><span class="s2">"es2017"</span><span class="p">,</span><span class="w"> </span><span class="s2">"esnext.asynciterable"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"skipLibCheck"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sourceMap"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"outDir"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./dist"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"moduleResolution"</span><span class="p">:</span><span class="w"> </span><span class="s2">"node"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"removeComments"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"noImplicitAny"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"strictNullChecks"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"strictFunctionTypes"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"noImplicitThis"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"noUnusedLocals"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"noUnusedParameters"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"noImplicitReturns"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"noFallthroughCasesInSwitch"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"allowSyntheticDefaultImports"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"esModuleInterop"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"emitDecoratorMetadata"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"experimentalDecorators"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"resolveJsonModule"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"baseUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"."</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"exclude"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"node_modules"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"include"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"./src/**/*.ts"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="e40251a2-dfe0-4255-892f-b7e947d8a1c9">Now, let’s create a simple TypeScript file.</p> <p data-beyondwords-marker="3c6f3286-5ef1-4806-a7cf-58316fb9a3f1"><code class="language-plaintext highlighter-rouge">src/index.ts</code></p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">hellooooo</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div> <p data-beyondwords-marker="561ec309-899a-4ede-a70c-5872cca3d3a2">We cannot run this file directly using Node, so we need to compile this into JavaScript. To do this, let’s create a <code class="language-plaintext highlighter-rouge">watch</code> script in our <code class="language-plaintext highlighter-rouge">package.json</code> to watch our TypeScript files for changes and compile them to JavaScript in the <code class="language-plaintext highlighter-rouge">dist/</code> directory.</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"graphql-crud"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"main"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index.js"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"watch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tsc -w"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"keywords"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ISC"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="9afa5e13-ca78-4f79-9930-d829d148e61b">Now if we run <code class="language-plaintext highlighter-rouge">npm watch</code> in our terminal, it will create a <code class="language-plaintext highlighter-rouge">dist</code> folder with our compiled JavaScript code. We’ll create a <code class="language-plaintext highlighter-rouge">dev</code> command to run this compiled code with the following script:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"watch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tsc -w"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nodemon dist/index.js"</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="e0b42e2a-46e6-4fac-a17a-a2b2ef14baf2">By the way, make sure you install <code class="language-plaintext highlighter-rouge">nodemon</code> either globally or in this project for this command to work.</p> <p data-beyondwords-marker="f8a9517e-bcc0-42c7-a7bc-ea0de2538400">Now to run this code you will run both <code class="language-plaintext highlighter-rouge">yarn watch</code> and <code class="language-plaintext highlighter-rouge">yarn dev</code> together, to compile our TypeScript and run the compiled code automatically.</p> <p data-beyondwords-marker="23e01b20-1bfe-403f-9b85-2327c03637ac">Alright, now our TypeScript project is ready to go! 🔥🔥</p> <h1 id="setting-up-typeorm" data-beyondwords-marker="4ae57b38-4628-4c2e-84e8-1f3904ed5596">Setting up TypeORM</h1> <p data-beyondwords-marker="d4fedd0b-b3d9-498f-8bc4-33186f38ddaf"><a href="https://typeorm.io" rel="nofollow noopener noreferrer" target="_blank">TypeORM</a> is an amazing ORM, which we can use to interact with various databases. It also has really good TypeScript support and the way we define database entities in TypeORM will be very useful when we setup TypeGraphQL later in this post.</p> <p data-beyondwords-marker="d9c2a267-7825-465c-bf39-db626c46efdc">In this tutorial, I will be using PostgreSQL as my database and really you can follow along with any relational database which you have set up.</p> <p data-beyondwords-marker="1ee68b10-9697-447f-9639-9d3c885b180a">Let’s install TypeORM and the native Postgres driver for Node:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yarn add typeorm pg
</code></pre></div></div> <p data-beyondwords-marker="4a453d3b-141a-4dff-8ba8-a80378f403c7">Now we can replace the code in <code class="language-plaintext highlighter-rouge">src/index.ts</code> to this:</p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Connection</span><span class="p">,</span> <span class="nx">createConnection</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typeorm</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">main</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="na">conn</span><span class="p">:</span> <span class="nx">Connection</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">createConnection</span><span class="p">({</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with the DB of your choice</span>
    <span class="na">database</span><span class="p">:</span> <span class="dl">"</span><span class="s2">graphql-crud</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with the name of your DB</span>
    <span class="na">username</span><span class="p">:</span> <span class="dl">"</span><span class="s2">username</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with your database user's username</span>
    <span class="na">password</span><span class="p">:</span> <span class="dl">"</span><span class="s2">pass</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with your database user's password</span>
    <span class="na">logging</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// this shows the SQL that's being run</span>
    <span class="na">synchronize</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// this automatically runs all the database migrations, so you don't have to :)</span>
    <span class="na">entities</span><span class="p">:</span> <span class="p">[],</span> <span class="c1">// we'll add our database entities here later.</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="nf">main</span><span class="p">().</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
</code></pre></div></div> <p data-beyondwords-marker="c411a0f8-9bb1-4fc3-be90-fcaaa1815326">This basically just specifies all the options for your database connection. We are using a <code class="language-plaintext highlighter-rouge">main</code> function because top-level awaits are not a thing unless you’re using ES7 or something like that.</p> <h1 id="creating-our-entity" data-beyondwords-marker="617b0609-5e12-4129-aa86-f1d665adb1a7">Creating our <code class="language-plaintext highlighter-rouge">Entity</code> </h1> <p data-beyondwords-marker="b9506e54-3357-4b0a-abf8-ea951d22f9c9">First things first, I think some people don’t exactly know what an Entity is, so I’ll just explain that part a bit now.</p> <p data-beyondwords-marker="69804afb-b3d7-4f80-bbbd-a07e387fa333">As you should already know, SQL databases (like Postgres, MySQL etc.) are made up of <strong>Tables</strong> and <strong>Columns.</strong> Like an Excel spreadsheet. Each table will contain fields related to it. For example:</p> <ul> <li data-beyondwords-marker="7a9f36d7-e844-4db0-b08d-6782f54a87a4">A table of <strong>Cars,</strong> may have columns like <strong>Manufacturer</strong>, <strong>Engine Type</strong>, <strong>Color</strong> etc.</li> </ul> <p data-beyondwords-marker="d3d69825-d75d-441d-b57d-12f4a1dc4bc4">An <code class="language-plaintext highlighter-rouge">Entity</code> basically defines the structure of a database table and its corresponding columns. In this post, we’ll perform our CRUD operations with Tasks or Todos. So lets create an entity for a <strong>Task.</strong></p> <p data-beyondwords-marker="b4c61e49-b1b7-40b9-a720-725d2dc0cc5e">First off, create a new file in the <code class="language-plaintext highlighter-rouge">src/entities</code> directory.</p> <p data-beyondwords-marker="f7b5de4b-0152-483f-beb8-ad7297759c91">To keep it simple, we’re going to have 2 columns for our <code class="language-plaintext highlighter-rouge">Task</code> table:</p> <ul> <li data-beyondwords-marker="b2121805-80f8-4f0a-9f12-4a5bf4caa6e5">The <strong>title</strong> of the task</li> <li data-beyondwords-marker="46413aee-1353-44d9-bf53-ada38638a45e">The <strong>description</strong> of the task</li> </ul> <p data-beyondwords-marker="4706b337-80ca-4218-a5ae-75ce2d781658">We’ll also have an <code class="language-plaintext highlighter-rouge">id</code>, a <code class="language-plaintext highlighter-rouge">created</code>, and an <code class="language-plaintext highlighter-rouge">updated</code> column.</p> <p data-beyondwords-marker="f07ae8ec-b806-48a7-8ab1-3b453171b6c8">We won’t really use the created and updated column, but its kind of a best practice 😉</p> <p data-beyondwords-marker="e37aa2ed-eb8a-46af-b0e7-e65165b2001f"><code class="language-plaintext highlighter-rouge">src/entities/Task.ts</code></p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span>
  <span class="nx">BaseEntity</span><span class="p">,</span>
  <span class="nx">Column</span><span class="p">,</span>
  <span class="nx">CreateDateColumn</span><span class="p">,</span>
  <span class="nx">Entity</span><span class="p">,</span>
  <span class="nx">PrimaryGeneratedColumn</span><span class="p">,</span>
  <span class="nx">UpdateDateColumn</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typeorm</span><span class="dl">"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Entity</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">Task</span> <span class="kd">extends</span> <span class="nc">BaseEntity</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">PrimaryGeneratedColumn</span><span class="p">()</span>
  <span class="nx">id</span><span class="o">!</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">CreateDateColumn</span><span class="p">()</span>
  <span class="nx">created</span><span class="p">:</span> <span class="nb">Date</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">UpdateDateColumn</span><span class="p">()</span>
  <span class="nx">updated</span><span class="p">:</span> <span class="nb">Date</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">Column</span><span class="p">()</span>
  <span class="nx">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">Column</span><span class="p">()</span>
  <span class="nx">description</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p data-beyondwords-marker="388cabb0-ba51-49a9-93db-93d917899918">Woah, woah, what is that?!</p> <p data-beyondwords-marker="6a30b06d-dce2-4ab6-b663-4678720ac9b7">This my friend, is the ✨ magic of decorators ✨</p> <p data-beyondwords-marker="882c0053-4893-491d-b534-3e3a33f562a9">This code is extremely clean and self-documenting:</p> <ul> <li data-beyondwords-marker="c518daa6-0d6e-4e72-bc3c-ef1abd688af7">We are creating a class called <code class="language-plaintext highlighter-rouge">Task</code> with the <code class="language-plaintext highlighter-rouge">Entity</code> decorating specifying that this class is an Entity.</li> <li data-beyondwords-marker="bbe634e8-ffbc-46dc-a18d-0d5714c7d07e">We are extending this class from <code class="language-plaintext highlighter-rouge">BaseEntity</code> so that some useful methods like <code class="language-plaintext highlighter-rouge">create</code>, <code class="language-plaintext highlighter-rouge">delete</code> etc. will be exposed to us with this class. You’ll see what I mean later on.</li> <li data-beyondwords-marker="3b4f9d18-4377-465d-80fe-f685de7d9260">Then we’re creating a primary column, for our ID. This is ID field is an integer and its automatically generated by TypeORM!</li> <li data-beyondwords-marker="ed6b6b9c-6184-40d5-87f6-f7289482a631">Next is the created and updated column and this too is automatically generated by TypeORM.</li> <li data-beyondwords-marker="a999fcd6-353b-48f3-b614-e0d11473942e">The <code class="language-plaintext highlighter-rouge">title</code> and <code class="language-plaintext highlighter-rouge">description</code> is a normal column, containing the title and the description of our task.</li> </ul> <p data-beyondwords-marker="b5ed460d-a909-44b4-aaf0-3a3449511681">And don’t forget to add the <code class="language-plaintext highlighter-rouge">Task</code> entity to your <code class="language-plaintext highlighter-rouge">entities</code> array in your TypeORM config:</p> <p data-beyondwords-marker="b107e7dd-5d59-4e22-9e16-ff32c0037b80"><code class="language-plaintext highlighter-rouge">src/index.ts</code></p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Connection</span><span class="p">,</span> <span class="nx">createConnection</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typeorm</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Task</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./entities/Task</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">main</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="na">conn</span><span class="p">:</span> <span class="nx">Connection</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">createConnection</span><span class="p">({</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with the DB of your choice</span>
    <span class="na">database</span><span class="p">:</span> <span class="dl">"</span><span class="s2">graphql-crud</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with the name of your DB</span>
    <span class="na">username</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with your database user's username</span>
    <span class="na">password</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with your database user's password</span>
    <span class="na">logging</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// this shows the SQL that's being run</span>
    <span class="na">synchronize</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// this automatically runs all the database migrations, so you don't have to :)</span>
    <span class="na">entities</span><span class="p">:</span> <span class="p">[</span><span class="nx">Task</span><span class="p">],</span> <span class="c1">// we'll add our database entities here later.</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="nf">main</span><span class="p">().</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
</code></pre></div></div> <p data-beyondwords-marker="0a51f6cb-4e81-4cf7-ba9b-09e0a7fd5fe6">Phew! Finally, let’s get started with the GraphQL part!</p> <h1 id="setting-up-express-with-apollo-server" data-beyondwords-marker="4c81a125-fd56-4ba0-af79-8ee71020f876">Setting up Express with Apollo Server</h1> <p data-beyondwords-marker="c3cf689f-30e3-49cc-a621-bcddb5045845">We’ll be using Express as our server and we’ll tell Express to use Apollo Server as middleware.</p> <p data-beyondwords-marker="5cfccec2-59fb-4040-b62f-f57d383df938">But, what <strong>is</strong> Apollo Server??</p> <p data-beyondwords-marker="2a92e530-d229-4b59-8f6f-efd3c6b6eeef">To understand what Apollo Server does, you’ll need to know how GraphQL works at its core. Basically, in an API there will be a REST endpoint for the GraphQL stuff (kinda ironic but yeah) from where you can run Queries and Mutations from your Resolvers.</p> <p data-beyondwords-marker="e9fd1baf-7c55-45bb-b557-760f22916f4d">What Apollo Server does, is just create an endpoint for your GraphQL to be served with some extra dev tools, like GraphQL Playground which helps you test your GraphQL queries in a cool environment.</p> <p data-beyondwords-marker="ad20b05f-d732-4b72-bf98-ec9672a95714">So let’s start!</p> <p data-beyondwords-marker="765da569-6576-41d4-b7dd-6c9d4b103587">We’ll install these libraries:</p> <ul> <li data-beyondwords-marker="5278ac15-cfb3-4989-939a-9a1ded17596d"><code class="language-plaintext highlighter-rouge">express</code></li> <li data-beyondwords-marker="249a03cc-65b6-4379-85a3-e6f8f4e70a02"> <code class="language-plaintext highlighter-rouge">apollo-server-express</code>: Express middleware for Apollo Server</li> <li data-beyondwords-marker="bea95ca7-ec72-4c2b-b1f2-c8b0bc1b144e"> <code class="language-plaintext highlighter-rouge">graphql</code>: The JavaScript implementation of GraphQL</li> <li data-beyondwords-marker="676ec808-92fd-41fc-887f-6833956b5ed1"><code class="language-plaintext highlighter-rouge">type-graphql</code></li> </ul> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yarn add express apollo-server-express graphql type-graphql 
</code></pre></div></div> <p data-beyondwords-marker="f679cd29-a63f-4560-be3d-e51c4f3971de">Let’s also install the type definitions for express:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yarn add <span class="nt">-D</span> @types/express
</code></pre></div></div> <p data-beyondwords-marker="217a1f13-493b-4577-b568-5989f2d54dc8">Cool!</p> <p data-beyondwords-marker="c9691cbd-11fc-4652-b370-cf2545630c50">Let’s now create our Express app:</p> <p data-beyondwords-marker="9d0399e1-d99d-4c68-9b68-900cd32ed22e"><code class="language-plaintext highlighter-rouge">src/index.ts</code></p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Connection</span><span class="p">,</span> <span class="nx">createConnection</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typeorm</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">express</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Express</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Task</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./entities/Task</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">main</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="na">conn</span><span class="p">:</span> <span class="nx">Connection</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">createConnection</span><span class="p">({</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with the DB of your choice</span>
    <span class="na">database</span><span class="p">:</span> <span class="dl">"</span><span class="s2">graphql-crud</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with the name of your DB</span>
    <span class="na">username</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with your database user's username</span>
    <span class="na">password</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with your database user's password</span>
    <span class="na">logging</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// this shows the SQL that's being run</span>
    <span class="na">synchronize</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// this automatically runs all the database migrations, so you don't have to :)</span>
    <span class="na">entities</span><span class="p">:</span> <span class="p">[],</span> <span class="c1">// we'll add our database entities here later.</span>
  <span class="p">});</span>

  <span class="kd">const</span> <span class="na">app</span><span class="p">:</span> <span class="nx">Express</span> <span class="o">=</span> <span class="nf">express</span><span class="p">();</span>

  <span class="kd">const</span> <span class="nx">PORT</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">8000</span><span class="p">;</span>
  <span class="nx">app</span><span class="p">.</span><span class="nf">listen</span><span class="p">(</span><span class="nx">PORT</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`server started on port </span><span class="p">${</span><span class="nx">PORT</span><span class="p">}</span><span class="s2">`</span><span class="p">));</span>
<span class="p">};</span>

<span class="nf">main</span><span class="p">().</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
</code></pre></div></div> <p data-beyondwords-marker="34d59ea6-4d74-412e-a1a8-772655a91494">Let’s also create a test route to see that everything’s working properly:</p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Connection</span><span class="p">,</span> <span class="nx">createConnection</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typeorm</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">express</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Express</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Task</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./entities/Task</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">main</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="na">conn</span><span class="p">:</span> <span class="nx">Connection</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">createConnection</span><span class="p">({</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with the DB of your choice</span>
    <span class="na">database</span><span class="p">:</span> <span class="dl">"</span><span class="s2">graphql-crud</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with the name of your DB</span>
    <span class="na">username</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with your database user's username</span>
    <span class="na">password</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with your database user's password</span>
    <span class="na">logging</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// this shows the SQL that's being run</span>
    <span class="na">synchronize</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// this automatically runs all the database migrations, so you don't have to :)</span>
    <span class="na">entities</span><span class="p">:</span> <span class="p">[</span><span class="nx">Task</span><span class="p">],</span> <span class="c1">// we'll add our database entities here later.</span>
  <span class="p">});</span>

  <span class="kd">const</span> <span class="na">app</span><span class="p">:</span> <span class="nx">Express</span> <span class="o">=</span> <span class="nf">express</span><span class="p">();</span>

  <span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">_req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="dl">"</span><span class="s2">you have not screwed up!</span><span class="dl">"</span><span class="p">));</span>

  <span class="kd">const</span> <span class="nx">PORT</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">8000</span><span class="p">;</span>
  <span class="nx">app</span><span class="p">.</span><span class="nf">listen</span><span class="p">(</span><span class="nx">PORT</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`server started on port </span><span class="p">${</span><span class="nx">PORT</span><span class="p">}</span><span class="s2">`</span><span class="p">));</span>
<span class="p">};</span>

<span class="nf">main</span><span class="p">().</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
</code></pre></div></div> <p data-beyondwords-marker="a77c4dba-8376-443c-848d-aba12b22313f"><strong>Note:</strong> I am using an <code class="language-plaintext highlighter-rouge">_</code> in front of <code class="language-plaintext highlighter-rouge">req</code> because I won’t be using that variable and if you don’t use a variable you can prefix it with an underscore.</p> <p data-beyondwords-marker="b979724a-89ad-4142-a73c-71e7f121fc22">Now let’s open up our browser and go to <code class="language-plaintext highlighter-rouge">[localhost:8000/](http://localhost:8000/)</code> and you should see something like this:</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://i.imgur.com/pKpSU2B.png" alt="Untitled" loading="lazy"></p> <p data-beyondwords-marker="6519200e-1f35-4252-adcf-2e1680f70fbe">To add Apollo Server as a middleware for Express, we can add the following code:</p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Connection</span><span class="p">,</span> <span class="nx">createConnection</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typeorm</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">express</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Express</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ApolloServer</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">apollo-server-express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">buildSchema</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">type-graphql</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">main</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="na">conn</span><span class="p">:</span> <span class="nx">Connection</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">createConnection</span><span class="p">({</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with the DB of your choice</span>
    <span class="na">database</span><span class="p">:</span> <span class="dl">"</span><span class="s2">graphql-crud</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with the name of your DB</span>
    <span class="na">username</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with your database user's username</span>
    <span class="na">password</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with your database user's password</span>
    <span class="na">logging</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// this shows the SQL that's being run</span>
    <span class="na">synchronize</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// this automatically runs all the database migrations, so you don't have to :)</span>
    <span class="na">entities</span><span class="p">:</span> <span class="p">[],</span> <span class="c1">// we'll add our database entities here later.</span>
  <span class="p">});</span>

  <span class="kd">const</span> <span class="nx">apolloServer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ApolloServer</span><span class="p">({</span>
    <span class="na">schema</span><span class="p">:</span> <span class="k">await</span> <span class="nf">buildSchema</span><span class="p">({</span>
      <span class="na">resolvers</span><span class="p">:</span> <span class="p">[],</span>
      <span class="na">validate</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="p">}),</span>
  <span class="p">});</span>

  <span class="k">await</span> <span class="nx">apolloServer</span><span class="p">.</span><span class="nf">start</span><span class="p">();</span>
  <span class="kd">const</span> <span class="na">app</span><span class="p">:</span> <span class="nx">Express</span> <span class="o">=</span> <span class="nf">express</span><span class="p">();</span>

  <span class="nx">apolloServer</span><span class="p">.</span><span class="nf">applyMiddleware</span><span class="p">({</span> <span class="nx">app</span> <span class="p">});</span>

  <span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">_req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="dl">"</span><span class="s2">you have not screwed up!</span><span class="dl">"</span><span class="p">));</span>

  <span class="kd">const</span> <span class="nx">PORT</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">8000</span><span class="p">;</span>
  <span class="nx">app</span><span class="p">.</span><span class="nf">listen</span><span class="p">(</span><span class="nx">PORT</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`server started on port </span><span class="p">${</span><span class="nx">PORT</span><span class="p">}</span><span class="s2">`</span><span class="p">));</span>
<span class="p">};</span>

<span class="nf">main</span><span class="p">().</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
</code></pre></div></div> <p data-beyondwords-marker="50f571bb-a239-4f19-977b-81bdbcd32248">Now you’ll get TypeScript yelling at you because the <code class="language-plaintext highlighter-rouge">resolvers</code> array is empty but bear with me for a sec.</p> <p data-beyondwords-marker="3a7b31a5-d0d4-4b35-b14a-057898a44ff3">Here what we’re basically doing is, creating an instance of <code class="language-plaintext highlighter-rouge">ApolloServer</code> and passing our GraphQL schema as the <code class="language-plaintext highlighter-rouge">buildSchema</code> function from <code class="language-plaintext highlighter-rouge">type-graphql</code>.</p> <p data-beyondwords-marker="df7e637e-01a2-4cdb-92a0-756e2f2db070">So what TypeGraphQL does is it converts our GraphQL resolvers (TypeScript classes) which are present in the <code class="language-plaintext highlighter-rouge">resolvers</code> arrays into SDL or GraphQL Schema Definition Language, and passes this SDL as our final GraphQL schema to Apollo Server.</p> <p data-beyondwords-marker="b6293594-bc5f-45b6-bad5-3cda6c4f9b03">Lets also quickly create a simple GraphQL Resolver:</p> <p data-beyondwords-marker="ecac1127-96c9-4b52-a654-d9390acec696">For those of you who don’t know what a Resolver is:</p> <blockquote> <p data-beyondwords-marker="02e53d8d-e7b3-4007-a49e-4e68d8406d05">Resolver is <strong>a collection of functions that generate response for a GraphQL query</strong>. In simple terms, a resolver acts as a GraphQL query handler.</p> <p data-beyondwords-marker="0e140c4e-5d75-4061-b0fb-2ce22fa03166">~ tutorialspoint.com</p> </blockquote> <p data-beyondwords-marker="74ab3d97-f72c-4955-a36a-fca6c32a8c72"><code class="language-plaintext highlighter-rouge">src/resolvers/task.ts</code></p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Query</span><span class="p">,</span> <span class="nx">Resolver</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">type-graphql</span><span class="dl">"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Resolver</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">TaskResolver</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Query</span><span class="p">()</span>
  <span class="nf">hello</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="dl">"</span><span class="s2">hello</span><span class="dl">"</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p data-beyondwords-marker="0b975f85-0e22-4055-89b0-ff1ec061421b">That’s all there is to it!</p> <p data-beyondwords-marker="322ae007-ee01-454f-bb46-3cbe9c08fddf">Of course, now we should add this resolver in our <code class="language-plaintext highlighter-rouge">resolvers</code> array:</p> <p data-beyondwords-marker="7b3953e4-90e6-4d1a-bda5-31be11912d10"><code class="language-plaintext highlighter-rouge">src/index.ts</code></p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Connection</span><span class="p">,</span> <span class="nx">createConnection</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typeorm</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">express</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Express</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ApolloServer</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">apollo-server-express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">buildSchema</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">type-graphql</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Task</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./entities/Task</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">TaskResolver</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./resolvers/task</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">main</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="na">conn</span><span class="p">:</span> <span class="nx">Connection</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">createConnection</span><span class="p">({</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with the DB of your choice</span>
    <span class="na">database</span><span class="p">:</span> <span class="dl">"</span><span class="s2">graphql-crud</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with the name of your DB</span>
    <span class="na">username</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with your database user's username</span>
    <span class="na">password</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with your database user's password</span>
    <span class="na">logging</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// this shows the SQL that's being run</span>
    <span class="na">synchronize</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// this automatically runs all the database migrations, so you don't have to :)</span>
    <span class="na">entities</span><span class="p">:</span> <span class="p">[</span><span class="nx">Task</span><span class="p">],</span> <span class="c1">// we'll add our database entities here later.</span>
  <span class="p">});</span>

  <span class="kd">const</span> <span class="nx">apolloServer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ApolloServer</span><span class="p">({</span>
    <span class="na">schema</span><span class="p">:</span> <span class="k">await</span> <span class="nf">buildSchema</span><span class="p">({</span>
      <span class="na">resolvers</span><span class="p">:</span> <span class="p">[</span><span class="nx">TaskResolver</span><span class="p">],</span>
      <span class="na">validate</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="p">}),</span>
  <span class="p">});</span>

  <span class="k">await</span> <span class="nx">apolloServer</span><span class="p">.</span><span class="nf">start</span><span class="p">();</span>
  <span class="kd">const</span> <span class="na">app</span><span class="p">:</span> <span class="nx">Express</span> <span class="o">=</span> <span class="nf">express</span><span class="p">();</span>

  <span class="nx">apolloServer</span><span class="p">.</span><span class="nf">applyMiddleware</span><span class="p">({</span> <span class="nx">app</span> <span class="p">});</span>

  <span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">_req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="dl">"</span><span class="s2">you have not screwed up!</span><span class="dl">"</span><span class="p">));</span>

  <span class="kd">const</span> <span class="nx">PORT</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">8000</span><span class="p">;</span>
  <span class="nx">app</span><span class="p">.</span><span class="nf">listen</span><span class="p">(</span><span class="nx">PORT</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`server started on port </span><span class="p">${</span><span class="nx">PORT</span><span class="p">}</span><span class="s2">`</span><span class="p">));</span>
<span class="p">};</span>

<span class="nf">main</span><span class="p">().</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
</code></pre></div></div> <p data-beyondwords-marker="dc683150-3218-4461-9829-877f3a50442c">Cool! Now let’s look at our output in the terminal aaaandd…</p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">UnmetGraphQLPeerDependencyError</span><span class="p">:</span> <span class="nx">Looks</span> <span class="nx">like</span> <span class="nx">you</span> <span class="nx">use</span> <span class="nx">an</span> <span class="nx">incorrect</span> <span class="nx">version</span> <span class="k">of</span> <span class="nx">the</span> <span class="dl">'</span><span class="s1">graphql</span><span class="dl">'</span> <span class="kr">package</span><span class="p">:</span> <span class="dl">"</span><span class="s2">16.2.0</span><span class="dl">"</span><span class="p">.</span> <span class="nx">Please</span> <span class="nx">ensure</span> <span class="nx">that</span> <span class="nx">you</span> <span class="nx">have</span> <span class="nx">installed</span> <span class="nx">a</span> <span class="nx">version</span> <span class="nx">that</span> <span class="nx">meets</span> <span class="nx">TypeGraphQL</span><span class="dl">'</span><span class="s1">s requirement: "^15.3.0".
    at Object.ensureInstalledCorrectGraphQLPackage (/Users/dhruvasrinivas/Documents/graphql-crud/node_modules/type-graphql/dist/utils/graphql-version.js:20:15)
    at Function.checkForErrors (/Users/dhruvasrinivas/Documents/graphql-crud/node_modules/type-graphql/dist/schema/schema-generator.js:47:27)
    at Function.generateFromMetadataSync (/Users/dhruvasrinivas/Documents/graphql-crud/node_modules/type-graphql/dist/schema/schema-generator.js:26:14)
    at Function.generateFromMetadata (/Users/dhruvasrinivas/Documents/graphql-crud/node_modules/type-graphql/dist/schema/schema-generator.js:16:29)
    at buildSchema (/Users/dhruvasrinivas/Documents/graphql-crud/node_modules/type-graphql/dist/utils/buildSchema.js:10:61)
    at main (/Users/dhruvasrinivas/Documents/graphql-crud/dist/index.js:23:54)
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
</span></code></pre></div></div> <p data-beyondwords-marker="93b06ec9-795e-4084-a249-70b34df15c7b">UH OH! We have an error! But it’s pretty obvious what we have to do to fix it. We just have to use the specified version of the graphql package in our <code class="language-plaintext highlighter-rouge">package.json</code></p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"graphql-crud"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"main"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index.js"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"watch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tsc -w"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nodemon dist/index.js"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"keywords"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ISC"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"@types/node"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^17.0.10"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"apollo-server-express"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^3.6.2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"express"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^4.17.2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"graphql"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^15.3.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^8.7.1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type-graphql"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^1.1.1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"typeorm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^0.2.41"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"typescript"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^4.5.5"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"@types/express"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^4.17.13"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="6bef1c16-9b44-455a-ab34-bb90fd509af0">Now let’s reinstall all of our dependencies:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yarn
</code></pre></div></div> <p data-beyondwords-marker="28ad9800-28fa-44b1-88d4-8a3b62610356">Now if we run our code, we shouldn’t get any errors!</p> <p data-beyondwords-marker="c2e1293b-5118-40e3-8a8f-f4ccfb8369a5">Apollo Server serves our GraphQL at the <code class="language-plaintext highlighter-rouge">/graphql</code> endpoint.</p> <p data-beyondwords-marker="72031629-191d-423c-b585-c5358a36d71b">So let’s open it up in our browser.</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://i.imgur.com/uYKIjOp.png" alt="apollo propaganda page" loading="lazy"></p> <p data-beyondwords-marker="e73f1b52-2c50-4045-a308-0dd263b95844">And oof we’re greeted by Apollo Server’s propaganda page 💀</p> <p data-beyondwords-marker="8a890e55-d344-4f1f-8ebe-49246a5d2680">Fun fact: This is actually a new Apollo Server update, earlier it used to directly open up GraphQL Playground, an interactive environment to test our GraphQL queries.</p> <p data-beyondwords-marker="7038c6b8-16bf-48be-a5f7-6426885c55f9">No worries though, we can spin up GraphQL playground using this Apollo Server Plugin:</p> <p data-beyondwords-marker="93c000de-8ae2-4586-871e-1e757e6e2da6"><code class="language-plaintext highlighter-rouge">src/index.ts</code></p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Connection</span><span class="p">,</span> <span class="nx">createConnection</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typeorm</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">express</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Express</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ApolloServer</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">apollo-server-express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">buildSchema</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">type-graphql</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Task</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./entities/Task</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">TaskResolver</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./resolvers/task</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ApolloServerPluginLandingPageGraphQLPlayground</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">apollo-server-core</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">main</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="na">conn</span><span class="p">:</span> <span class="nx">Connection</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">createConnection</span><span class="p">({</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with the DB of your choice</span>
    <span class="na">database</span><span class="p">:</span> <span class="dl">"</span><span class="s2">graphql-crud</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with the name of your DB</span>
    <span class="na">username</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with your database user's username</span>
    <span class="na">password</span><span class="p">:</span> <span class="dl">"</span><span class="s2">postgres</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// replace with your database user's password</span>
    <span class="na">logging</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// this shows the SQL that's being run</span>
    <span class="na">synchronize</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// this automatically runs all the database migrations, so you don't have to :)</span>
    <span class="na">entities</span><span class="p">:</span> <span class="p">[</span><span class="nx">Task</span><span class="p">],</span> <span class="c1">// we'll add our database entities here later.</span>
  <span class="p">});</span>

  <span class="kd">const</span> <span class="nx">apolloServer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ApolloServer</span><span class="p">({</span>
    <span class="na">schema</span><span class="p">:</span> <span class="k">await</span> <span class="nf">buildSchema</span><span class="p">({</span>
      <span class="na">resolvers</span><span class="p">:</span> <span class="p">[</span><span class="nx">TaskResolver</span><span class="p">],</span>
      <span class="na">validate</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="p">}),</span>
    <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span><span class="nc">ApolloServerPluginLandingPageGraphQLPlayground</span><span class="p">()],</span>
  <span class="p">});</span>

  <span class="k">await</span> <span class="nx">apolloServer</span><span class="p">.</span><span class="nf">start</span><span class="p">();</span>
  <span class="kd">const</span> <span class="na">app</span><span class="p">:</span> <span class="nx">Express</span> <span class="o">=</span> <span class="nf">express</span><span class="p">();</span>

  <span class="nx">apolloServer</span><span class="p">.</span><span class="nf">applyMiddleware</span><span class="p">({</span> <span class="nx">app</span> <span class="p">});</span>

  <span class="nx">app</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">_req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="dl">"</span><span class="s2">you have not screwed up!</span><span class="dl">"</span><span class="p">));</span>

  <span class="kd">const</span> <span class="nx">PORT</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">8000</span><span class="p">;</span>
  <span class="nx">app</span><span class="p">.</span><span class="nf">listen</span><span class="p">(</span><span class="nx">PORT</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`server started on port </span><span class="p">${</span><span class="nx">PORT</span><span class="p">}</span><span class="s2">`</span><span class="p">));</span>
<span class="p">};</span>

<span class="nf">main</span><span class="p">().</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
</code></pre></div></div> <p data-beyondwords-marker="812056fa-a8f3-46ad-b876-35876159aa86">Now, if you refresh you can find something like this:</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://i.imgur.com/eKHWisM.png" alt="Untitled" loading="lazy"></p> <p data-beyondwords-marker="3a2197cd-cdbf-41aa-a08a-b38109571c56">Now let’s run our <code class="language-plaintext highlighter-rouge">hello</code> query:</p> <div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="n">hello</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="9e6248ab-43d2-4798-ab3d-455f5024b73c">And you’ll see our output:</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://i.imgur.com/fRSycbD.png" alt="Untitled" loading="lazy"></p> <p data-beyondwords-marker="ce52d0fd-ae67-4e34-839c-7e9e05515ddf">Awesome!!</p> <h1 id="building-crud-functionality" data-beyondwords-marker="4f1e42ff-dc86-4141-a70c-eba27ba130a6">Building CRUD functionality</h1> <p data-beyondwords-marker="e1f9e332-9ae3-4abe-9b87-246266ecf263">Now, let’s get to the main part, which is building out our CRUD functionality. Let’s start with the easiest, which is to fetch all the posts:</p> <p data-beyondwords-marker="9a7ddd0e-1180-444b-8d80-1fba392b49d1">BUT WAIT A MINUTE!</p> <p data-beyondwords-marker="730e82f5-b527-4be9-b132-f3989b111932">Remember that <code class="language-plaintext highlighter-rouge">Task</code> entity we made? Like a hundred years back? Yep, that one.</p> <p data-beyondwords-marker="4bae7654-749d-4b9a-a104-170d10718cdd">That is a database <strong>Entity</strong>, but when we get all tasks we have to return a <code class="language-plaintext highlighter-rouge">Task</code> and we can’t return an <strong>Entity</strong> cause that’s dumb. So what we’re gonna have to do is, to make <code class="language-plaintext highlighter-rouge">Task</code> a GraphQL type.</p> <p data-beyondwords-marker="9306101b-8200-4065-b097-d3a0fd20921e">Before you start complaining, remember that I told you that TypeGraphQL can integrate with TypeORM well? Let’s see that in action!</p> <p data-beyondwords-marker="c8f06485-3b4c-46ba-9d91-c7c677f9bc86"><code class="language-plaintext highlighter-rouge">src/entities/Task.ts</code></p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Field</span><span class="p">,</span> <span class="nx">Int</span><span class="p">,</span> <span class="nx">ObjectType</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">type-graphql</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
  <span class="nx">BaseEntity</span><span class="p">,</span>
  <span class="nx">Column</span><span class="p">,</span>
  <span class="nx">CreateDateColumn</span><span class="p">,</span>
  <span class="nx">Entity</span><span class="p">,</span>
  <span class="nx">PrimaryGeneratedColumn</span><span class="p">,</span>
  <span class="nx">UpdateDateColumn</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typeorm</span><span class="dl">"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Entity</span><span class="p">()</span>
<span class="p">@</span><span class="nd">ObjectType</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">Task</span> <span class="kd">extends</span> <span class="nc">BaseEntity</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">PrimaryGeneratedColumn</span><span class="p">()</span>
  <span class="p">@</span><span class="nd">Field</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">Int</span><span class="p">)</span>
  <span class="nx">id</span><span class="o">!</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">CreateDateColumn</span><span class="p">()</span>
  <span class="p">@</span><span class="nd">Field</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nb">String</span><span class="p">)</span>
  <span class="nx">created</span><span class="p">:</span> <span class="nb">Date</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">UpdateDateColumn</span><span class="p">()</span>
  <span class="p">@</span><span class="nd">Field</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nb">String</span><span class="p">)</span>
  <span class="nx">updated</span><span class="p">:</span> <span class="nb">Date</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">Column</span><span class="p">()</span>
  <span class="p">@</span><span class="nd">Field</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nb">String</span><span class="p">,</span> <span class="p">{</span> <span class="na">nullable</span><span class="p">:</span> <span class="kc">false</span> <span class="p">})</span>
  <span class="nx">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">Column</span><span class="p">()</span>
  <span class="p">@</span><span class="nd">Field</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nb">String</span><span class="p">,</span> <span class="p">{</span> <span class="na">nullable</span><span class="p">:</span> <span class="kc">false</span> <span class="p">})</span>
  <span class="nx">description</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p data-beyondwords-marker="a257159f-2717-4aa4-a3f9-2e900351bc55">Get a load of that ✨ decorator magic ✨</p> <p data-beyondwords-marker="a43b62d1-8bae-4ee7-bdeb-c51db9834b70">What we’re essentially doing here is:</p> <ul> <li data-beyondwords-marker="2624966c-5c8b-4fd9-b2de-452c070b47e8">Specifying that this <code class="language-plaintext highlighter-rouge">Task</code> class is <strong>also a GraphQL type!</strong> </li> <li data-beyondwords-marker="cf899ade-c84a-4da5-b648-0a5a6ef1cb05">We are then decorating each column with the <code class="language-plaintext highlighter-rouge">Field</code> decorator, saying that each of these columns are also Fields of the <code class="language-plaintext highlighter-rouge">Task</code> type.</li> <li data-beyondwords-marker="c684bf7e-988f-428a-af52-c9f27442f2a0">We are also explicitly stating the GraphQL type of each <code class="language-plaintext highlighter-rouge">Field</code> , which are all coming from <code class="language-plaintext highlighter-rouge">type-graphql</code> </li> <li data-beyondwords-marker="0ef20c3a-3300-4720-901e-dc3dd3af8307">We are also specifying that the title and description field <strong>has to have a value and can never be declared as null.</strong> </li> </ul> <p data-beyondwords-marker="ae8e7a90-db0f-4a08-918b-b6983a2d72a8">The cool thing about defining your entity and GraphQL type like this is that you may have a column in your database like a password which <strong>you don’t want to expose</strong> in a response and you can just not decorate it with a <code class="language-plaintext highlighter-rouge">Field</code> to do this!</p> <h2 id="getting-all-tasks" data-beyondwords-marker="53619f8d-16d2-43ea-9bc3-60021e9a8658">Getting all tasks</h2> <p data-beyondwords-marker="3c6fa318-ac14-4d3e-b6a7-c1dad776653c">Now, let’s fetch all of our Tasks:</p> <p data-beyondwords-marker="08f7b7cf-bb0c-4f0e-9916-4a650128c984"><code class="language-plaintext highlighter-rouge">src/resolvers/task.ts</code></p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Query</span><span class="p">,</span> <span class="nx">Resolver</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">type-graphql</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Task</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../entities/Task</span><span class="dl">"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Resolver</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">TaskResolver</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Query</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="nx">Task</span><span class="p">])</span>
  <span class="k">async</span> <span class="nf">tasks</span><span class="p">():</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Task</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Task</span><span class="p">.</span><span class="nf">find</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p data-beyondwords-marker="ded4f7f5-e389-482e-a097-8578cec35386">Here you can see that we’re specifying the GraphQL return type as an array of <code class="language-plaintext highlighter-rouge">Task</code>s since we also made it a GraphQL type.</p> <p data-beyondwords-marker="063d2450-a44c-4ad4-b50d-691534ecb506">One fault you may find with this approach is that we’re defining the return types <strong>twice:</strong> once for the GraphQL return type, and once for the function’s return type. But that’s just how we do things in the TypeGraphQL world 😅</p> <p data-beyondwords-marker="b3c39f4a-64b9-4824-a0c8-b3ae8e29d497">Ok cool, let’s now run our query:</p> <div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="n">tasks</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">created</span><span class="w">
    </span><span class="n">updated</span><span class="w">
    </span><span class="n">title</span><span class="w">
    </span><span class="n">description</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="b622935b-65cf-4c70-a07b-840c0f365eb6">And we will get a response like this:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="4c03891a-e129-403c-a6e1-d71ff96cc0d2">The array is empty because we haven’t created any tasks yet.</p> <h2 id="creating-a-task" data-beyondwords-marker="1895da6d-9b40-45fd-8d21-03813679ac57">Creating a task</h2> <p data-beyondwords-marker="38eb0a55-7025-4c8f-acd7-c8ccd8bc5ba6">Now I’d like to ask you a question, if we use a <code class="language-plaintext highlighter-rouge">Query</code> to fetch data, will we be able to use the same <code class="language-plaintext highlighter-rouge">Query</code> to change (create, update, delete) data? No, we can’t. We will use something called a <strong><code class="language-plaintext highlighter-rouge">Mutation</code></strong> to achieve our task.</p> <p data-beyondwords-marker="927387d7-2dd3-4562-bf05-e31329eb1a42">One more thing you might be thinking is how exactly do we take inputs because when we create a task, we’ll need to provide the title and description of the task, right? Guess what, TypeGraphQL has a decorator for it!</p> <p data-beyondwords-marker="7566a05f-d5b1-4eee-b4a6-8853f88e0cb6">Let’s see all of this in action. We’ll define a new function in our task resolver.</p> <p data-beyondwords-marker="448d7112-cfd6-4f8f-86d7-3c1d14ec30c8"><code class="language-plaintext highlighter-rouge">src/resolvers/task.ts</code></p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Arg</span><span class="p">,</span> <span class="nx">Mutation</span><span class="p">,</span> <span class="nx">Query</span><span class="p">,</span> <span class="nx">Resolver</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">type-graphql</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Task</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../entities/Task</span><span class="dl">"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Resolver</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">TaskResolver</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Query</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="nx">Task</span><span class="p">])</span>
  <span class="k">async</span> <span class="nf">tasks</span><span class="p">():</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Task</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Task</span><span class="p">.</span><span class="nf">find</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="p">@</span><span class="nd">Mutation</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">Task</span><span class="p">)</span>
  <span class="nf">createTask</span><span class="p">(</span>
    <span class="p">@</span><span class="nd">Arg</span><span class="p">(</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nb">String</span><span class="p">)</span> <span class="nx">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
    <span class="p">@</span><span class="nd">Arg</span><span class="p">(</span><span class="dl">"</span><span class="s2">description</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nb">String</span><span class="p">)</span> <span class="nx">description</span><span class="p">:</span> <span class="kr">string</span>
  <span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Task</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Task</span><span class="p">.</span><span class="nf">create</span><span class="p">({</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">description</span> <span class="p">}).</span><span class="nf">save</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p data-beyondwords-marker="968bbea8-2b42-4b11-8c3a-dcc882ffb430">I’ll walk you through this new function line by line since it’s a bit confusing at first.</p> <ul> <li data-beyondwords-marker="fa367a91-b90a-4957-bb20-fe6c7235db52">We are first declaring this <code class="language-plaintext highlighter-rouge">createTask</code> as a GraphQL mutation, which returns the GraphQL <code class="language-plaintext highlighter-rouge">Task</code> type which we created. We are returning a <code class="language-plaintext highlighter-rouge">Task</code> because after the task is saved to the database we want to show that it has successfully added it.</li> <li data-beyondwords-marker="e40cfb23-1bc3-4f8d-8790-a3ec9ec81837">Then we have 2 variables, <code class="language-plaintext highlighter-rouge">title</code> and <code class="language-plaintext highlighter-rouge">string</code> decorated with <code class="language-plaintext highlighter-rouge">Arg</code>. This <code class="language-plaintext highlighter-rouge">Arg</code> specifies that these two variables will be passed as arguments when we are running this mutation (which we will do in a sec). The GraphQL type is given as <code class="language-plaintext highlighter-rouge">String</code> but this is optional because in most cases TypeGraphQL can <strong>infer</strong> the GraphQL type after looking at the variable’s TypeScript type.</li> <li data-beyondwords-marker="dbe94e5c-67c3-4dc4-a333-88c2a2b7741d">Then we’re creating a Task using <code class="language-plaintext highlighter-rouge">Task.create</code> and passing the title and description variables to it and then we’re calling <code class="language-plaintext highlighter-rouge">.save</code>.</li> </ul> <p data-beyondwords-marker="6314da78-c13f-4f9c-b38e-60bc47d50886">But why are we doing both <code class="language-plaintext highlighter-rouge">.create</code> and <code class="language-plaintext highlighter-rouge">.save</code>?</p> <p data-beyondwords-marker="e41c513f-b312-441e-8ae7-e34eee95a923">What <code class="language-plaintext highlighter-rouge">.create</code> essentially does is, that it <strong>creates an instance of the <code class="language-plaintext highlighter-rouge">Task</code> class!</strong></p> <p data-beyondwords-marker="f72b4179-9858-4da0-85da-6c9bc5d62b57">Something like this:</p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">task</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Task</span><span class="p">(....)</span> 
</code></pre></div></div> <p data-beyondwords-marker="20dbbdd2-8253-49c0-99d5-b2b32c21d1f4">And <code class="language-plaintext highlighter-rouge">.save</code> actually saves this new instance to our Postgres database.</p> <p data-beyondwords-marker="6e158fe1-1263-4ebe-9851-600a6a8be463">You might also be wondering why we’re specifying the name of the variable both as an argument for <code class="language-plaintext highlighter-rouge">@Arg</code> and for the TypeScript variable. What we’re specifying as the string is actually the name we’re going to use to provide GraphQL with the argument. For example:</p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Arg</span><span class="p">(</span><span class="dl">"</span><span class="s2">myrandomarg</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nb">String</span><span class="p">)</span> <span class="nx">arg</span><span class="p">:</span> <span class="kr">string</span>
</code></pre></div></div> <p data-beyondwords-marker="94927e80-1ee6-4df6-9bb5-5dd7de043799">To run this mutation we would do it like this:</p> <div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">mutation</span><span class="w"> </span><span class="p">{</span><span class="w">
	</span><span class="n">myQuery</span><span class="p">(</span><span class="n">myrandomarg</span><span class="p">:</span><span class="w"> </span><span class="s2">"val"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
		</span><span class="p">...</span><span class="w">
	</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="a1c3bcce-2798-4b56-96d6-33b1962842fe">Since we got all of that cleared, let’s run our mutation!</p> <div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">mutation</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">createTask</span><span class="p">(</span><span class="w">
    </span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="s2">"my first post!"</span><span class="p">,</span><span class="w">
    </span><span class="n">description</span><span class="p">:</span><span class="w"> </span><span class="s2">"this is my first post"</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">created</span><span class="w">
    </span><span class="n">updated</span><span class="w">
    </span><span class="n">title</span><span class="w">
    </span><span class="n">description</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w"> 
</span></code></pre></div></div> <p data-beyondwords-marker="ff14830d-62a6-4c69-bbc2-5d831d5c51f2">And we get our response back!</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"createTask"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1643090973749"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1643090973749"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my first post!"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"this is my first post"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="b16cb147-a95a-4cdd-919b-b66bbf0593ae">Awesome!</p> <p data-beyondwords-marker="0ed009be-ee38-4b98-b723-a4458d355f28">Another thing we can do now is since we have created a post, we can try fetching all of our posts again.</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1643090973749"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1643090973749"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my first post!"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"this is my first post"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="4ca00da2-26df-40c2-bc35-75c1ed98dc8f">And it’s all working yay 🎉</p> <h2 id="getting-a-single-post-by-id" data-beyondwords-marker="7ff921be-370d-4370-9d07-2c9195605635">Getting a single post by ID</h2> <p data-beyondwords-marker="d15144c8-14eb-4931-a74b-4a1ffdb19ee4">This should be pretty straight-forward since we already know how to include an argument.</p> <p data-beyondwords-marker="b050cb17-e1d9-4c06-991a-f2399ecc48e6"><code class="language-plaintext highlighter-rouge">src/resolvers/task.ts</code></p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Query</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">Task</span><span class="p">,</span> <span class="p">{</span> <span class="na">nullable</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
<span class="k">async</span> <span class="nf">task</span><span class="p">(@</span><span class="nd">Arg</span><span class="p">(</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">Int</span><span class="p">)</span> <span class="nx">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Task</span> <span class="o">|</span> <span class="kc">undefined</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">Task</span><span class="p">.</span><span class="nf">findOne</span><span class="p">({</span> <span class="nx">id</span> <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div> <p data-beyondwords-marker="caa673f3-3b2b-415a-8941-ce992f203b47">Here we’re saying that this <code class="language-plaintext highlighter-rouge">Query</code> returns a single <code class="language-plaintext highlighter-rouge">Task</code> and it can return a <code class="language-plaintext highlighter-rouge">null</code> if a post with this ID is not found.</p> <p data-beyondwords-marker="ecb05852-b960-4e10-bf44-8920abdbdbf1"><strong>Note:</strong> <code class="language-plaintext highlighter-rouge">Int</code> comes from <code class="language-plaintext highlighter-rouge">type-graphql</code></p> <p data-beyondwords-marker="591c50ef-8f60-46fd-98fd-c9ea9bfda95b">Also the TypeScript return type is:</p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Task</span> <span class="o">|</span> <span class="kc">undefined</span><span class="o">&gt;</span>
</code></pre></div></div> <p data-beyondwords-marker="7b124be7-a330-4ae4-a538-d5cfdf9dd201">This basically says that this function can either return a Promise of a Task if a post with such and such ID is found, but otherwise it will return an <code class="language-plaintext highlighter-rouge">undefined</code>.</p> <p data-beyondwords-marker="a98ba32b-1ec7-449c-b66f-630c6e7cbe2c">And we’re using <code class="language-plaintext highlighter-rouge">Task.findOne()</code> to get a single task and providing the ID as the search query.</p> <p data-beyondwords-marker="af6be16a-629b-46eb-bddf-7d5b7465ab9b">So, if we run this query using:</p> <div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="n">task</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">title</span><span class="w">
    </span><span class="n">description</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="772299c5-efa2-4ea7-af99-4034534bfd57">We’ll get this response:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"task"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my first post!"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"this is my first post"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="be41afe8-d878-4de9-b87a-31483636b123">And if we provide an ID that doesn’t exist, we’ll get a null as the response:</p> <div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="n">task</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="mi">1717</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">title</span><span class="w">
    </span><span class="n">description</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"task"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my first post!"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"this is my first post"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h2 id="deleting-a-post" data-beyondwords-marker="a5f0f761-b1a9-46e6-838e-6702d5b88374">Deleting a post</h2> <p data-beyondwords-marker="9955fa72-a539-4296-aa62-1a6cd95e77e1">Deleting a post is quite similar to the function we created for getting a single post.</p> <p data-beyondwords-marker="9c52cb84-c597-42ac-98c7-4bbd3abf018d"><code class="language-plaintext highlighter-rouge">src/resolvers/task.ts</code></p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Mutation</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nb">Boolean</span><span class="p">)</span>
<span class="k">async</span> <span class="nf">deleteTask</span><span class="p">(@</span><span class="nd">Arg</span><span class="p">(</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">Int</span><span class="p">)</span> <span class="nx">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">boolean</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">if </span><span class="p">(</span><span class="k">await</span> <span class="nx">Task</span><span class="p">.</span><span class="nf">findOne</span><span class="p">({</span> <span class="nx">id</span> <span class="p">}))</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">Task</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p data-beyondwords-marker="2477a79a-35a9-46f5-87aa-94e42573e337">Here we are returning the <code class="language-plaintext highlighter-rouge">Boolean</code> GraphQL type. We first check if a post with the ID provided exists, then we delete it and return <code class="language-plaintext highlighter-rouge">true</code>, but if it doesn’t, we return <code class="language-plaintext highlighter-rouge">false</code>.</p> <p data-beyondwords-marker="f216058c-47c9-4944-a94b-d083d7582332">Let’s run this mutation:</p> <div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">mutation</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">deleteTask</span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="9aca0d42-10f3-4319-b4c0-0d2c59c604e9"><strong>Note:</strong> First, create another Task and then run this mutation.</p> <p data-beyondwords-marker="78f6999b-8803-4862-8012-35195e9c0394">And you will get this response!</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"deleteTask"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="f2bc31f6-5bd8-4f47-941c-f00f9e54c46a">Now, finally we’re gonna create one final function to update our Task.</p> <h2 id="updating-a-task" data-beyondwords-marker="ecb0f282-8c75-4df6-a60e-cb64522876f5">Updating a Task</h2> <p data-beyondwords-marker="bf64f84c-82cf-4ed5-9866-def8857c7121">To update a task, we’ll need to get:</p> <ul> <li data-beyondwords-marker="952919c3-0993-4c7b-94bc-7ee39a2f13d1">the ID of the task</li> <li data-beyondwords-marker="2b0d4f5f-1fa7-44f8-adb7-bb979585e3a6">the new title</li> <li data-beyondwords-marker="174b80d6-d4b0-43da-a444-0f50de29f2e9">the new description</li> </ul> <p data-beyondwords-marker="ec5df914-9b8f-4222-9f16-149cf9604c18">And then we’ll need to check if a post with the mentioned ID exists, if it doesn’t we will return <code class="language-plaintext highlighter-rouge">null</code></p> <p data-beyondwords-marker="e9a71489-b79f-4fb3-aa37-1de75c31d4f5">Then we will check if a title or a description if provided and if it is, we will update the Task using <code class="language-plaintext highlighter-rouge">Task.update</code></p> <p data-beyondwords-marker="7b3f8e28-87b7-4bbd-99f7-8d49cc3100a4"><code class="language-plaintext highlighter-rouge">src/resolvers/task.ts</code></p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Mutation</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">Task</span><span class="p">,</span> <span class="p">{</span> <span class="na">nullable</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
<span class="k">async</span> <span class="nf">updateTask</span><span class="p">(</span>
  <span class="p">@</span><span class="nd">Arg</span><span class="p">(</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nb">String</span><span class="p">,</span> <span class="p">{</span> <span class="na">nullable</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span> <span class="nx">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
  <span class="p">@</span><span class="nd">Arg</span><span class="p">(</span><span class="dl">"</span><span class="s2">description</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nb">String</span><span class="p">,</span> <span class="p">{</span> <span class="na">nullable</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span> <span class="nx">description</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
  <span class="p">@</span><span class="nd">Arg</span><span class="p">(</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">Int</span><span class="p">)</span> <span class="nx">id</span><span class="p">:</span> <span class="kr">number</span>
<span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Task</span> <span class="o">|</span> <span class="kc">null</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">task</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Task</span><span class="p">.</span><span class="nf">findOne</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
  <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">task</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if </span><span class="p">(</span><span class="k">typeof</span> <span class="nx">title</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">Task</span><span class="p">.</span><span class="nf">update</span><span class="p">({</span> <span class="nx">id</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">title</span> <span class="p">});</span>
  <span class="p">}</span>

  <span class="k">if </span><span class="p">(</span><span class="k">typeof</span> <span class="nx">description</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">Task</span><span class="p">.</span><span class="nf">update</span><span class="p">({</span> <span class="nx">id</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">description</span> <span class="p">});</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">task</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p data-beyondwords-marker="fc80f477-c453-4bf0-a3b6-ee26f11472c5">All this is familiar code, it’s just that the complexity of our operation is a bit higher. Let’s now test this mutation:</p> <div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">mutation</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">updateTask</span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="s2">"first post by me!"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">title</span><span class="w">
    </span><span class="n">description</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="3f7ddbb8-e318-46fc-98d2-0d5e4d803814">And we’ll get our response:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"updateTask"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my first post!"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"this is my first post"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="a65eb2bf-c6a3-4eea-b47d-cf1c78903482">If we run the get task by ID query we can see our updated Task:</p> <div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="n">task</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">id</span><span class="w">
    </span><span class="n">title</span><span class="w">
    </span><span class="n">description</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="191b4e14-a7cc-4f42-8f18-432ff68ef983">Response:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"task"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first post by me!"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"this is my first post"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p data-beyondwords-marker="96b8c74b-2b4d-41b5-bd66-f5de62b97c13">And that’s it!! We’re done with our CRUD!! 🚀🚀</p> <h1 id="challenge" data-beyondwords-marker="968c7fab-96c2-4f1f-a94c-404c44c061db">Challenge</h1> <p data-beyondwords-marker="da7d037b-ed31-4362-85d1-d76505962560">As promised, you can try implementing the features listed below to improve your understanding of the concept 💪</p> <ul> <li data-beyondwords-marker="e8eac8ee-c019-4a59-9398-935b92be57ca">Make an <code class="language-plaintext highlighter-rouge">isComplete</code> boolean field in the <code class="language-plaintext highlighter-rouge">Task</code> entity</li> <li data-beyondwords-marker="feac664e-2b0e-405a-bca7-cf9c9e9cbe02">Make a <code class="language-plaintext highlighter-rouge">markComplete</code> mutation to change the value of <code class="language-plaintext highlighter-rouge">isComplete</code> of a Task</li> <li data-beyondwords-marker="265da1d1-1965-4713-b340-2df764a1fc2d">You can also make a simple <code class="language-plaintext highlighter-rouge">filter</code> query to search for tasks based on the <code class="language-plaintext highlighter-rouge">title</code> arg given by the user.</li> </ul> <p data-beyondwords-marker="19eba8c0-1c5d-49e5-92ae-cb706ea1a57f">If you need help implementing any of these, leave a comment and I’ll answer your query!</p> <p data-beyondwords-marker="74835f26-14d2-4725-bcff-04de91dbc41e">You can find the source code <a href="https://github.com/carrotfarmer/graphql-crud" rel="nofollow noopener noreferrer" target="_blank">here</a>.</p> <p data-beyondwords-marker="840e6ca5-6450-4f23-9d8a-bdbb78fa159c">And that’s it for this post, see ya in the next one!</p> </article> <hr> <div class="px-6 pb-6 md:px-8 md:pb-8 flex flex-col items-center rounded-bl-2xl rounded-br-2xl"> <p class="text-center mb-4"> Join discussions at <a href="https://discord.genicsblog.com" target="_blank" class="cta-link"> our discord server &gt; </a> <br> Did you learn something new? Add a comment below and spread the word! </p> <div class="grid grid-flow-col gap-6"> <a class="social-link underline-none" rel="nofollow noopener noreferrer" href="https://facebook.com/sharer.php?u=https://genicsblog.com/dhruva/intro-to-graphql-with-node-and-typescript" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/facebook.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a class="social-link underline-none" rel="nofollow noopener noreferrer" href="https://api.whatsapp.com/send?text=Checkout%20this%20amazing%20article%20at%20Genics%20Blog%20'Intro%20to%20GraphQL%20with%20Node.js%20and%20TypeScript':%20https://genicsblog.com/dhruva/intro-to-graphql-with-node-and-typescript" onclick="window.open(this.href, 'whatsapp-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/whatsapp.svg" class="social-image w-10 h-10" loading="lazy"> </a> <a class="social-link underline-none" rel="nofollow noopener noreferrer" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://genicsblog.com/dhruva/intro-to-graphql-with-node-and-typescript" onclick="window.open(this.href, 'linkedin-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/linkedin.svg" class="social-image w-7 h-7" loading="lazy"> </a> <a class="social-link underline-none" rel="nofollow noopener noreferrer" href="https://twitter.com/intent/tweet?text=Check%20out%20this%20amazing%20article%20by%20@carrotfarmer17%20at%20@genicsblog:%20Intro%20to%20GraphQL%20with%20Node.js%20and%20TypeScript&amp;url=https://genicsblog.com/dhruva/intro-to-graphql-with-node-and-typescript" onclick="window.open(this.href, 'twitter-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/twitter.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a class="social-link underline-none" rel="nofollow noopener noreferrer" href="https://www.snapchat.com/scan?attachmentUrl=https://genicsblog.com/dhruva/intro-to-graphql-with-node-and-typescript" onclick="window.open(this.href, 'snapchat-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/snapchat.svg" class="social-image w-14 h-14 -m-2" loading="lazy"> </a> </div> </div> </div> <aside class="sidebar-area"> <figure class="p-6 md:p-8 elevated"> <a class="underline-none" href="/author/dhruva/"> <img class="w-24 h-24 rounded-full mx-auto" src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/66675022" alt="Dhruva Srinivas" loading="lazy"> </a> <div class="pt-4 space-y-4"> <figcaption class="font-medium text-center"> <div> <a href="/author/dhruva/" class="text-xl font-bold"> Dhruva Srinivas </a> </div> <div class="text-slate-700 dark:text-slate-200 text-sm"> Fullstack web dev &amp; student </div> </figcaption> <p class="leading-5 font-medium text-justify">13 y/o web developer and programming enthusiast</p> </div> </figure> <div class="adverts-container"> <figure class="advert elevated"> <div align="center"> <ins class="adsbygoogle" style="display:inline-block;min-width:150px;max-width:310px;width:100%;height:600px" data-ad-client="ca-pub-8114751086331659" data-ad-slot="8698895132"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> </figure> <figure class="sponsor elevated lg:sticky lg:top-24"> <img src="https://dash.beyondwords.io/logo-dark.svg" class="logo hidden dark:block" loading="lazy"> <img src="https://dash.beyondwords.io/logo.svg" class="logo dark:hidden" loading="lazy"> <h4 class="mt-4"> BeyondWords <span class="text-xs text-white px-3 py-1 align-middle rounded-xl bg-primary">Sponsored</span> </h4> <p>BeyondWords is an AI voice and audio publishing platform that brings frictionless audio to writers, newsrooms, and businesses!</p> <div class="flex justify-center"> <a class="px-3 py-1 mt-4 linkbtn underline-none" href="https://beyondwords.io?utm_source=genicsblog.com&amp;utm_medium=cpc&amp;utm_campaign=advertisement" rel="nofollow" target="_blank"> Check it out &gt; </a> </div> </figure> </div> </aside> </section> <br> <div align="center"> <ins class="adsbygoogle" style="display: block" data-ad-format="fluid" data-ad-layout-key="-fb+5w+4e-db+86" data-ad-client="ca-pub-8114751086331659" data-ad-slot="3535897708"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> <br> <div class="cta elevated"> <div class="p-8 md:p-10 grid grid-flow-row sm:grid-flow-col gap-x-8 items-center justify-between"> <section class="md:mr-4"> <h3>Contribute to the Genics Blog!</h3> <p> Genics Blog is a purely <a href="https://github.com/genicsblog" rel="nofollow noreferrer noopener" target="_blank" class="cta-link">open source</a> publication. Authors at Genics post highly resourceful content on varied topics relevant to the developer community. Join us and start publishing today! </p> </section> <a class="px-4 py-1.5 mt-8 md:mt-0 md:ml-4 linkbtn underline-none font-bold text-lg" href="/contribute"> Contribute </a> </div> </div> <h1 class="mt-12 mx-6 lg:mx-10 xl:mx-14">Comments</h1> <section class="lg:flex lg:justify-center"> <div id="comments" class="content-area"></div> <aside class="sidebar-area"> <div class="p-6 space-y-4 lg:sticky lg:top-24 elevated"> <p class="leading-5 font-medium text-justify"> Please adhere to our <a href="/code-of-conduct">Code of Conduct</a> while adding a comment. Respect other's opinion. </p> </div> </aside> </section> <div class="m-8 md:m-10 lg:m-14"> <div class="flex justify-center"> <h2>Related content</h2> </div> <div class="flex flex-col sm:grid sm:grid-cols-2 lg:grid-cols-3 sm:gap-4 md:gap-4 lg:gap-6 text-center"> <a class="mt-4 mb-6 px-6 pt-2 pb-6 postbox hover:border-frontend dark:hover:!border-frontend underline-none" href="/dhruva/chakra-ui-is-awesome"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://user-images.githubusercontent.com/46792249/194068868-31884742-ea9c-428e-8f57-3de2ea6dc8e9.png" alt="Chakra UI is awesome!" title="Chakra UI is awesome!" class="aspect-video w-full mt-4" loading="lazy"> <div class="mt-6 mb-16"> <h2 class="line-clamp-2">Chakra UI is awesome!</h2> <p class="line-clamp-3">Chakra UI is an absolutely amazing UI library built for React. It consists of a plethora of components that you can use as building blocks for a beautiful and responsive front end.</p> </div> <div class="absolute mt-20 right-6 bottom-6 left-6"> <div class="flex items-center justify-between mt-6"> <div class="flex items-center"> <img src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/66675022" alt="Dhruva Srinivas's Profile Picture" title="Dhruva Srinivas's Profile Picture" class="rounded-full w-10 h-10" width="40px" height="40px" loading="lazy"> <span class="ml-2">Dhruva</span> </div> <span>Oct 5, 2022</span> </div> </div> </a> <a class="mt-4 mb-6 px-6 pt-2 pb-6 postbox hover:border-web dark:hover:!border-web underline-none" href="/avneesh/how-not-to-write-clean-code-in-react"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://user-images.githubusercontent.com/76690419/174092726-03b0760f-1385-45f9-9680-9c617ff3adef.png" alt="How not to write clean code in React? 🧹" title="How not to write clean code in React? 🧹" class="aspect-video w-full mt-4" loading="lazy"> <div class="mt-6 mb-16"> <h2 class="line-clamp-2">How not to write clean code in React? 🧹</h2> <p class="line-clamp-3">A few ways to *not* clean code and maintainable in React!</p> </div> <div class="absolute mt-20 right-6 bottom-6 left-6"> <div class="flex items-center justify-between mt-6"> <div class="flex items-center"> <img src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/76690419" alt="Avneesh Agarwal's Profile Picture" title="Avneesh Agarwal's Profile Picture" class="rounded-full w-10 h-10" width="40px" height="40px" loading="lazy"> <span class="ml-2">Avneesh</span> </div> <span>Jun 17, 2022</span> </div> </div> </a> <a class="mt-4 mb-6 px-6 pt-2 pb-6 postbox hover:border-web dark:hover:!border-web underline-none" href="/shockz/objects-and-object-keys-in-javascript-the-definite-guide"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://user-images.githubusercontent.com/46792249/169762706-0a457425-f5e5-49a9-9888-d963b8ba26c7.jpg" alt="Objects and Object Keys in JavaScript: The Definite Guide" title="Objects and Object Keys in JavaScript: The Definite Guide" class="aspect-video w-full mt-4" loading="lazy"> <div class="mt-6 mb-16"> <h2 class="line-clamp-2">Objects and Object Keys in JavaScript: The Definite Guide</h2> <p class="line-clamp-3">The complete beginner's guide to objects and object keys in javascript for web development.</p> </div> <div class="absolute mt-20 right-6 bottom-6 left-6"> <div class="flex items-center justify-between mt-6"> <div class="flex items-center"> <img src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/87615572?v=4" alt="Rohit Mishra's Profile Picture" title="Rohit Mishra's Profile Picture" class="rounded-full w-10 h-10" width="40px" height="40px" loading="lazy"> <span class="ml-2">Rohit</span> </div> <span>May 23, 2022</span> </div> </div> </a> </div> </div> </main> <footer class="px-12 py-8 text-center"> <div class="flex justify-center"> <a aria-label="Genics Blog's Discord server" class="mr-2 underline-none hover:scale-125 transition" href="https://discord.genicsblog.com" target="_blank"> <img alt="Discord's logo" src="/assets/images/social/discord.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a aria-label="Genics Blog's GitHub organization" class="mx-4 underline-none hover:scale-125 transition" href="https://github.com/genicsblog" target="_blank" rel="nofollow noopener noreferrer"> <img alt="GitHub's logo" src="/assets/images/social/github.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a aria-label="Genics Blog's Twitter page" class="ml-2 underline-none hover:scale-125 transition" href="https://twitter.com/genicsblog" target="_blank" rel="nofollow noopener noreferrer"> <img alt="Twitter's logo" src="/assets/images/social/twitter.svg" class="social-image w-8 h-8" loading="lazy"> </a> </div> <br> © 2021 <a href="/">Genics Blog</a> <br> Built with <a href="https://jekyllrb.com" target="_blank" rel="nofollow noopener noreferrer">Jekyll</a>. Hosted on <a href="https://github.com" target="_blank" rel="nofollow noopener noreferrer">GitHub</a>. <br><br> Developed by <a href="https://github.com/gouravkhunger" rel="nofollow noopener noreferrer" target="_blank"> Gourav Khunger</a>. Thanks to the <a href="https://github.com/genicsblog/genicsblog.com/graphs/contributors" rel="nofollow noopener noreferrer" target="_blank"> contributors</a>! <br><br> <a class="nav-item text-white" href="/terms">T&amp;C</a> <a class="nav-item text-white" href="/privacy-policy">Privacy Policy</a> <a class="nav-item text-white" href="/licensing">Licensing</a> </footer> <div class="hidden fixed top-0 w-full h-full p-6 md:p-14 backdrop-blur-md cursor-pointer z-20" id="search-container"> <div class="p-4 bg-white dark:bg-slate-800 mx-auto w-full max-h-full sm:w-3/4 lg:w-1/2 content-center rounded-lg shadow-md shadow-slate-200 dark:shadow-none cursor-auto overflow-auto" id="search-box"> <div class="flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 stroke-slate-400" fill="none" viewbox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path> </svg> <input type="text" class="w-full h-full pl-4 text-2xl outline-none dark:bg-slate-800" id="search-input" placeholder="Search..."> <span class="hidden lg:block text-sm text-gray-600 text-right tracking-tight ml-2"> <kbd class="bg-gray-200 dark:bg-slate-600 dark:text-gray-200 rounded-md shadow-sm py-1 px-2">Esc</kbd> </span> </div> <div id="results-container"></div> </div> </div> <script src="/assets/js/theme.js" data-no-instant></script> <script src="/assets/js/search.js" data-no-instant></script> <script src="/assets/js/prism.js" data-no-instant></script> <script src="/assets/js/instantclick.min.js" data-no-instant></script> <script data-no-instant>InstantClick.on("change",()=>{setTheme(),Prism.highlightAll(),initCodeBlocks(),window.onscroll=(()=>{setStickyness()}),document.getElementById("search-container").addEventListener("click",t=>{"search-container"===t.target.id&&hideSearch()});const t=window.location.pathname+window.location.search+window.location.hash;gtag("set","page_path",t);const e=document.getElementById("audio-player");if(e)new BeyondWords.Player({projectId:11987,target:e,playerStyle:"large",widgetStyle:"small",skipButtonStyle:"seconds",highlightColor:isDark()?DARK_HIGHLIGHT:LIGHT_HIGHLIGHT,contentId:e.dataset.audioId});const n=document.getElementById("comments");if(n){const t={src:"https://giscus.app/client.js","data-repo":"genicsblog/comments","data-repo-id":"R_kgDOG0-Vlw","data-category":"Announcements","data-category-id":"DIC_kwDOG0-Vl84CP8Dz","data-mapping":"pathname","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":`${isDark()?GISCUS_DARK:GISCUS_LIGHT}`,"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");for(key in t)e.setAttribute(key,t[key]);n.appendChild(e)}}),InstantClick.on("receive",()=>{BeyondWords.Player.destroyAll(),"function"==typeof window.cleanup&&(window.cleanup(),window.cleanup())}),InstantClick.init("mousedown");</script> </body> </html>