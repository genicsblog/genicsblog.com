<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" content="Learn using Mongoose for MongoDB by building a hands-on project!"> <meta name="twitter:description" content="Learn using Mongoose for MongoDB by building a hands-on project!"> <meta property="og:description" content="Learn using Mongoose for MongoDB by building a hands-on project!"> <meta property="og:title" content="How to use Mongoose with Next.js for MongoDB?"> <meta property="og:image" content="https://cdn.hashnode.com/res/hashnode/image/upload/v1650187197534/EONUGmGt8.png"> <meta property="og:image:alt" content="How to use Mongoose with Next.js for MongoDB?"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="@genicsblog"> <meta name="twitter:image" content="https://cdn.hashnode.com/res/hashnode/image/upload/v1650187197534/EONUGmGt8.png"> <meta name="twitter:creator" content="@MaxProgramming1"> <meta property="og:type" content="article"> <meta property="article:section" content="web"> <meta property="article:tag" content="mongodb, next-js"> <meta property="article:author" content="https://genicsblog.com/author/usman/"> <meta property="article:published_time" content="2022-04-17T00:00:00+0000"> <meta property="og:url" content="https://genicsblog.com/usman/how-to-use-mongoose-with-next-js-for-mongodb"> <meta name="theme-color" content="#16161f"> <meta name="msapplication-TileColor" content="#16161f"> <meta name="msapplication-navbutton-color" content="#16161f"> <meta name="apple-mobile-web-app-status-bar-style" content="#16161f"> <link rel="canonical" href="https://blog.usman-s.me/how-to-use-mongoose-with-nextjs-for-mongodb"> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Fira+Code&amp;family=Sen&amp;display=swap" rel="stylesheet"> <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon"> <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png"> <link rel="stylesheet" href="/assets/css/theme.css"> <link rel="stylesheet" href="/assets/css/prism.css"> <link rel="manifest" href="/manifest.json"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-KQJM9Z9N1Z"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KQJM9Z9N1Z");</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8114751086331659" crossorigin="anonymous"></script> <title>How to use Mongoose with Next.js for MongoDB?</title> </head> <body> <nav> <p class="bg-primary p-3 text-center text-white font-medium flex flex-col sm:block"> <span class="md:hidden px-1">Connect with us on discord to stay updated.</span> <span class="hidden md:inline px-1">Connect with us on discord to stay updated on the blog's development.</span> <a href="https://discord.genicsblog.com" target="_blank" class="font-bold underline header-anchor hover:text-slate-300" rel="nofollow noopener noreferrer"> Join &gt; </a> </p> <header class="w-full top-0 z-10" id="navbar"> <div class="bg-background max-h-20 py-1 px-3 sm:px-8 lg:px-8 mx-auto"> <div class="flex justify-between h-16"> <div class="flex lg:px-0"> <a class="group flex-shrink-0 flex items-center logo-anchor" href="/" aria-label="Home Page Link"> <div class="flex items-center space-x-2 whitespace-nowrap flex-nowrap"> <div class="h-8 w-8 md:mx-2"> <svg class="h-8 w-8 fill-white group-hover:fill-slate-300" viewbox="0 0 79.784508 91.197495" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <g id="layer1" transform="translate(-68.235445,-52.679805)"> <path id="path962" style=" stroke: none; stroke-width: 0.999999px; stroke-linecap: butt; stroke-linejoin: miter; stroke-opacity: 1; " d="m 408.73047,210.44336 -139.49414,80.59961 0.87109,162.49414 52.71289,-32.94922 85.34766,48.85938 87.42773,-48.85743 -0.63476,-53.22851 -84.8711,-0.88477 v 27.79297 h 56.02735 v 9.45508 l -58.31446,33.66797 -56.13085,-32.4082 0.63476,-66.94922 55.81836,-32.22461 57.25195,32.76172 82.41016,-47.75782 z m 0.43945,32.62695 83.28125,48.08203 -26.93555,15.55274 -57.21484,-33.0332 -84.18359,48.60351 v 66.39453 l -25.48047,14.71094 0.084,-96.54102 z" transform="scale(0.26458333)"></path> <path style=" stroke: none; stroke-width: 0.264583px; stroke-linecap: butt; stroke-linejoin: miter; stroke-opacity: 1; " d="m 81.889144,125.74786 26.204966,15.12944 36.92584,-21.31914 V 88.998204 l -7.22758,4.172845 V 115.03627 L 108.1902,132.12709 89.310794,121.22706 Z" id="path1416"></path> </g> </svg> </div> <span class="font-bold hidden sm:block text-xl tracking-tight text-white group-hover:text-slate-300"> Genics Blog</span> </div> </a> </div> <div class="flex items-center h-16"> <div class="hidden lg:block"> <a class="nav-item text-white" href="/topics">Topics</a> <a class="nav-item text-white" href="/about">About Us</a> <a class="nav-item text-white" href="/contact">Contact</a> <a class="nav-item text-white" target="_blank" href="https://docs.genicsblog.com">Docs</a> </div> <button onclick="showSearch()" aria-label="Search across the site..."> <svg xmlns="http://www.w3.org/2000/svg" class="ml-4 h-6 w-6 stroke-white hover:stroke-slate-300" fill="none" viewbox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path> </svg> </button> <button type="button" class="ml-2" onclick="saveTheme(isDark() ? LIGHT : DARK)" title="Ctrl + Shift + L"> <svg viewbox="0 0 512 512" class="h-8 w-8 fill-white hover:fill-slate-300 transition-all" id="theme-toggle-icon"> <g> <path d="M262.524,164.624c-49.466,0-89.592,40.119-89.592,89.596c0,49.487,40.126,89.606,89.592,89.606 c49.487,0,89.613-40.119,89.613-89.606C352.138,204.743,312.012,164.624,262.524,164.624z M262.524,320.136 c-36.39,0-65.902-29.513-65.902-65.916c0-36.396,29.513-65.903,65.902-65.903c36.41,0,65.924,29.506,65.924,65.903 C328.448,290.623,298.935,320.136,262.524,320.136z"></path> <path d="M264.078,149.221c0,0-39.031-73.758,0-73.758C303.103,75.462,264.078,149.221,264.078,149.221z"></path> <path d="M261.922,363.328c0,0,39.053,73.737,0,73.737C222.905,437.045,261.922,363.328,261.922,363.328z"></path> <path d="M186.536,331.194c0,0-24.539,79.766-52.142,52.148C106.817,355.746,186.536,331.194,186.536,331.194z"></path> <path d="M155.941,255.181c0,0-73.745,39.048-73.745,0C82.224,216.177,155.941,255.181,155.941,255.181z"></path> <path d="M188.068,179.794c0,0-79.746-24.524-52.142-52.142C163.503,100.086,188.068,179.794,188.068,179.794z"></path> <path d="M428.852,254.552c0,49.668-40.276,89.931-89.935,89.931c-49.657,0-89.928-40.263-89.928-89.931 c0-49.672,40.271-89.928,89.928-89.928C388.575,164.624,428.852,204.88,428.852,254.552z"></path> </g> </svg> </button> <a class="ml-2 md:ml-4 px-2.5 py-1.5 font-bold rounded-md text-black bg-white hover:bg-slate-300 hover:scale-110 transition underline-none" href="/contribute">Contribute</a> <div class="ml-4 lg:hidden cursor-pointer"> <div id="menu-btn" class="h-8 w-8 relative" onclick="toggleNav()"> <div class="menu-btn-lines"></div> </div> </div> </div> </div> </div> <div class="top-0 bg-background hidden p-6 lg:hidden" id="mobile-nav"> <div class="grid grid-cols-2 gap-y-2 gap-x-4"> <a class="group mobile-nav-item " href="/topics"> <span class="group-hover:text-white">Topics</span> </a> <a class="group mobile-nav-item " href="/about"> <span class="group-hover:text-white">About Us</span> </a> <a class="group mobile-nav-item " href="/contact"> <span class="group-hover:text-white">Contact</span> </a> <a class="group mobile-nav-item" href="https://docs.genicsblog.com" target="_blank"> <span class="group-hover:text-white">Documentation</span> </a> </div> </div> </header> </nav> <header class="banner"> <div class="flex flex-col lg:flex-row p-2"> <div class="flex justify-center items-center lg:w-1/2 md:mb-0"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1650187197534/EONUGmGt8.png" class="w-full md:w-3/4 lg:w-full rounded-xl shadow-xl aspect-video m-8" loading="lazy"> </div> <div class="flex flex-col justify-center lg:items-start w-full lg:w-1/2 lg:ml-12"> <h1 class="text-4xl font-black tracking-tight">How to use Mongoose with Next.js for MongoDB?</h1> <span class="mt-0.5 text-justify">Learn using Mongoose for MongoDB by building a hands-on project!</span> <div class="flex items-center mt-8"> <img class="rounded-full w-14 h-14" src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://i.ibb.co/Fs6Kww8/PFP.jpg" loading="lazy"> <div class="ml-4 leading-3"> <a class="font-extrabold text-xl" href="/author/usman/"> Usman Sabuwala </a> <br> <span class="text-sm"> Posted on April 17, 2022 </span> </div> </div> <div class="mt-8"> <span>Category: </span> <a class="text-sm ml-2 archive-name !bg-web underline-none" href="/category/web">#web</a> </div> <div class="mt-4 sm:mt-3"> <span>Tags: </span> <a class="text-sm ml-2 my-0.5 archive-name !bg-mongodb underline-none" href="/tag/mongodb">#mongodb</a> <a class="text-sm ml-2 my-0.5 archive-name !bg-next-js underline-none" href="/tag/next-js">#next-js</a> </div> </div> </div> </header> <main> <br> <div align="center"> <ins class="adsbygoogle" style="display: block" data-ad-format="fluid" data-ad-layout-key="-fb+5w+4e-db+86" data-ad-client="ca-pub-8114751086331659" data-ad-slot="3535897708"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> <br> <section class="lg:flex"> <div class="md:text-lg m-6 md:m-10 lg:m-14 lg:w-full lg:max-w-[65%] xl:max-w-[70%]"> <div class="elevated"> <div class="notice w-full px-4 py-2 rounded-tl-2xl rounded-tr-2xl bg-slate-200 dark:bg-slate-800 space-y-4"> <span class="text-base italic leading-8"> Originally published at <a href="https://blog.usman-s.me/how-to-use-mongoose-with-nextjs-for-mongodb" target="_blank" rel="nofollow noopener noreferrer">blog.usman-s.me</a>. </span> </div> <article class="p-6 md:p-8"> <div class="mb-6" id="audio-player" data-audio-id="4008578"></div> <h1 id="hey-all-">Hey all! ðŸ‘‹</h1> <p>Next.js is an amazing full-stack framework and MongoDB is a great NoSQL database. Using them together will make an app super fast and awesome! In this post, weâ€™ll go ahead and set up the Mongoose ODM inside our Next.js app to make use of MongoDB!</p> <p>So letâ€™s see how you can set up Mongoose in a Next.js app to connect and interact with your MongoDB database!</p> <h2 id="setting-up-mongoose-and-the-connection-string">Setting up mongoose and the connection string</h2> <p>In your Next.js project, to set up mongoose you simply have to install it as a dependency just as you do with Node.js.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm i mongoose
</code></pre></div></div> <p>After installing <code class="language-plaintext highlighter-rouge">mongoose</code>, weâ€™ll create a folder called <code class="language-plaintext highlighter-rouge">utils</code> in our root and create a new file named <code class="language-plaintext highlighter-rouge">connectMongo.js</code> file.</p> <p>In this file, we will export a function that connects us to MongoDB.</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1650178314792/H0ZTJa7ma.png" alt="image.png" loading="lazy"></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">mongoose</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">mongoose</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">connectMongo</span> <span class="o">=</span> <span class="nf">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">MONGO_URI</span><span class="p">);</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">connectMongo</span><span class="p">;</span>
</code></pre></div></div> <p>Also create a file named <code class="language-plaintext highlighter-rouge">.env.local</code> in the root of your project to store the connection URI in your environment variable and hide it from the main code.</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># I am using MongoDB locally but you can use MongoDB Atlas also if you want
</span><span class="n">MONGO_URI</span><span class="o">=</span><span class="s">"mongodb://localhost:27017/mongoose_nextjs_demo"</span>
</code></pre></div></div> <h2 id="create-a-basic-mongoose-model">Create a basic mongoose model</h2> <p>Now that <code class="language-plaintext highlighter-rouge">mongoose</code> is set up successfully in our Next.js project, the rest of the work is quite similar to a Node.js app. I personally like to create a folder called <code class="language-plaintext highlighter-rouge">models</code> in the root of my project and create my model files there, just like a normal node.js app.</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1650178623079/FI6HSWVCK.png" alt="image.png" loading="lazy"></p> <p>So now weâ€™ll create a file named <code class="language-plaintext highlighter-rouge">testModel.js</code> in our <code class="language-plaintext highlighter-rouge">models</code> folder where weâ€™ll create our mongoose model.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Schema</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">models</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">mongoose</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">testSchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Schema</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
  <span class="na">email</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
    <span class="na">required</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">unique</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">Test</span> <span class="o">=</span> <span class="nx">models</span><span class="p">.</span><span class="nx">Test</span> <span class="o">||</span> <span class="nf">model</span><span class="p">(</span><span class="dl">'</span><span class="s1">Test</span><span class="dl">'</span><span class="p">,</span> <span class="nx">testSchema</span><span class="p">);</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Test</span><span class="p">;</span>
</code></pre></div></div> <blockquote> <p>IMPORTANT: Notice how we use <code class="language-plaintext highlighter-rouge">models.Test</code> and then the logical OR operator and then use the <code class="language-plaintext highlighter-rouge">model</code> function by mongoose. We do that because we donâ€™t want to create a new model every single time we hit an API route in Next.js. If you donâ€™t do that and just go with <code class="language-plaintext highlighter-rouge">model('Test', testSchema)</code>, you might face an error that would prevent creating/updating etc.</p> </blockquote> <h2 id="using-mongoose-in-api-routes">Using mongoose in API routes</h2> <p>Now that we have our model created, we can use it to see it in action!</p> <p>Next.js is a full-stack framework, and so it also provides a node environment where we can run Node.js back-end code easily and integrate that with the frontend.</p> <p>In the <code class="language-plaintext highlighter-rouge">pages/api</code> folder, we can create a file or folder that will ultimately create an API route and we can write back-end code in that file and call it as a REST API.</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1650183014182/dxFl9KmIN.png" alt="image.png" loading="lazy"></p> <p>For this demo, I created a folder <code class="language-plaintext highlighter-rouge">test</code> and a file <code class="language-plaintext highlighter-rouge">add.js</code> inside of it which gives the path <code class="language-plaintext highlighter-rouge">/api/test/add</code>.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">connectMongo</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../../../utils/connectMongo</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Test</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../../../models/testModel</span><span class="dl">'</span><span class="p">;</span>

<span class="cm">/**
 * @param {import('next').NextApiRequest} req
 * @param {import('next').NextApiResponse} res
 */</span>
<span class="k">export</span> <span class="k">default</span> <span class="k">async</span> <span class="kd">function</span> <span class="nf">addTest</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">CONNECTING TO MONGO</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">await</span> <span class="nf">connectMongo</span><span class="p">();</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">CONNECTED TO MONGO</span><span class="dl">'</span><span class="p">);</span>

    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">CREATING DOCUMENT</span><span class="dl">'</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">test</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Test</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">CREATED DOCUMENT</span><span class="dl">'</span><span class="p">);</span>

    <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">({</span> <span class="nx">test</span> <span class="p">});</span>
  <span class="p">}</span> <span class="nf">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">({</span> <span class="nx">error</span> <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>Here, we import the <code class="language-plaintext highlighter-rouge">connectMongo</code> function and our <code class="language-plaintext highlighter-rouge">Test</code> model that we created from the respective files. And the big comment I have at the top is <a href="https://jsdoc.app/" rel="nofollow noopener noreferrer" target="_blank">JSDoc</a> which can be used to provide autocomplete and typing in the IDE. You can omit it if you want.</p> <p>Finally, the code is simple and straightforward, you can use the normal <code class="language-plaintext highlighter-rouge">mongoose</code> style code to create a new document. By getting the data from <code class="language-plaintext highlighter-rouge">req.body</code>.</p> <p>You can test it from the <a href="https://www.thunderclient.com/" rel="nofollow noopener noreferrer" target="_blank">Thunder Client</a> extension in VS Code, <a href="https://www.postman.com/" rel="nofollow noopener noreferrer" target="_blank">Postman</a> or <a href="https://insomnia.rest/download" rel="nofollow noopener noreferrer" target="_blank">Insomnia</a>. Whatever you wish! I like to use Thunder Client.</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1650183454458/zEdrw_Mvy.png" alt="image.png" loading="lazy"></p> <h2 id="create-new-document-from-front-end">Create new document from front-end</h2> <p>Now that we have our back-end API created and we have verified that itâ€™s working, we can quickly write some front-end code to make it usable in our app.</p> <p>On the homepage inside the <code class="language-plaintext highlighter-rouge">index.js</code> file, I changed the file so that when we click the button, a new document will get added to the database.</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Head</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">next/head</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Image</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">next/image</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">styles</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../styles/Home.module.css</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nf">Home</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">createTest</span> <span class="o">=</span> <span class="nf">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">randomNum</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nf">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/test/add</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">({</span>
        <span class="na">name</span><span class="p">:</span> <span class="s2">`Test </span><span class="p">${</span><span class="nx">randomNum</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
        <span class="na">email</span><span class="p">:</span> <span class="s2">`test</span><span class="p">${</span><span class="nx">randomNum</span><span class="p">}</span><span class="s2">@test.com`</span><span class="p">,</span>
      <span class="p">}),</span>
    <span class="p">});</span>
    <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">res</span><span class="p">.</span><span class="nf">json</span><span class="p">();</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nf">return </span><span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="si">}</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">Head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Create Next App<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="p">=</span><span class="s">'description'</span> <span class="na">content</span><span class="p">=</span><span class="s">'Generated by create next app'</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="p">=</span><span class="s">'icon'</span> <span class="na">href</span><span class="p">=</span><span class="s">'/favicon.ico'</span> <span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nc">Head</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">main</span> <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">main</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">createTest</span><span class="si">}</span><span class="p">&gt;</span>Create Test<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span><span class="p">&gt;</span>
          Welcome to <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="s">'https://nextjs.org'</span><span class="p">&gt;</span>Next.js!<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">description</span><span class="si">}</span><span class="p">&gt;</span>
          Get started by editing<span class="si">{</span><span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="si">}</span>
          <span class="p">&lt;</span><span class="nt">code</span> <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">code</span><span class="si">}</span><span class="p">&gt;</span>pages/index.js<span class="p">&lt;/</span><span class="nt">code</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">grid</span><span class="si">}</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">footer</span> <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">footer</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">a</span>
          <span class="na">href</span><span class="p">=</span><span class="s">'https://vercel.com?utm_source=create-next-app&amp;utm_medium=default-template&amp;utm_campaign=create-next-app'</span>
          <span class="na">target</span><span class="p">=</span><span class="s">'_blank'</span>
          <span class="na">rel</span><span class="p">=</span><span class="s">'noopener noreferrer'</span>
        <span class="p">&gt;</span>
          Powered by<span class="si">{</span><span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="si">}</span>
          <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">logo</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nc">Image</span> <span class="na">src</span><span class="p">=</span><span class="s">'/vercel.svg'</span> <span class="na">alt</span><span class="p">=</span><span class="s">'Vercel Logo'</span> <span class="na">width</span><span class="p">=</span><span class="si">{</span><span class="mi">72</span><span class="si">}</span> <span class="na">height</span><span class="p">=</span><span class="si">{</span><span class="mi">16</span><span class="si">}</span> <span class="p">/&gt;</span>
          <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">footer</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="fetch-and-display-documents">Fetch and display documents</h2> <p>Now itâ€™s time to use Next.jsâ€™s best feature! Server-Side Rendering. We can use SSR in Next.js to easily run back-end Node.js code as we want and the data can be easily accessible through the <code class="language-plaintext highlighter-rouge">props</code> to the page.</p> <p>In the <code class="language-plaintext highlighter-rouge">index.js</code> file itself, weâ€™ll import the <code class="language-plaintext highlighter-rouge">connectMongo</code> and <code class="language-plaintext highlighter-rouge">Test</code> again and use them inside the <code class="language-plaintext highlighter-rouge">getServerSideProps</code> function that we have to export like this ðŸ‘‡</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">connectMongo</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../utils/connectMongo</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Test</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../models/testModel</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">getServerSideProps</span> <span class="o">=</span> <span class="nf">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">CONNECTING TO MONGO</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">await</span> <span class="nf">connectMongo</span><span class="p">();</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">CONNECTED TO MONGO</span><span class="dl">'</span><span class="p">);</span>

    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">FETCHING DOCUMENTS</span><span class="dl">'</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">tests</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Test</span><span class="p">.</span><span class="nf">find</span><span class="p">();</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">FETCHED DOCUMENTS</span><span class="dl">'</span><span class="p">);</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="na">props</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">tests</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">tests</span><span class="p">)),</span>
      <span class="p">},</span>
    <span class="p">};</span>
  <span class="p">}</span> <span class="nf">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">notFound</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div> <p>In this function, we can easily fetch any data we want and it will be done on the server and then we have to <strong>return</strong> it as <code class="language-plaintext highlighter-rouge">props</code>. That will be accessible to the page. You can read about <a href="https://nextjs.org/docs/basic-features/data-fetching/get-server-side-props" rel="nofollow noopener noreferrer" target="_blank"><code class="language-plaintext highlighter-rouge">getServerSideProps</code> on the Next.js docs</a></p> <blockquote> <p>IMPORTANT: Make sure to sanitize the <code class="language-plaintext highlighter-rouge">tests</code> variable with <code class="language-plaintext highlighter-rouge">JSON.parse(JSON.stringify(tests))</code> because it contains <code class="language-plaintext highlighter-rouge">ObjectID</code> from MongoDB instead of a normal string. This trick converts it into a string that can be passed in the <code class="language-plaintext highlighter-rouge">return</code> object.</p> </blockquote> <p>Thatâ€™s it! After weâ€™re done fetching the data we can easily display it by accessing it through the props on our page and we can use it however we want. In this case weâ€™ll map over that data to output every document like so</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nf">Home</span><span class="p">({</span> <span class="nx">tests</span> <span class="p">})</span> <span class="p">{</span>
  <span class="c1">// ...</span>
  <span class="nf">return </span><span class="p">(</span>
    <span class="c1">//   ...</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">grid</span><span class="si">}</span><span class="p">&gt;</span>
      <span class="si">{</span><span class="nx">tests</span><span class="p">.</span><span class="nf">map</span><span class="p">((</span><span class="nx">test</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
        <span class="p">&lt;</span><span class="nt">a</span>
          <span class="na">href</span><span class="p">=</span><span class="s">"https://nextjs.org/docs"</span>
          <span class="na">key</span><span class="p">=</span><span class="si">{</span><span class="nx">test</span><span class="p">.</span><span class="nx">_id</span><span class="si">}</span>
          <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">card</span><span class="si">}</span>
        <span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">test</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span> <span class="ni">&amp;rarr;</span><span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">test</span><span class="p">.</span><span class="nx">email</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
      <span class="p">))</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="c1">// ...</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <p>Finally, this is what our page looks like:</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1650184603173/bbdiBR1rw.png" alt="image.png" loading="lazy"></p> <p>I have explained everything deeply in the YouTube tutorial below ðŸ‘‡ðŸ‘‡</p> <div class="mb-6 aspect-video"> <iframe src="https://www.youtube.com/embed/cM0pA50R20M" class="w-full h-full rounded-xl" allowfullscreen="" loading="lazy"> </iframe> </div> <p>I hope this post helped you successfully set up Mongoose in your Next.js app. If it did, please leave a like!</p> <p>Comment down your thoughts! There is always room for improvement so let me know your suggestions on this project!</p> <p><strong>Connect with me on my <a href="https://youtube.com/MaxProgramming" rel="nofollow noopener noreferrer" target="_blank">YouTube channel</a> and my <a href="https://twitter.com/maxprogramming1" rel="nofollow noopener noreferrer" target="_blank">Twitter</a> ðŸ˜‰</strong></p> <p>Thanks for reading âœŒ</p> </article> <hr> <div class="px-6 pb-6 md:px-8 md:pb-8 flex flex-col items-center rounded-bl-2xl rounded-br-2xl"> <p class="text-center mb-4"> Join discussions at <a href="https://discord.genicsblog.com" target="_blank" class="cta-link"> our discord server &gt; </a> <br> Did you learn something new? Add a comment below and spread the word! </p> <div class="grid grid-flow-col gap-6"> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://facebook.com/sharer.php?u=https://genicsblog.com/usman/how-to-use-mongoose-with-next-js-for-mongodb" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/facebook.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://api.whatsapp.com/send?text=Checkout%20this%20amazing%20article%20at%20Genics%20Blog%20'How%20to%20use%20Mongoose%20with%20Next.js%20for%20MongoDB?':%20https://genicsblog.com/usman/how-to-use-mongoose-with-next-js-for-mongodb" onclick="window.open(this.href, 'whatsapp-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/whatsapp.svg" class="social-image w-10 h-10" loading="lazy"> </a> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://genicsblog.com/usman/how-to-use-mongoose-with-next-js-for-mongodb" onclick="window.open(this.href, 'linkedin-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/linkedin.svg" class="social-image w-7 h-7" loading="lazy"> </a> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://twitter.com/intent/tweet?text=Check%20out%20this%20amazing%20article%20by%20@MaxProgramming1%20at%20@genicsblog:%20How%20to%20use%20Mongoose%20with%20Next.js%20for%20MongoDB?&amp;url=https://genicsblog.com/usman/how-to-use-mongoose-with-next-js-for-mongodb" onclick="window.open(this.href, 'twitter-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/twitter.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://www.snapchat.com/scan?attachmentUrl=https://genicsblog.com/usman/how-to-use-mongoose-with-next-js-for-mongodb" onclick="window.open(this.href, 'snapchat-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/snapchat.svg" class="social-image w-14 h-14 -m-2" loading="lazy"> </a> </div> </div> </div> </div> <aside class="m-6 md:m-10 lg:my-14 lg:mr-10 lg:-ml-4 md:mr-8 lg:max-w-[25%] xl:max-w-[20%]"> <figure class="p-6 md:p-8 elevated"> <img class="w-24 h-24 rounded-full mx-auto" src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://i.ibb.co/Fs6Kww8/PFP.jpg" alt="Usman Sabuwala" loading="lazy"> <div class="pt-4 space-y-4"> <figcaption class="font-medium text-center"> <div> <a href="/author/usman/" class="text-xl font-bold"> Usman Sabuwala </a> </div> <div class="text-slate-700 dark:text-slate-200 text-sm"> Content creator &amp; Full stack dev </div> </figcaption> <p class="leading-5 font-medium text-justify">I like to create content and teach people about web development. I like reading books and helping people!</p> </div> </figure> <figure class="bg-white dark:bg-background rounded-2xl p-6 shadow-xl shadow-slate-200 dark:shadow-none mt-8 aspect-square w-full"> <div align="center"> <ins class="adsbygoogle" style="display: block" data-ad-format="auto" data-full-width-responsive="true" data-ad-client="ca-pub-8114751086331659" data-ad-slot="8698895132"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> </figure> <figure class="px-6 pb-6 md:px-8 mt-8 elevated lg:sticky lg:top-24"> <img src="https://dash.beyondwords.io/logo-dark.svg" class="w-full aspect-video hidden dark:block" loading="lazy"> <img src="https://dash.beyondwords.io/logo.svg" class="w-full aspect-video dark:hidden" loading="lazy"> <h4> BeyondWords <span class="text-xs text-white px-3 py-1 align-middle rounded-xl bg-primary">Sponsored</span> </h4> <p>BeyondWords is an AI voice and audio publishing platform that brings frictionless audio to writers, newsrooms, and businesses!</p> <div class="flex justify-center"> <a class="px-3 py-1 mt-4 linkbtn underline-none" href="https://beyondwords.io?utm_source=genicsblog.com&amp;utm_medium=cpc&amp;utm_campaign=advertisement" rel="nofollow" target="_blank"> Check it out &gt; </a> </div> </figure> </aside> </section> <br> <div align="center"> <ins class="adsbygoogle" style="display: block" data-ad-format="fluid" data-ad-layout-key="-fb+5w+4e-db+86" data-ad-client="ca-pub-8114751086331659" data-ad-slot="3535897708"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> <br> <div class="flex justify-center mx-6 md:mx-10 lg:mx-14"> <div class="p-8 md:p-12 grid grid-flow-row sm:grid-flow-col gap-x-8 items-center justify-between elevated"> <section class="md:mr-4"> <h3>Contribute to the Genics Blog!</h3> <p> Genics Blog is a purely <a href="https://github.com/genicsblog" rel="nofollow noreferrer noopener" target="_blank" class="cta-link">open source</a> publication. Authors at Genics post highly resourceful content on varied topics relevant to the developer community. Join us and start publishing today! </p> </section> <a class="px-4 py-1.5 mt-8 md:mt-0 md:ml-4 linkbtn underline-none font-bold text-lg" href="/contribute"> Contribute </a> </div> </div> <h1 class="mx-8 mt-12 md:mx-10 lg:mx-14 -mb-4 lg:-mb-8">Comments</h1> <section class="flex flex-col-reverse lg:flex-row"> <div id="comments" class="md:text-lg m-8 md:m-10 lg:m-14 lg:w-full lg:max-w-[65%] xl:max-w-[70%]"></div> <aside class="m-8 md:m-10 lg:my-14 lg:mr-10 lg:-ml-4 md:mr-8 lg:max-w-[25%] xl:max-w-[20%]"> <div class="p-6 md:p-8 space-y-4 lg:sticky lg:top-24 rounded-2xl bg-white dark:bg-background shadow-xl dark:shadow-none shadow-slate-200"> <p class="leading-5 font-medium text-justify"> Please adhere to our <a href="/code-of-conduct">Code of Conduct</a> while adding a comment. Respect other's opinion. </p> </div> </aside> </section> <div class="m-8 md:m-10 lg:m-14"> <div class="flex justify-center"> <h2>Related content</h2> </div> <div class="flex flex-col sm:grid sm:grid-cols-2 lg:grid-cols-3 sm:gap-4 md:gap-4 lg:gap-6 text-center"> <a class="mt-4 mb-6 px-6 pt-2 pb-6 postbox hover:border-web dark:hover:!border-web underline-none" href="/anurag/basics-of-e2e-testing-and-integrating-cypress-with-next-js"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://user-images.githubusercontent.com/46792249/156170962-605f6ce9-2924-411b-8d39-888c351d0ada.png" alt="Basics of E2E Testing &amp; Quickstart Cypress with Next.js" title="Basics of E2E Testing &amp; Quickstart Cypress with Next.js" class="aspect-video w-full mt-4" loading="lazy"> <div class="mt-6 mb-16"> <h2 class="line-clamp-2">Basics of E2E Testing &amp; Quickstart Cypress with Next.js</h2> <p class="line-clamp-3">Learn the basics of E2E Testing using Cypress in your Next.js app from this start guide!</p> </div> <div class="absolute mt-20 right-6 bottom-6 left-6"> <div class="flex items-center justify-between mt-6"> <div class="flex items-center"> <img src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/77309809?v=4" alt="anuragkr's Profile Picture" title="anuragkr's Profile Picture" class="rounded-full w-10 h-10" width="40px" height="40px" loading="lazy"> <span class="ml-2">anuragkr</span> </div> <span>Mar 1, 2022</span> </div> </div> </a> <a class="mt-4 mb-6 px-6 pt-2 pb-6 postbox hover:border-web dark:hover:!border-web underline-none" href="/anishde12020/privacy-friendly-website-analytics-with-umami-and-next-js"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1645091755632/-NyymMbeL.png" alt="Privacy friendly website analytics with Umami and Next.js" title="Privacy friendly website analytics with Umami and Next.js" class="aspect-video w-full mt-4" loading="lazy"> <div class="mt-6 mb-16"> <h2 class="line-clamp-2">Privacy friendly website analytics with Umami and Next.js</h2> <p class="line-clamp-3">A guide on settting up Umami on Railway and adding it to a Next.js project.</p> </div> <div class="absolute mt-20 right-6 bottom-6 left-6"> <div class="flex items-center justify-between mt-6"> <div class="flex items-center"> <img src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/63192115?v=4" alt="Anish De's Profile Picture" title="Anish De's Profile Picture" class="rounded-full w-10 h-10" width="40px" height="40px" loading="lazy"> <span class="ml-2">Anish</span> </div> <span>Feb 20, 2022</span> </div> </div> </a> <a class="mt-4 mb-6 px-6 pt-2 pb-6 postbox hover:border-web dark:hover:!border-web underline-none" href="/anurag/how-i-prefer-to-structure-my-next-js-projects"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://res.cloudinary.com/ddum5vpp3/image/upload/v1644217454/Frame_2_rbhlxk.png" alt="How I prefer to structure my Next.js projects" title="How I prefer to structure my Next.js projects" class="aspect-video w-full mt-4" loading="lazy"> <div class="mt-6 mb-16"> <h2 class="line-clamp-2">How I prefer to structure my Next.js projects</h2> <p class="line-clamp-3">A look into how Anurag prefers to maintain and scale his projects built with Next.js + some tips!</p> </div> <div class="absolute mt-20 right-6 bottom-6 left-6"> <div class="flex items-center justify-between mt-6"> <div class="flex items-center"> <img src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/77309809?v=4" alt="anuragkr's Profile Picture" title="anuragkr's Profile Picture" class="rounded-full w-10 h-10" width="40px" height="40px" loading="lazy"> <span class="ml-2">anuragkr</span> </div> <span>Feb 7, 2022</span> </div> </div> </a> </div> </div> </main> <footer class="px-12 py-8 text-center"> <div class="flex justify-center"> <a aria-label="Genics Blog's Discord server" class="mr-2 underline-none hover:scale-125 transition" href="https://discord.genicsblog.com" target="_blank"> <img alt="Discord's logo" src="/assets/images/social/discord.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a aria-label="Genics Blog's GitHub organization" class="mx-4 underline-none hover:scale-125 transition" href="https://github.com/genicsblog" target="_blank" rel="nofollow noopener noreferrer"> <img alt="GitHub's logo" src="/assets/images/social/github.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a aria-label="Genics Blog's Twitter page" class="ml-2 underline-none hover:scale-125 transition" href="https://twitter.com/genicsblog" target="_blank" rel="nofollow noopener noreferrer"> <img alt="Twitter's logo" src="/assets/images/social/twitter.svg" class="social-image w-8 h-8" loading="lazy"> </a> </div> <br> Â© 2021 <a href="/">Genics Blog</a> <br> Built with <a href="https://jekyllrb.com" target="_blank" rel="nofollow noopener noreferrer">Jekyll</a>. Hosted on <a href="https://github.com" target="_blank" rel="nofollow noopener noreferrer">GitHub</a>. <br><br> Developed by <a href="https://github.com/gouravkhunger" rel="nofollow noopener noreferrer" target="_blank"> Gourav Khunger</a>. Thanks to the <a href="https://github.com/genicsblog/genicsblog.com/graphs/contributors" rel="nofollow noopener noreferrer" target="_blank"> contributors</a>! <br><br> <a class="nav-item text-white" href="/terms">T&amp;C</a> <a class="nav-item text-white" href="/privacy-policy">Privacy Policy</a> <a class="nav-item text-white" href="/licensing">Licensing</a> </footer> <div class="hidden fixed top-0 w-full h-full p-6 md:p-14 backdrop-blur-md cursor-pointer z-20" id="search-container"> <div class="p-4 bg-white dark:bg-slate-800 mx-auto w-full max-h-full sm:w-3/4 lg:w-1/2 content-center rounded-lg shadow-md shadow-slate-200 dark:shadow-none cursor-auto overflow-auto" id="search-box"> <div class="flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 stroke-slate-400" fill="none" viewbox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path> </svg> <input type="text" class="w-full h-full pl-4 text-2xl outline-none dark:bg-slate-800" id="search-input" placeholder="Search..."> <span class="hidden lg:block text-sm text-gray-600 text-right tracking-tight ml-2"> <kbd class="bg-gray-200 dark:bg-slate-600 dark:text-gray-200 rounded-md shadow-sm py-1 px-2">Esc</kbd> </span> </div> <div id="results-container"></div> </div> </div> <script src="/assets/js/theme.js" data-no-instant></script> <script src="/assets/js/search.js" data-no-instant></script> <script src="/assets/js/prism.js" data-no-instant></script> <script src="/assets/js/instantclick.min.js" data-no-instant></script> <script data-no-instant>InstantClick.on("change",()=>{setTheme(),Prism.highlightAll(),initCodeBlocks(),window.onscroll=(()=>{setStickyness()}),document.getElementById("search-container").addEventListener("click",e=>{"search-container"===e.target.id&&hideSearch()});const e=window.location.pathname+window.location.search+window.location.hash;gtag("set","page_path",e),window.BwPlayer&&"function"==typeof window.BwPlayer.pause&&window.BwPlayer.pause();const n=document.getElementById("audio-player");if(n){const e=document.createElement("script");e.type="module",e.text=`import BeyondWords from 'https://proxy.beyondwords.io/npm/@beyondwords/audio-player@latest/dist/module/index.js'\n\n      BeyondWords.sdk.player({\n        renderNode: 'audio-player',\n        projectId: 11987,\n        podcastId: ${n.dataset.audioId},\n      }).then(appInst => {\n        window.BwPlayer = appInst;\n        const player = document.getElementsByClassName("sk-app-container")[0];\n        player.classList.add("rounded-xl");\n        const attribution = document.getElementsByClassName("sk-app-link")[0];\n        attribution.classList.add("underline-none");\n      });`,document.body.appendChild(e)}const t=document.getElementById("comments");if(t){const e={src:"https://giscus.app/client.js","data-repo":"genicsblog/comments","data-repo-id":"R_kgDOG0-Vlw","data-category":"Announcements","data-category-id":"DIC_kwDOG0-Vl84CP8Dz","data-mapping":"pathname","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":`${isDark()?GISCUS_DARK:GISCUS_LIGHT}`,"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},n=document.createElement("script");for(key in e)n.setAttribute(key,e[key]);t.appendChild(n)}}),InstantClick.on("receive",()=>{"function"==typeof window.cleanup&&(window.cleanup(),window.cleanup())}),InstantClick.init("mousedown");</script> </body> </html>