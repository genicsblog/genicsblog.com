<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" content="Learn how to use add Metamask authentication to your Next.js app using Clerk."> <meta name="twitter:description" content="Learn how to use add Metamask authentication to your Next.js app using Clerk."> <meta property="og:description" content="Learn how to use add Metamask authentication to your Next.js app using Clerk."> <meta property="og:title" content="Metamask authentication in Next.js with Clerk üîí"> <meta property="og:image" content="https://user-images.githubusercontent.com/76690419/150726058-5520a79a-8f2a-4cac-8ceb-48a8ae2ac501.png"> <meta property="og:image:alt" content="Metamask authentication in Next.js with Clerk üîí"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="@genicsblog"> <meta name="twitter:image" content="https://user-images.githubusercontent.com/76690419/150726058-5520a79a-8f2a-4cac-8ceb-48a8ae2ac501.png"> <meta name="twitter:creator" content="@avneesh0612"> <meta property="og:type" content="article"> <meta property="article:section" content="web3"> <meta property="article:tag" content="authentication, next-js"> <meta property="article:author" content="https://genicsblog.com/author/avneesh/"> <meta property="article:published_time" content="2022-01-24T00:00:00+0000"> <meta property="og:url" content="https://genicsblog.com/avneesh/metamask-authentication-in-next-js-with-clerk"> <meta name="theme-color" content="#16161f"> <meta name="msapplication-TileColor" content="#16161f"> <meta name="msapplication-navbutton-color" content="#16161f"> <meta name="apple-mobile-web-app-status-bar-style" content="#16161f"> <link rel="canonical" href="https://blog.avneesh.tech/metamask-authentication-in-nextjs-with-clerk"> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Fira+Code&amp;family=Sen&amp;display=swap" rel="stylesheet"> <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon"> <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png"> <link rel="stylesheet" href="/assets/css/theme.css"> <link rel="stylesheet" href="/assets/css/prism.css"> <link rel="manifest" href="/manifest.json"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-KQJM9Z9N1Z"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KQJM9Z9N1Z");</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8114751086331659" crossorigin="anonymous"></script> <script src="https://proxy.beyondwords.io/npm/@beyondwords/player@latest/dist/umd.js"></script> <title>Metamask authentication in Next.js with Clerk üîí</title> </head> <body> <nav> <p class="bg-primary p-3 text-center text-white font-medium flex flex-col sm:block"> <span class="md:hidden px-1">Connect with us on discord to stay updated.</span> <span class="hidden md:inline px-1">Connect with us on discord to stay updated on the blog's development.</span> <a href="https://discord.genicsblog.com" target="_blank" class="font-bold underline header-anchor hover:text-slate-300" rel="nofollow noopener noreferrer"> Join &gt; </a> </p> <header class="w-full top-0 z-10" id="navbar"> <div class="bg-background max-h-20 py-1 px-3 sm:px-8 lg:px-8 mx-auto"> <div class="flex justify-between h-16"> <div class="flex lg:px-0"> <a class="group flex-shrink-0 flex items-center logo-anchor" href="/" aria-label="Home Page Link"> <div class="flex items-center space-x-2 whitespace-nowrap flex-nowrap"> <div class="h-8 w-8 md:mx-2"> <svg class="h-8 w-8 fill-white group-hover:fill-slate-300" viewbox="0 0 79.784508 91.197495" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <g id="layer1" transform="translate(-68.235445,-52.679805)"> <path id="path962" style=" stroke: none; stroke-width: 0.999999px; stroke-linecap: butt; stroke-linejoin: miter; stroke-opacity: 1; " d="m 408.73047,210.44336 -139.49414,80.59961 0.87109,162.49414 52.71289,-32.94922 85.34766,48.85938 87.42773,-48.85743 -0.63476,-53.22851 -84.8711,-0.88477 v 27.79297 h 56.02735 v 9.45508 l -58.31446,33.66797 -56.13085,-32.4082 0.63476,-66.94922 55.81836,-32.22461 57.25195,32.76172 82.41016,-47.75782 z m 0.43945,32.62695 83.28125,48.08203 -26.93555,15.55274 -57.21484,-33.0332 -84.18359,48.60351 v 66.39453 l -25.48047,14.71094 0.084,-96.54102 z" transform="scale(0.26458333)"></path> <path style=" stroke: none; stroke-width: 0.264583px; stroke-linecap: butt; stroke-linejoin: miter; stroke-opacity: 1; " d="m 81.889144,125.74786 26.204966,15.12944 36.92584,-21.31914 V 88.998204 l -7.22758,4.172845 V 115.03627 L 108.1902,132.12709 89.310794,121.22706 Z" id="path1416"></path> </g> </svg> </div> <span class="font-bold hidden sm:block text-xl tracking-tight text-white group-hover:text-slate-300"> Genics Blog</span> </div> </a> </div> <div class="flex items-center h-16"> <div class="hidden lg:block"> <a class="nav-item text-white" href="/topics">Topics</a> <a class="nav-item text-white" href="/about">About Us</a> <a class="nav-item text-white" href="/contact">Contact</a> <a class="nav-item text-white" target="_blank" href="https://docs.genicsblog.com">Docs</a> </div> <button onclick="showSearch()" aria-label="Search across the site..."> <svg xmlns="http://www.w3.org/2000/svg" class="ml-4 h-6 w-6 stroke-white hover:stroke-slate-300" fill="none" viewbox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path> </svg> </button> <button type="button" class="ml-2" onclick="saveTheme(isDark() ? LIGHT : DARK)" title="Ctrl + Shift + L"> <svg viewbox="0 0 512 512" class="h-8 w-8 fill-white hover:fill-slate-300 transition-all" id="theme-toggle-icon"> <g> <path d="M262.524,164.624c-49.466,0-89.592,40.119-89.592,89.596c0,49.487,40.126,89.606,89.592,89.606 c49.487,0,89.613-40.119,89.613-89.606C352.138,204.743,312.012,164.624,262.524,164.624z M262.524,320.136 c-36.39,0-65.902-29.513-65.902-65.916c0-36.396,29.513-65.903,65.902-65.903c36.41,0,65.924,29.506,65.924,65.903 C328.448,290.623,298.935,320.136,262.524,320.136z"></path> <path d="M264.078,149.221c0,0-39.031-73.758,0-73.758C303.103,75.462,264.078,149.221,264.078,149.221z"></path> <path d="M261.922,363.328c0,0,39.053,73.737,0,73.737C222.905,437.045,261.922,363.328,261.922,363.328z"></path> <path d="M186.536,331.194c0,0-24.539,79.766-52.142,52.148C106.817,355.746,186.536,331.194,186.536,331.194z"></path> <path d="M155.941,255.181c0,0-73.745,39.048-73.745,0C82.224,216.177,155.941,255.181,155.941,255.181z"></path> <path d="M188.068,179.794c0,0-79.746-24.524-52.142-52.142C163.503,100.086,188.068,179.794,188.068,179.794z"></path> <path d="M428.852,254.552c0,49.668-40.276,89.931-89.935,89.931c-49.657,0-89.928-40.263-89.928-89.931 c0-49.672,40.271-89.928,89.928-89.928C388.575,164.624,428.852,204.88,428.852,254.552z"></path> </g> </svg> </button> <a class="ml-2 md:ml-4 px-2.5 py-1.5 font-bold rounded-md text-black bg-white hover:bg-slate-300 hover:scale-110 transition underline-none" href="/contribute">Contribute</a> <div class="ml-4 lg:hidden cursor-pointer"> <div id="menu-btn" class="h-8 w-8 relative" onclick="toggleNav()"> <div class="menu-btn-lines"></div> </div> </div> </div> </div> </div> <div class="top-0 bg-background hidden p-6 lg:hidden" id="mobile-nav"> <div class="grid grid-cols-2 gap-y-2 gap-x-4"> <a class="group mobile-nav-item " href="/topics"> <span class="group-hover:text-white">Topics</span> </a> <a class="group mobile-nav-item " href="/about"> <span class="group-hover:text-white">About Us</span> </a> <a class="group mobile-nav-item " href="/contact"> <span class="group-hover:text-white">Contact</span> </a> <a class="group mobile-nav-item" href="https://docs.genicsblog.com" target="_blank"> <span class="group-hover:text-white">Documentation</span> </a> </div> </div> </header> </nav> <header class="banner"> <div class="flex flex-col lg:flex-row p-2"> <div class="flex justify-center items-center lg:w-1/2 md:mb-0"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://user-images.githubusercontent.com/76690419/150726058-5520a79a-8f2a-4cac-8ceb-48a8ae2ac501.png" class="w-full md:w-3/4 lg:w-full rounded-xl shadow-xl aspect-video m-8" loading="lazy"> </div> <div class="flex flex-col justify-center lg:items-start w-full lg:w-1/2 lg:ml-12"> <h1 class="text-4xl font-black tracking-tight">Metamask authentication in Next.js with Clerk üîí</h1> <span class="mt-0.5 text-justify">Learn how to use add Metamask authentication to your Next.js app using Clerk.</span> <div class="flex items-center mt-8"> <img class="rounded-full w-14 h-14" src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/76690419" loading="lazy"> <div class="ml-4 leading-3"> <a class="font-extrabold text-xl" href="/author/avneesh/"> Avneesh Agarwal </a> <br> <span class="text-sm"> Posted on January 24, 2022 </span> </div> </div> <div class="mt-8"> <span>Category: </span> <a class="text-sm ml-2 archive-name !bg-web3 underline-none" href="/category/web3">#web3</a> </div> <div class="mt-4 sm:mt-3"> <span>Tags: </span> <a class="text-sm ml-2 my-0.5 archive-name !bg-authentication underline-none" href="/tag/authentication">#authentication</a> <a class="text-sm ml-2 my-0.5 archive-name !bg-next-js underline-none" href="/tag/next-js">#next-js</a> </div> </div> </div> </header> <main> <br> <div align="center"> <ins class="adsbygoogle" style="display: block" data-ad-format="fluid" data-ad-layout-key="-fb+5w+4e-db+86" data-ad-client="ca-pub-8114751086331659" data-ad-slot="3535897708"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> <section class="lg:flex"> <div class="md:text-lg m-6 md:mx-10 lg:mx-14 lg:w-full lg:max-w-[65%] xl:max-w-[70%]"> <div class="elevated"> <div class="notice w-full px-4 py-2 rounded-tl-2xl rounded-tr-2xl bg-slate-200 dark:bg-slate-800 space-y-4"> <span class="text-base italic leading-8"> Originally published at <a href="https://blog.avneesh.tech/metamask-authentication-in-nextjs-with-clerk" target="_blank" rel="nofollow noopener noreferrer">blog.avneesh.tech</a>. </span> </div> <article class="p-6 md:p-8"> <div class="mb-6" id="audio-player" data-audio-id="3468701"></div> <p data-beyondwords-marker="65d381b7-a8e6-45cd-824c-5c99c45e1a68">Hello everyone! As you have seen web3 is very popular right now. Clerk has recently released metamask authentication. So let‚Äôs take a look at how to implement it in our app!</p> <h2 id="what-is-clerk" data-beyondwords-marker="7c77da27-2284-4194-b786-5e7bd744cfe8">What is Clerk?</h2> <p data-beyondwords-marker="5a32a239-765f-4933-a73f-1c66a75237c7"><a href="https://clerk.dev/" rel="nofollow noopener noreferrer" target="_blank">Clerk</a> is one of the best ways to add authentication to a Next.js or a react application. It gives us things that are a pain to handle on our own like user management and multiple sessions.</p> <p data-beyondwords-marker="9c3cd226-3491-4181-84b5-3e2da11f412c">Why use Clerk?</p> <ul> <li data-beyondwords-marker="d8453063-0fe6-416f-bfa8-b23eaa39deb4">Easy to work with</li> <li data-beyondwords-marker="f35c4186-149f-4707-aaac-1d43cac5c6d5">Customizable</li> <li data-beyondwords-marker="ca08ffb7-16c5-4a18-a724-1cf0f007badb">2-step verification</li> <li data-beyondwords-marker="79e44bd3-0f24-421e-8058-47cce7067bbb">New device notifications</li> <li data-beyondwords-marker="86659207-6e1b-41c2-8464-55e91d8ba058">Single sign-on</li> <li data-beyondwords-marker="071c427e-481b-45e1-b140-f736e86f790e">Passwordless sign-in</li> <li data-beyondwords-marker="4a35c2f8-2378-4c2a-83bc-eb3bd3be5361">Multi-sessions</li> </ul> <h2 id="setup" data-beyondwords-marker="230ca077-35ec-4ef7-b2ed-fdbe3affe104">Setup</h2> <h3 id="setting-up-our-nextjs-app" data-beyondwords-marker="50520f62-85db-4031-9d7f-99d7493f6a16">Setting up our Next.js app</h3> <p data-beyondwords-marker="951bf82b-1046-46d8-b07c-567d487caefc">Creating a new Next.js app</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npx create-next-app next-clerk-demo
</code></pre></div></div> <p data-beyondwords-marker="a3706087-b340-467b-8394-37204fd6d442">Installing <a href="https://clerk.dev/" rel="nofollow noopener noreferrer" target="_blank">Clerk</a></p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm i @clerk/clerk-react <span class="c"># npm</span>
yarn add @clerk/clerk-react <span class="c"># yarn</span>
</code></pre></div></div> <h3 id="setting-up-clerk" data-beyondwords-marker="0d74ff81-4169-480c-a3df-8fc3124fab78">Setting up Clerk</h3> <p data-beyondwords-marker="4e19ecd2-585d-484a-996f-19314af20ec5">Go to <a href="https://clerk.dev" rel="nofollow noopener noreferrer" target="_blank">Clerk</a>, sign up/in, then create a new app. Select ‚ÄúSign in with Metamask‚Äù as the Authentication strategy-</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1642933471226/6hFpFKly_.png" alt="image.png" loading="lazy"></p> <p data-beyondwords-marker="eb7cf9db-eb77-4996-936c-80cc61a57757">If you now go to ‚ÄúAPI Keys‚Äù in the sidebar, you will be able to see your frontend API key. Copy it as we are going to need it soon.</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1642933643582/0uZGe5OP1.png" alt="image.png" loading="lazy"></p> <h2 id="integrating-clerk-into-nextjs" data-beyondwords-marker="8347be90-6e90-4f60-9f50-29220d7a86d2">Integrating Clerk into Next.js</h2> <h3 id="configuring-clerk" data-beyondwords-marker="f812cc32-868b-44ad-a87f-e483af8dadfc">Configuring Clerk</h3> <p data-beyondwords-marker="5e12a81a-ca04-4448-961d-7bd1984e5a5d">Inside <code class="language-plaintext highlighter-rouge">_app.js</code> wrap the in a ClerkProvider-</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="nc">ClerkProvider</span>
  <span class="na">frontendApi</span><span class="p">=</span><span class="si">{</span><span class="nx">clerkFrontendApi</span><span class="si">}</span>
  <span class="na">navigate</span><span class="p">=</span><span class="si">{</span><span class="p">(</span><span class="nx">to</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">router</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">to</span><span class="p">)</span><span class="si">}</span>
<span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nc">Component</span> <span class="si">{</span><span class="p">...</span><span class="nx">pageProps</span><span class="si">}</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nc">ClerkProvider</span><span class="p">&gt;</span>
</code></pre></div></div> <p data-beyondwords-marker="19ce10a9-960f-46bd-af91-fe1a67b7863b">Get router from useRouter-</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nf">useRouter</span><span class="p">();</span>
</code></pre></div></div> <p data-beyondwords-marker="d3fcd5f0-7c3f-44fe-a428-b204d54a064e">Import useRouter and ClerkProvider-</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">ClerkProvider</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@clerk/clerk-react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useRouter</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">next/router</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div> <p data-beyondwords-marker="8ec4d17e-ad51-4384-9675-642615473992">As you can see we also need the <code class="language-plaintext highlighter-rouge">clerkFrontendApi</code>, so create a new variable-</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">clerkFrontendApi</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_CLERK_FRONTEND_API</span><span class="p">;</span>
</code></pre></div></div> <p data-beyondwords-marker="e48ebf8c-304f-4660-8de1-3150457b26ce">We are going to use env variables for the API key, so create a new file <code class="language-plaintext highlighter-rouge">.env.local</code>, and add <code class="language-plaintext highlighter-rouge">NEXT_PUBLIC_CLERK_FRONTEND_API</code>-</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NEXT_PUBLIC_CLERK_FRONTEND_API=YOUR_API_KEY
</code></pre></div></div> <p data-beyondwords-marker="6723390b-da43-41fe-a52e-e128f896a61c">Paste in the API key that you got from the clerk dashboard. You also going to restart the dev server-</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run dev <span class="c"># npm</span>

yarn dev <span class="c"># yarn</span>
</code></pre></div></div> <h3 id="creating-the-sign-in-button" data-beyondwords-marker="c48778bb-e850-41cc-91d9-bc7d8c451219">Creating the sign-in button</h3> <p data-beyondwords-marker="b53a04ce-5f7d-4a01-9fb7-25b043c563a1">Inside <code class="language-plaintext highlighter-rouge">index.js</code> add the following-</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="nc">SignedOut</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nc">SignInWithMetamaskButton</span><span class="p">&gt;</span>Sign in with Metamask<span class="p">&lt;/</span><span class="nc">SignInWithMetamaskButton</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nc">SignedOut</span><span class="p">&gt;</span>
</code></pre></div></div> <p data-beyondwords-marker="5699f559-7a47-415d-8c21-d5501dcdabc6">You also need to import the following-</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span>
  <span class="nx">SignedIn</span><span class="p">,</span>
  <span class="nx">SignedOut</span><span class="p">,</span>
  <span class="nx">SignInWithMetamaskButton</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@clerk/clerk-react</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div> <p data-beyondwords-marker="5a9b3a7e-62ee-4c4d-b7b7-98258f699a8d">Now, if you go to <a href="http://localhost:3000/" rel="nofollow noopener noreferrer" target="_blank">http://localhost:3000/</a>, you will be able to see a sign-in button!</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1642936017421/NM4fTVnvBE.png" alt="image.png" loading="lazy"></p> <p data-beyondwords-marker="a38aff24-f565-4a7d-965b-8f38ae2f8d34">If you try clicking on it, it works ü•≥.</p> <h3 id="showing-userprofile-and-address-if-the-user-is-logged-in" data-beyondwords-marker="e914e366-809b-4694-866f-93e10cbdae10">Showing UserProfile and address if the user is logged in</h3> <p data-beyondwords-marker="015a6e67-401f-495b-b87b-4230dca7a121">Show a User component if the user is SignedIn-</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="nc">SignedIn</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nc">User</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nc">SignedIn</span><span class="p">&gt;</span>
</code></pre></div></div> <p data-beyondwords-marker="ab4a192f-0f98-45ff-99d0-6465c5182e65">Create a new component in the components folder as <code class="language-plaintext highlighter-rouge">User.js</code> and add the following-</p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">UserButton</span><span class="p">,</span> <span class="nx">useUser</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@clerk/clerk-react</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">User</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="nf">useUser</span><span class="p">();</span>

  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
  <span class="nf">return </span><span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">UserButton</span> <span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">web3Wallets</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">web3Wallet</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">User</span><span class="p">;</span>
</code></pre></div></div> <p data-beyondwords-marker="ed5b236f-97e4-4a18-a85e-038f6634e930">Clerk provides a <code class="language-plaintext highlighter-rouge">useUser</code> hook which allows us to access the user‚Äôs details like the wallet address.</p> <p data-beyondwords-marker="84a5afde-ebba-43da-829c-bef9f47ae7f2">If you now login into the app then, it would show you a profile picture and your address-</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1642936338400/cP77poM852.png" alt="image.png" loading="lazy"></p> <p data-beyondwords-marker="7e648cec-ce37-460f-a1d7-5df20fd1dd51">If you click on the user profile, it will show you a popup. You can click on manage account to add details like name, email, profile picture, etc.</p> <h3 id="keeping-the-users-on-our-site" data-beyondwords-marker="f6dc0e87-f5c8-4431-92c7-240c0f99dab0">Keeping the user‚Äôs on our site</h3> <p data-beyondwords-marker="3a8151f0-7be8-4b53-811b-5ea1fc4adb05">When you clicked on manage account, you might have noticed that the URL was completely different and was not looking good. So let‚Äôs see how to keep users on our site itself!</p> <p data-beyondwords-marker="986a4daa-8602-40ee-91fd-ede4923a4556">Create the sign in, sign up, and the user page Inside the <code class="language-plaintext highlighter-rouge">pages</code> folder we will create 3 folders named</p> <ul> <li data-beyondwords-marker="836e868d-0c74-48f9-929c-bcbd76a94e99">sign-in</li> <li data-beyondwords-marker="27da1b84-a43d-48c8-bd27-c4091ad28ab7">sign-up</li> <li data-beyondwords-marker="149e10bd-926d-4d2f-b57b-2305baea16f7">user</li> </ul> <p data-beyondwords-marker="059bd931-ae82-433d-bd5e-fb2e15e09923">Inside all the folders we will create a file named <code class="language-plaintext highlighter-rouge">[[‚Ä¶index]].js</code> Here is the code for all the files-</p> <p data-beyondwords-marker="a91177dc-b1c2-45f4-9647-47695431a826"><strong><code class="language-plaintext highlighter-rouge">sign-in/[[‚Ä¶index]].js</code></strong></p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SignIn</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@clerk/clerk-react</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nf">SignInPage</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">&lt;</span><span class="nc">SignIn</span> <span class="na">path</span><span class="p">=</span><span class="s">"/sign-in"</span> <span class="na">routing</span><span class="p">=</span><span class="s">"path"</span> <span class="p">/&gt;;</span>
<span class="p">}</span>
</code></pre></div></div> <p><strong><code class="language-plaintext highlighter-rouge">sign-up/[[‚Ä¶index]].js</code></strong></p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SignUp</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@clerk/clerk-react</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nf">SignUpPage</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">&lt;</span><span class="nc">SignUp</span> <span class="na">path</span><span class="p">=</span><span class="s">"/sign-up"</span> <span class="na">routing</span><span class="p">=</span><span class="s">"path"</span> <span class="p">/&gt;;</span>
<span class="p">}</span>
</code></pre></div></div> <p><strong><code class="language-plaintext highlighter-rouge">user/[[‚Ä¶index]].js</code></strong></p> <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">UserProfile</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@clerk/clerk-react</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nf">UserProfilePage</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">&lt;</span><span class="nc">UserProfile</span> <span class="na">path</span><span class="p">=</span><span class="s">"/user"</span> <span class="na">routing</span><span class="p">=</span><span class="s">"path"</span> <span class="p">/&gt;;</span>
<span class="p">}</span>
</code></pre></div></div> <p>Now, go to the clerk dashboard, and click on paths in the sidebar. Now edit the URLs with the following-</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1642936667724/670892Zym.png" alt="image.png" loading="lazy"></p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1642936685668/_fkztjnDg.png" alt="image.png" loading="lazy"></p> <p>If you now try signing in, signing up, or viewing your profile then the user will be on the website itself (localhost in development).</p> <div class="mb-6 aspect-video"> <iframe src="https://www.loom.com/embed/f43d9d81f60947f28b30f7346f0d8ae0?hide_owner=true&amp;hide_share=true&amp;hide_title=true&amp;hideEmbedTopBar=true" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" class="w-full h-full rounded-xl" loading="lazy"> </iframe> </div> <h2 id="useful-links">Useful links</h2> <p><a href="https://clerk.dev/" rel="nofollow noopener noreferrer" target="_blank">Clerk</a></p> <p><a href="https://github.com/avneesh0612/Next-Clerk-metamask" rel="nofollow noopener noreferrer" target="_blank">GitHub Repo</a></p> <p><a href="https://blog.avneesh.tech/mastering-clerk-authentication-with-the-nextjs-standard-setup" rel="nofollow noopener noreferrer" target="_blank">Read more about Clerk</a></p> <p><a href="https://links.avneesh.tech/" rel="nofollow noopener noreferrer" target="_blank">Let‚Äôs connect</a></p> </article> <hr> <div class="px-6 pb-6 md:px-8 md:pb-8 flex flex-col items-center rounded-bl-2xl rounded-br-2xl"> <p class="text-center mb-4"> Join discussions at <a href="https://discord.genicsblog.com" target="_blank" class="cta-link"> our discord server &gt; </a> <br> Did you learn something new? Add a comment below and spread the word! </p> <div class="grid grid-flow-col gap-6"> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://facebook.com/sharer.php?u=https://genicsblog.com/avneesh/metamask-authentication-in-next-js-with-clerk" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/facebook.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://api.whatsapp.com/send?text=Checkout%20this%20amazing%20article%20at%20Genics%20Blog%20'Metamask%20authentication%20in%20Next.js%20with%20Clerk%20%F0%9F%94%92':%20https://genicsblog.com/avneesh/metamask-authentication-in-next-js-with-clerk" onclick="window.open(this.href, 'whatsapp-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/whatsapp.svg" class="social-image w-10 h-10" loading="lazy"> </a> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://genicsblog.com/avneesh/metamask-authentication-in-next-js-with-clerk" onclick="window.open(this.href, 'linkedin-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/linkedin.svg" class="social-image w-7 h-7" loading="lazy"> </a> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://twitter.com/intent/tweet?text=Check%20out%20this%20amazing%20article%20by%20@avneesh0612%20at%20@genicsblog:%20Metamask%20authentication%20in%20Next.js%20with%20Clerk%20%F0%9F%94%92&amp;url=https://genicsblog.com/avneesh/metamask-authentication-in-next-js-with-clerk" onclick="window.open(this.href, 'twitter-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/twitter.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://www.snapchat.com/scan?attachmentUrl=https://genicsblog.com/avneesh/metamask-authentication-in-next-js-with-clerk" onclick="window.open(this.href, 'snapchat-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/snapchat.svg" class="social-image w-14 h-14 -m-2" loading="lazy"> </a> </div> </div> </div> </div> <aside class="m-6 lg:mr-10 lg:-ml-4 lg:max-w-[25%] xl:max-w-[20%]"> <figure class="p-6 md:p-8 elevated"> <img class="w-24 h-24 rounded-full mx-auto" src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/76690419" alt="Avneesh Agarwal" loading="lazy"> <div class="pt-4 space-y-4"> <figcaption class="font-medium text-center"> <div> <a href="/author/avneesh/" class="text-xl font-bold"> Avneesh Agarwal </a> </div> <div class="text-slate-700 dark:text-slate-200 text-sm"> Fullstack web dev </div> </figcaption> <p class="leading-5 font-medium text-justify">A fullstack web developer, designer, content creator and student.</p> </div> </figure> <figure class="bg-white dark:bg-background rounded-2xl p-6 shadow-xl shadow-slate-200 dark:shadow-none mt-8 aspect-square w-full"> <div align="center"> <ins class="adsbygoogle" style="display: block" data-ad-format="auto" data-full-width-responsive="true" data-ad-client="ca-pub-8114751086331659" data-ad-slot="8698895132"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> </figure> <figure class="px-6 pb-6 md:px-8 mt-8 elevated lg:sticky lg:top-24"> <img src="https://dash.beyondwords.io/logo-dark.svg" class="w-full aspect-video hidden dark:block" loading="lazy"> <img src="https://dash.beyondwords.io/logo.svg" class="w-full aspect-video dark:hidden" loading="lazy"> <h4> BeyondWords <span class="text-xs text-white px-3 py-1 align-middle rounded-xl bg-primary">Sponsored</span> </h4> <p>BeyondWords is an AI voice and audio publishing platform that brings frictionless audio to writers, newsrooms, and businesses!</p> <div class="flex justify-center"> <a class="px-3 py-1 mt-4 linkbtn underline-none" href="https://beyondwords.io?utm_source=genicsblog.com&amp;utm_medium=cpc&amp;utm_campaign=advertisement" rel="nofollow" target="_blank"> Check it out &gt; </a> </div> </figure> </aside> </section> <br> <div align="center"> <ins class="adsbygoogle" style="display: block" data-ad-format="fluid" data-ad-layout-key="-fb+5w+4e-db+86" data-ad-client="ca-pub-8114751086331659" data-ad-slot="3535897708"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> <br> <div class="flex justify-center mx-6 md:mx-10 lg:mx-14"> <div class="p-8 md:p-12 grid grid-flow-row sm:grid-flow-col gap-x-8 items-center justify-between elevated"> <section class="md:mr-4"> <h3>Contribute to the Genics Blog!</h3> <p> Genics Blog is a purely <a href="https://github.com/genicsblog" rel="nofollow noreferrer noopener" target="_blank" class="cta-link">open source</a> publication. Authors at Genics post highly resourceful content on varied topics relevant to the developer community. Join us and start publishing today! </p> </section> <a class="px-4 py-1.5 mt-8 md:mt-0 md:ml-4 linkbtn underline-none font-bold text-lg" href="/contribute"> Contribute </a> </div> </div> <h1 class="mx-8 mt-12 md:mx-10 lg:mx-14 -mb-4 lg:-mb-8">Comments</h1> <section class="flex flex-col-reverse lg:flex-row"> <div id="comments" class="md:text-lg m-8 md:m-10 lg:m-14 lg:w-full lg:max-w-[65%] xl:max-w-[70%]"></div> <aside class="m-8 md:m-10 lg:my-14 lg:mr-10 lg:-ml-4 md:mr-8 lg:max-w-[25%] xl:max-w-[20%]"> <div class="p-6 md:p-8 space-y-4 lg:sticky lg:top-24 rounded-2xl bg-white dark:bg-background shadow-xl dark:shadow-none shadow-slate-200"> <p class="leading-5 font-medium text-justify"> Please adhere to our <a href="/code-of-conduct">Code of Conduct</a> while adding a comment. Respect other's opinion. </p> </div> </aside> </section> <div class="m-8 md:m-10 lg:m-14"> <div class="flex justify-center"> <h2>Related content</h2> </div> <div class="flex flex-col sm:grid sm:grid-cols-2 lg:grid-cols-3 sm:gap-4 md:gap-4 lg:gap-6 text-center"> <a class="mt-4 mb-6 px-6 pt-2 pb-6 postbox hover:border-backend dark:hover:!border-backend underline-none" href="/dhruva/sessions-vs-jwts-a-complete-guide-to-authentication"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1652269876694/PfE5eFaEj.png" alt="Sessions vs JWTs - A Complete Guide to Authentication" title="Sessions vs JWTs - A Complete Guide to Authentication" class="aspect-video w-full mt-4" loading="lazy"> <div class="mt-6 mb-16"> <h2 class="line-clamp-2">Sessions vs JWTs - A Complete Guide to Authentication</h2> <p class="line-clamp-3">Authentication or auth for short is the process where a server recognizes the identity of a user. This post goes over the methods for implementing authentication, each of their drawbacks, and which one you may want to choose.</p> </div> <div class="absolute mt-20 right-6 bottom-6 left-6"> <div class="flex items-center justify-between mt-6"> <div class="flex items-center"> <img src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/66675022" alt="Dhruva Srinivas's Profile Picture" title="Dhruva Srinivas's Profile Picture" class="rounded-full w-10 h-10" width="40px" height="40px" loading="lazy"> <span class="ml-2">Dhruva</span> </div> <span>May 14, 2022</span> </div> </div> </a> <a class="mt-4 mb-6 px-6 pt-2 pb-6 postbox hover:border-web dark:hover:!border-web underline-none" href="/usman/how-to-use-mongoose-with-next-js-for-mongodb"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1650187197534/EONUGmGt8.png" alt="How to use Mongoose with Next.js for MongoDB?" title="How to use Mongoose with Next.js for MongoDB?" class="aspect-video w-full mt-4" loading="lazy"> <div class="mt-6 mb-16"> <h2 class="line-clamp-2">How to use Mongoose with Next.js for MongoDB?</h2> <p class="line-clamp-3">Learn using Mongoose for MongoDB by building a hands-on project!</p> </div> <div class="absolute mt-20 right-6 bottom-6 left-6"> <div class="flex items-center justify-between mt-6"> <div class="flex items-center"> <img src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://i.ibb.co/Fs6Kww8/PFP.jpg" alt="Usman Sabuwala's Profile Picture" title="Usman Sabuwala's Profile Picture" class="rounded-full w-10 h-10" width="40px" height="40px" loading="lazy"> <span class="ml-2">Usman</span> </div> <span>Apr 17, 2022</span> </div> </div> </a> <a class="mt-4 mb-6 px-6 pt-2 pb-6 postbox hover:border-web dark:hover:!border-web underline-none" href="/anurag/basics-of-e2e-testing-and-integrating-cypress-with-next-js"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://user-images.githubusercontent.com/46792249/156170962-605f6ce9-2924-411b-8d39-888c351d0ada.png" alt="Basics of E2E Testing &amp; Quickstart Cypress with Next.js" title="Basics of E2E Testing &amp; Quickstart Cypress with Next.js" class="aspect-video w-full mt-4" loading="lazy"> <div class="mt-6 mb-16"> <h2 class="line-clamp-2">Basics of E2E Testing &amp; Quickstart Cypress with Next.js</h2> <p class="line-clamp-3">Learn the basics of E2E Testing using Cypress in your Next.js app from this start guide!</p> </div> <div class="absolute mt-20 right-6 bottom-6 left-6"> <div class="flex items-center justify-between mt-6"> <div class="flex items-center"> <img src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/77309809?v=4" alt="anuragkr's Profile Picture" title="anuragkr's Profile Picture" class="rounded-full w-10 h-10" width="40px" height="40px" loading="lazy"> <span class="ml-2">anuragkr</span> </div> <span>Mar 1, 2022</span> </div> </div> </a> </div> </div> </main> <footer class="px-12 py-8 text-center"> <div class="flex justify-center"> <a aria-label="Genics Blog's Discord server" class="mr-2 underline-none hover:scale-125 transition" href="https://discord.genicsblog.com" target="_blank"> <img alt="Discord's logo" src="/assets/images/social/discord.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a aria-label="Genics Blog's GitHub organization" class="mx-4 underline-none hover:scale-125 transition" href="https://github.com/genicsblog" target="_blank" rel="nofollow noopener noreferrer"> <img alt="GitHub's logo" src="/assets/images/social/github.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a aria-label="Genics Blog's Twitter page" class="ml-2 underline-none hover:scale-125 transition" href="https://twitter.com/genicsblog" target="_blank" rel="nofollow noopener noreferrer"> <img alt="Twitter's logo" src="/assets/images/social/twitter.svg" class="social-image w-8 h-8" loading="lazy"> </a> </div> <br> ¬© 2021 <a href="/">Genics Blog</a> <br> Built with <a href="https://jekyllrb.com" target="_blank" rel="nofollow noopener noreferrer">Jekyll</a>. Hosted on <a href="https://github.com" target="_blank" rel="nofollow noopener noreferrer">GitHub</a>. <br><br> Developed by <a href="https://github.com/gouravkhunger" rel="nofollow noopener noreferrer" target="_blank"> Gourav Khunger</a>. Thanks to the <a href="https://github.com/genicsblog/genicsblog.com/graphs/contributors" rel="nofollow noopener noreferrer" target="_blank"> contributors</a>! <br><br> <a class="nav-item text-white" href="/terms">T&amp;C</a> <a class="nav-item text-white" href="/privacy-policy">Privacy Policy</a> <a class="nav-item text-white" href="/licensing">Licensing</a> </footer> <div class="hidden fixed top-0 w-full h-full p-6 md:p-14 backdrop-blur-md cursor-pointer z-20" id="search-container"> <div class="p-4 bg-white dark:bg-slate-800 mx-auto w-full max-h-full sm:w-3/4 lg:w-1/2 content-center rounded-lg shadow-md shadow-slate-200 dark:shadow-none cursor-auto overflow-auto" id="search-box"> <div class="flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 stroke-slate-400" fill="none" viewbox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path> </svg> <input type="text" class="w-full h-full pl-4 text-2xl outline-none dark:bg-slate-800" id="search-input" placeholder="Search..."> <span class="hidden lg:block text-sm text-gray-600 text-right tracking-tight ml-2"> <kbd class="bg-gray-200 dark:bg-slate-600 dark:text-gray-200 rounded-md shadow-sm py-1 px-2">Esc</kbd> </span> </div> <div id="results-container"></div> </div> </div> <script src="/assets/js/theme.js" data-no-instant></script> <script src="/assets/js/search.js" data-no-instant></script> <script src="/assets/js/prism.js" data-no-instant></script> <script src="/assets/js/instantclick.min.js" data-no-instant></script> <script data-no-instant>InstantClick.on("change",()=>{setTheme(),Prism.highlightAll(),initCodeBlocks(),window.onscroll=(()=>{setStickyness()}),document.getElementById("search-container").addEventListener("click",t=>{"search-container"===t.target.id&&hideSearch()});const t=window.location.pathname+window.location.search+window.location.hash;gtag("set","page_path",t);const e=document.getElementById("audio-player");if(e)new BeyondWords.Player({projectId:11987,target:e,playerStyle:"large",widgetStyle:"small",skipButtonStyle:"seconds",highlightColor:isDark()?DARK_HIGHLIGHT:LIGHT_HIGHLIGHT,contentId:e.dataset.audioId});const n=document.getElementById("comments");if(n){const t={src:"https://giscus.app/client.js","data-repo":"genicsblog/comments","data-repo-id":"R_kgDOG0-Vlw","data-category":"Announcements","data-category-id":"DIC_kwDOG0-Vl84CP8Dz","data-mapping":"pathname","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":`${isDark()?GISCUS_DARK:GISCUS_LIGHT}`,"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");for(key in t)e.setAttribute(key,t[key]);n.appendChild(e)}}),InstantClick.on("receive",()=>{BeyondWords.Player.destroyAll(),"function"==typeof window.cleanup&&(window.cleanup(),window.cleanup())}),InstantClick.init("mousedown");</script> </body> </html>