<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" content="The complete guide to paginating *just* a room database (without Network level pagination) with the Paging 3 library in Android using Kotlin."> <meta name="twitter:description" content="The complete guide to paginating *just* a room database (without Network level pagination) with the Paging 3 library in Android using Kotlin."> <meta property="og:description" content="The complete guide to paginating *just* a room database (without Network level pagination) with the Paging 3 library in Android using Kotlin."> <meta property="og:title" content="Pagination in Android Room Database using the Paging 3 Library"> <meta property="og:image" content="https://user-images.githubusercontent.com/46792249/164977196-3de454f4-8a7e-4feb-9d1b-cfd6ea53ba03.jpg"> <meta property="og:image:alt" content="Pagination in Android Room Database using the Paging 3 Library"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="@genicsblog"> <meta name="twitter:image" content="https://user-images.githubusercontent.com/46792249/164977196-3de454f4-8a7e-4feb-9d1b-cfd6ea53ba03.jpg"> <meta name="twitter:creator" content="@gourav_khunger"> <meta property="og:type" content="article"> <meta property="article:section" content="android"> <meta property="article:tag" content="intermediates, app-development, libraries"> <meta property="article:author" content="https://genicsblog.com/author/gouravkhunger/"> <meta property="article:published_time" content="2022-04-24T00:00:00+0000"> <meta property="og:url" content="https://genicsblog.com/gouravkhunger/pagination-in-android-room-database-using-the-paging-3-library"> <meta name="theme-color" content="#16161f"> <meta name="msapplication-TileColor" content="#16161f"> <meta name="msapplication-navbutton-color" content="#16161f"> <meta name="apple-mobile-web-app-status-bar-style" content="#16161f"> <link rel="canonical" href="https://genicsblog.com/gouravkhunger/pagination-in-android-room-database-using-the-paging-3-library"> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Fira+Code&amp;family=Sen&amp;display=swap" rel="stylesheet"> <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon"> <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png"> <link rel="stylesheet" href="/assets/css/theme.css"> <link rel="stylesheet" href="/assets/css/prism.css"> <link rel="manifest" href="/manifest.json"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-KQJM9Z9N1Z"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KQJM9Z9N1Z");</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8114751086331659" crossorigin="anonymous"></script> <title>Pagination in Android Room Database using the Paging 3 Library</title> </head> <body> <nav> <p class="bg-primary p-3 text-center text-white font-medium flex flex-col sm:block"> <span class="md:hidden px-1">Connect with us on discord to stay updated.</span> <span class="hidden md:inline px-1">Connect with us on discord to stay updated on the blog's development.</span> <a href="https://discord.genicsblog.com" target="_blank" class="font-bold underline header-anchor hover:text-slate-300" rel="nofollow noopener noreferrer"> Join &gt; </a> </p> <header class="w-full top-0 z-10" id="navbar"> <div class="bg-background max-h-20 py-1 px-2 sm:px-8 lg:px-8 mx-auto"> <div class="flex justify-between h-16"> <div class="flex px-2 lg:px-0"> <a class="group flex-shrink-0 flex items-center logo-anchor" href="/" aria-label="Home Page Link"> <div class="flex items-center space-x-2 whitespace-nowrap flex-nowrap"> <div class="h-8 w-8 mx-2"> <svg class="h-8 w-8 fill-white group-hover:fill-slate-300" viewbox="0 0 79.784508 91.197495" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs2"></defs> <g id="layer1" transform="translate(-68.235445,-52.679805)"> <path id="path962" style=" stroke: none; stroke-width: 0.999999px; stroke-linecap: butt; stroke-linejoin: miter; stroke-opacity: 1; " d="m 408.73047,210.44336 -139.49414,80.59961 0.87109,162.49414 52.71289,-32.94922 85.34766,48.85938 87.42773,-48.85743 -0.63476,-53.22851 -84.8711,-0.88477 v 27.79297 h 56.02735 v 9.45508 l -58.31446,33.66797 -56.13085,-32.4082 0.63476,-66.94922 55.81836,-32.22461 57.25195,32.76172 82.41016,-47.75782 z m 0.43945,32.62695 83.28125,48.08203 -26.93555,15.55274 -57.21484,-33.0332 -84.18359,48.60351 v 66.39453 l -25.48047,14.71094 0.084,-96.54102 z" transform="scale(0.26458333)"></path> <path style=" stroke: none; stroke-width: 0.264583px; stroke-linecap: butt; stroke-linejoin: miter; stroke-opacity: 1; " d="m 81.889144,125.74786 26.204966,15.12944 36.92584,-21.31914 V 88.998204 l -7.22758,4.172845 V 115.03627 L 108.1902,132.12709 89.310794,121.22706 Z" id="path1416"></path> </g> </svg> </div> <span class="font-bold hidden sm:block text-xl tracking-tight text-white group-hover:text-slate-300"> Genics Blog</span> </div> </a> </div> <div class="flex items-center h-16"> <div class="hidden lg:block"> <a class="nav-item text-white" href="/topics">Topics</a> <a class="nav-item text-white" href="/about">About Us</a> <a class="nav-item text-white" href="/contact">Contact</a> <a class="nav-item text-white" target="_blank" href="https://docs.genicsblog.com">Docs</a> </div> <button onclick="showSearch()" aria-label="Search across the site..."> <svg xmlns="http://www.w3.org/2000/svg" class="ml-4 h-6 w-6 stroke-white hover:stroke-slate-300" fill="none" viewbox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path> </svg> </button> <button type="button" class="ml-2" onclick="saveTheme(isDark() ? LIGHT : DARK)" title="Ctrl + Shift + L"> <svg viewbox="0 0 512 512" class="h-8 w-8 fill-white hover:fill-slate-300 transition-all" id="theme-toggle-icon"> <g> <path d="M262.524,164.624c-49.466,0-89.592,40.119-89.592,89.596c0,49.487,40.126,89.606,89.592,89.606 c49.487,0,89.613-40.119,89.613-89.606C352.138,204.743,312.012,164.624,262.524,164.624z M262.524,320.136 c-36.39,0-65.902-29.513-65.902-65.916c0-36.396,29.513-65.903,65.902-65.903c36.41,0,65.924,29.506,65.924,65.903 C328.448,290.623,298.935,320.136,262.524,320.136z"></path> <path d="M264.078,149.221c0,0-39.031-73.758,0-73.758C303.103,75.462,264.078,149.221,264.078,149.221z"></path> <path d="M261.922,363.328c0,0,39.053,73.737,0,73.737C222.905,437.045,261.922,363.328,261.922,363.328z"></path> <path d="M186.536,331.194c0,0-24.539,79.766-52.142,52.148C106.817,355.746,186.536,331.194,186.536,331.194z"></path> <path d="M155.941,255.181c0,0-73.745,39.048-73.745,0C82.224,216.177,155.941,255.181,155.941,255.181z"></path> <path d="M188.068,179.794c0,0-79.746-24.524-52.142-52.142C163.503,100.086,188.068,179.794,188.068,179.794z"></path> <path d="M428.852,254.552c0,49.668-40.276,89.931-89.935,89.931c-49.657,0-89.928-40.263-89.928-89.931 c0-49.672,40.271-89.928,89.928-89.928C388.575,164.624,428.852,204.88,428.852,254.552z"></path> </g> </svg> </button> <a class="ml-4 px-2.5 py-1.5 font-bold rounded-md text-black bg-white hover:bg-slate-300 hover:scale-110 transition underline-none" href="/contribute">Contribute</a> <div class="ml-4 lg:hidden cursor-pointer"> <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 stroke-white hover:stroke-slate-300" id="menu-open" viewbox="0 0 24 24" onclick="toggleNav()"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"></path> </svg> <svg xmlns="http://www.w3.org/2000/svg" class="menu-close h-8 w-8 hidden stroke-white hover:stroke-slate-300" id="menu-close" viewbox="0 0 24 24" onclick="toggleNav()"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path> </svg> </div> </div> </div> </div> <div class="top-0 bg-background hidden p-6 lg:hidden" id="mobile-nav"> <div class="grid grid-cols-2 gap-y-2 gap-x-4"> <a class="group mobile-nav-item " href="/topics"> <span class="group-hover:text-white">Topics</span> </a> <a class="group mobile-nav-item " href="/about"> <span class="group-hover:text-white">About Us</span> </a> <a class="group mobile-nav-item " href="/contact"> <span class="group-hover:text-white">Contact</span> </a> <a class="group mobile-nav-item" href="https://docs.genicsblog.com" target="_blank"> <span class="group-hover:text-white">Documentation</span> </a> </div> </div> </header> </nav> <header class="banner"> <div class="flex flex-col lg:flex-row p-2"> <div class="flex justify-center items-center lg:w-1/2 md:mb-0"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://user-images.githubusercontent.com/46792249/164977196-3de454f4-8a7e-4feb-9d1b-cfd6ea53ba03.jpg" class="w-full md:w-3/4 lg:w-full rounded-xl shadow-xl aspect-video m-8" loading="lazy"> </div> <div class="flex flex-col justify-center lg:items-start w-full lg:w-1/2 lg:ml-12"> <h1 class="text-4xl font-black tracking-tight">Pagination in Android Room Database using the Paging 3 Library</h1> <span class="mt-0.5 text-justify">The complete guide to paginating *just* a room database (without Network level pagination) with the Paging 3 library in Android using Kotlin.</span> <div class="flex items-center mt-8"> <img class="rounded-full w-14 h-14" src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/46792249" loading="lazy"> <div class="ml-4 leading-3"> <a class="font-extrabold text-xl" href="/author/gouravkhunger/"> Gourav Khunger </a> <br> <span class="text-sm"> Posted on April 24, 2022 </span> </div> </div> <div class="mt-8"> <span>Category: </span> <a class="text-sm ml-2 archive-name !bg-android underline-none" href="/category/android">#android</a> </div> <div class="mt-4 sm:mt-3"> <span>Tags: </span> <a class="text-sm ml-2 my-0.5 archive-name !bg-intermediates underline-none" href="/tag/intermediates">#intermediates</a> <a class="text-sm ml-2 my-0.5 archive-name !bg-app-development underline-none" href="/tag/app-development">#app-development</a> <a class="text-sm ml-2 my-0.5 archive-name !bg-libraries underline-none" href="/tag/libraries">#libraries</a> </div> </div> </div> </header> <main> <section class="lg:flex"> <div class="md:text-lg m-6 md:m-10 lg:m-14 lg:w-full lg:max-w-[65%] xl:max-w-[70%]"> <div class="elevated"> <article class="p-6 md:p-8"> <div class="mb-6" id="audio-player" data-audio-id="4052597"></div> <p>The <a href="https://developer.android.com/topic/libraries/architecture/paging/v3-overview" rel="nofollow noopener noreferrer" target="_blank">Paging 3 library</a>, a part the new set of <a href="https://developer.android.com/jetpack" rel="nofollow noopener noreferrer" target="_blank">Android Jetpack</a> libraries, provides a robust way of paginating large sets of data in Android whether it is loaded from a room database or from a network layer.</p> <p>The library provides 3 different utilities for loading paginated data:</p> <ul> <li>Solely from a local Room DB.</li> <li>Solely from a webservice.</li> <li>From a webservice while storing it in a Room Database for offline use (combination of the above).</li> </ul> <p>In this tutorial, we will focus on implementing pagination only for a <strong>local Room Databases using Paging 3</strong>.</p> <p>If you are interested in just the code for the project, please check out this GitHub repository:</p> <div class="linkpreview"> <a class="underline-none" href="https://github.com/gouravkhunger/room-paging3-demo" rel="nofollow noopener noreferrer" target="_blank"> <div class="p-4 lg:p-6 flex flex-col md:flex-row"> <img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://opengraph.githubassets.com/25ba87911b54a79c093e0973412307d86dd344a70f82e84cf23d5c06189ae0b4/gouravkhunger/room-paging3-demo" class="w-full md:max-w-[40%] rounded-xl aspect-video lg:m-4" loading="lazy"> <div class="mt-4 flex flex-col justify-center w-full md:w-1/2 md:ml-4 md:mt-0"> <h3 class="tracking-tight line-clamp-2 lg:text-3xl"> gouravkhunger/paging3-room-demo </h3> <p class="text-sm lg:text-base line-clamp-3">Sample app for tutorial: Pagination in Android Room Database using the Paging 3 Library - GitHub - gouravkhunger/room-paging3-demo: Sample app for tutorial: Pagination in Android Room Database using the Paging 3 Library</p> <span class="text-gray-500 dark:text-gray-400 text-sm"> github.com &gt; </span> </div> </div> </a> </div> <h1 id="prerequisites">Prerequisites</h1> <h2 id="what-is-pagination">What is pagination?</h2> <p>Pagination is a way of breaking down huge pieces of data into smaller chunks and serving them one at a time. This improves the user experience as the entirety of the data doesn’t need to be loaded all at once. As soon as the user scrolls to the bottom of the screen, the next page of data is loaded.</p> <h2 id="what-are-we-building">What are we building?</h2> <p>Throughout this tutorial, we will implement pagination for a large dataset of texts stored in a Room Database in an Android app.</p> <p>We will build a basic application which shows a list of items in a RecyclerView using Paging 3. The data is loaded with a delay of 1 second to simulate data being loaded (for demo purpose only).</p> <p>There will be a progress bar at the end of the RecyclerView.</p> <p>Here’s a short demo of the app:</p> <div class="mb-6 aspect-video"> <iframe src="https://www.youtube.com/embed/D-vw0ITD9Ww" class="w-full h-full rounded-xl" allowfullscreen="" loading="lazy"> </iframe> </div> <h2 id="expected-knowledge">Expected knowledge</h2> <p>This tutorial expects you to have intermediate level knowledge in Android app development. You should have a basic understanding of the concepts of <strong>Room Databases</strong>, <strong>RecyclerView</strong> and how to use them although I will explain what’s going on in brief.</p> <p>You are not expected to have any knowledge of Paging 3!</p> <h2 id="setup">Setup</h2> <p>We will be using an Empty Activity as a starter project. If you don’t know how to create a new Android studio project, do read this article:</p> <div class="linkpreview"> <a class="underline-none" href="https://genicsblog.com/how-to-create-your-first-android-app-using-android-studio" rel="dofollow" target="_self"> <div class="p-4 lg:p-6 flex flex-col md:flex-row"> <img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1631777577034/9OA5pi8ph.png" class="w-full md:max-w-[40%] rounded-xl aspect-video lg:m-4" loading="lazy"> <div class="mt-4 flex flex-col justify-center w-full md:w-1/2 md:ml-4 md:mt-0"> <h3 class="tracking-tight line-clamp-2 lg:text-3xl"> How to create your first Android app using Android Studio? </h3> <p class="text-sm lg:text-base line-clamp-3">The complete guide to learn how to create an app using Android Studio IDE.</p> <span class="text-gray-500 dark:text-gray-400 text-sm"> genicsblog.com &gt; </span> </div> </div> </a> </div> <p>The package name I have for my app is <code class="language-plaintext highlighter-rouge">com.example.paginationdemo</code>.</p> <p>Next, we need some dependencies in our app to use the libraries we need. Open <strong><code class="language-plaintext highlighter-rouge">app/build.gradle</code></strong> file and add these lines to the <code class="language-plaintext highlighter-rouge">dependencies</code> and <code class="language-plaintext highlighter-rouge">plugins</code> block:</p> <div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plugins</span> <span class="o">{</span>
    <span class="c1">// ...other plugins</span>
    <span class="n">id</span> <span class="s1">'kotlin-kapt'</span>
<span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="c1">// ...other dependencies</span>

    <span class="n">implementation</span> <span class="s2">"androidx.paging:paging-runtime:3.1.1"</span>

    <span class="n">implementation</span> <span class="s2">"androidx.core:core-ktx:1.7.0"</span>
    <span class="n">implementation</span> <span class="s1">'androidx.activity:activity-ktx:1.4.0'</span>

    <span class="n">implementation</span> <span class="s2">"androidx.room:room-ktx:2.4.2"</span>
    <span class="n">kapt</span> <span class="s2">"androidx.room:room-compiler:2.4.2"</span>
<span class="o">}</span>
</code></pre></div></div> <p>Also enable <code class="language-plaintext highlighter-rouge">viewBinding</code> inside <code class="language-plaintext highlighter-rouge">app/build.gradle</code> to make accessing views easier:</p> <div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">android</span> <span class="o">{</span>
    <span class="c1">// ...other config</span>

    <span class="n">viewBinding</span> <span class="o">{</span>
        <span class="n">enabled</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>With all the prerequisites clear, let’s jump into the tutorial now!</p> <h1 id="1-creating-the-room-database">1. Creating the Room Database</h1> <h2 id="needed-files">Needed Files</h2> <p>The first step to begin would be to create a Room Database that will hold the data we will be using.</p> <p>To do this, first create a <code class="language-plaintext highlighter-rouge">db</code> package, to make things organized. Create two files in the <code class="language-plaintext highlighter-rouge">db</code> package:</p> <ul> <li> <strong><code class="language-plaintext highlighter-rouge">ItemDatabase.kt</code></strong>: This will be the actual database implementation.</li> <li> <strong><code class="language-plaintext highlighter-rouge">ItemDao.kt</code></strong>: This is the <strong>D</strong>ata <strong>A</strong>ccess <strong>O</strong>bject(<strong>DAO</strong>) that will be used to access the data in the database.</li> </ul> <p>Then we make the actual <strong><code class="language-plaintext highlighter-rouge">Item.kt</code></strong> data holder class inside a new package called <code class="language-plaintext highlighter-rouge">model</code>.</p> <p>We will implement these files in a short moment. These are the files we just added:</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://user-images.githubusercontent.com/46792249/164982771-e29efcda-fefa-416e-ad68-81e905161927.png" alt="Files to be added to the project" loading="lazy"></p> <h2 id="class-implementations">Class Implementations</h2> <h3 id="itemkt"><strong><code class="language-plaintext highlighter-rouge">Item.kt</code></strong></h3> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="nn">com.example.dbpagingdemo.model</span>

<span class="k">import</span> <span class="nn">...</span>

<span class="nd">@Entity</span><span class="p">(</span><span class="n">tableName</span> <span class="p">=</span> <span class="s">"items"</span><span class="p">)</span>
<span class="kd">data class</span> <span class="nc">Item</span><span class="p">(</span>
    <span class="nd">@PrimaryKey</span><span class="p">(</span><span class="n">autoGenerate</span> <span class="p">=</span> <span class="k">true</span><span class="p">)</span>
    <span class="kd">val</span> <span class="py">id</span><span class="p">:</span> <span class="nc">Int</span> <span class="p">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="kd">val</span> <span class="py">name</span><span class="p">:</span> <span class="nc">String</span>
<span class="p">)</span>
</code></pre></div></div> <p>This is a pretty basic data class. There is an autogenerated primary key <code class="language-plaintext highlighter-rouge">id</code> that identifies different items in the db. The <code class="language-plaintext highlighter-rouge">name</code> field is the string data for a specific item.</p> <h3 id="itemdaokt"><strong><code class="language-plaintext highlighter-rouge">ItemDao.kt</code></strong></h3> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="nn">com.example.dbpagingdemo.db</span>

<span class="k">import</span> <span class="nn">...</span>

<span class="nd">@Dao</span>
<span class="kd">interface</span> <span class="nc">ItemDao</span> <span class="p">{</span>
    <span class="nd">@Query</span><span class="p">(</span><span class="s">"SELECT * FROM items ORDER BY id ASC LIMIT :limit OFFSET :offset"</span><span class="p">)</span>
    <span class="k">suspend</span> <span class="k">fun</span> <span class="nf">getPagedList</span><span class="p">(</span><span class="n">limit</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nc">Int</span><span class="p">):</span> <span class="nc">List</span><span class="p">&lt;</span><span class="nc">Item</span><span class="p">&gt;</span>

    <span class="nd">@Insert</span><span class="p">(</span><span class="n">onConflict</span> <span class="p">=</span> <span class="nc">OnConflictStrategy</span><span class="p">.</span><span class="nc">REPLACE</span><span class="p">)</span>
    <span class="k">suspend</span> <span class="k">fun</span> <span class="nf">insert</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="nc">Item</span><span class="p">):</span> <span class="nc">Long</span>
<span class="p">}</span>
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">ItemDao</code> is an abstract class whose implementation will be generated by Room.</p> <p>This class contains the functions needed to run queries in the database. Room provides useful annotations to ease the process of writing these functions.</p> <p>The <code class="language-plaintext highlighter-rouge">getPagedList()</code> function returns a list of items after filtering it with the <code class="language-plaintext highlighter-rouge">limit</code> and <code class="language-plaintext highlighter-rouge">offset</code> parameters. This returns small chunks of data that will later be loaded by the Paging 3 library to be shown in the UI.</p> <p>The <code class="language-plaintext highlighter-rouge">insert()</code> function inserts an <code class="language-plaintext highlighter-rouge">item</code> into the database.</p> <h3 id="itemdatabasekt"><strong><code class="language-plaintext highlighter-rouge">ItemDatabase.kt</code></strong></h3> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="nn">com.example.dbpagingdemo.db</span>

<span class="k">import</span> <span class="nn">...</span>

<span class="nd">@Database</span><span class="p">(</span><span class="n">entities</span> <span class="p">=</span> <span class="p">[</span><span class="nc">Item</span><span class="o">::</span><span class="k">class</span><span class="p">],</span> <span class="n">version</span> <span class="p">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">exportSchema</span> <span class="p">=</span> <span class="k">false</span><span class="p">)</span>
<span class="k">abstract</span> <span class="kd">class</span> <span class="nc">ItemDatabase</span> <span class="p">:</span> <span class="nc">RoomDatabase</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">abstract</span> <span class="k">fun</span> <span class="nf">itemDao</span><span class="p">():</span> <span class="nc">ItemDao</span>

    <span class="k">companion</span> <span class="k">object</span> <span class="p">{</span>
        <span class="k">private</span> <span class="kd">var</span> <span class="py">INSTANCE</span><span class="p">:</span> <span class="nc">ItemDatabase</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>

        <span class="k">fun</span> <span class="nf">getInstance</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="nc">Context</span><span class="p">):</span> <span class="nc">ItemDatabase</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nc">INSTANCE</span> <span class="o">?:</span> <span class="nf">synchronized</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">val</span> <span class="py">instance</span> <span class="p">=</span> <span class="nc">Room</span><span class="p">.</span><span class="nf">databaseBuilder</span><span class="p">(</span>
                    <span class="n">context</span><span class="p">,</span>
                    <span class="nc">ItemDatabase</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">java</span><span class="p">,</span>
                    <span class="s">"item_database"</span>
                <span class="p">).</span><span class="nf">addCallback</span><span class="p">(</span><span class="kd">object</span> <span class="err">: </span><span class="nc">RoomDatabase</span><span class="p">.</span><span class="nc">Callback</span><span class="p">()</span> <span class="p">{</span>
                    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">db</span><span class="p">:</span> <span class="nc">SupportSQLiteDatabase</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">super</span><span class="p">.</span><span class="nf">onCreate</span><span class="p">(</span><span class="n">db</span><span class="p">)</span>

                        <span class="nc">INSTANCE</span><span class="o">?.</span><span class="nf">let</span> <span class="p">{</span> <span class="n">database</span> <span class="p">-&gt;</span>
                            <span class="nc">CoroutineScope</span><span class="p">(</span><span class="nc">Dispatchers</span><span class="p">.</span><span class="nc">IO</span><span class="p">).</span><span class="nf">launch</span> <span class="p">{</span>
                                <span class="p">(</span><span class="mi">0</span><span class="o">..</span><span class="mi">100</span><span class="p">).</span><span class="nf">forEach</span> <span class="p">{</span>
                                    <span class="n">database</span><span class="p">.</span><span class="nf">itemDao</span><span class="p">().</span><span class="nf">insert</span><span class="p">(</span> <span class="nc">Item</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">"Item $it"</span><span class="p">)</span> <span class="p">)</span>
                                <span class="p">}</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}).</span><span class="nf">build</span><span class="p">()</span>

                <span class="nc">INSTANCE</span> <span class="p">=</span> <span class="n">instance</span>
                <span class="n">instance</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>Here, we make the <code class="language-plaintext highlighter-rouge">ItemDatabase</code> abstract because Room will auto-generate it for us. Inside the class’s <code class="language-plaintext highlighter-rouge">companion object</code> block, we define a function that returns the instance of the database.</p> <p>The <code class="language-plaintext highlighter-rouge">getInstance()</code> function is interesting! We put up this <code class="language-plaintext highlighter-rouge">INSTANCE</code> returning logic to avoid <a href="https://en.wikipedia.org/wiki/Race_condition" rel="nofollow noopener noreferrer" target="_blank">race conditions</a>. Basically, if two pieces of code try to access the same resource at the same time, it causes race conditions. For generalized objects it is okay, but for something like Databases- we never want to cause conflicts between data.</p> <p>That’s the reason we either return <code class="language-plaintext highlighter-rouge">INSTANCE</code> of the Room Database if it is not null (the <code class="language-plaintext highlighter-rouge">?:</code> elvis operator), or if it is we then add the logic to build the database, assign it to the instance and then return it.</p> <p>We add a callback of type <code class="language-plaintext highlighter-rouge">RoomDatabase.Callback()</code> to execute some code once the database is created. We use this to pre-populate the database with some fake preloaded data.</p> <p>The <code class="language-plaintext highlighter-rouge">(0..100).forEach()</code> loop goes over the range and adds <code class="language-plaintext highlighter-rouge">Item</code> objects to the database, with the name <code class="language-plaintext highlighter-rouge">Item &lt;number&gt;</code> for each iteration. The <code class="language-plaintext highlighter-rouge">id</code> passed is <code class="language-plaintext highlighter-rouge">0</code> because this will be autogenerated by Room anyways.</p> <h1 id="2-setup-recyclerview">2. Setup RecyclerView</h1> <h2 id="defining-layouts">Defining Layouts</h2> <p>For the RecyclerView, we need to update our <code class="language-plaintext highlighter-rouge">MainActivity</code> to show a RecyclerView instead of the auto-generated text view.</p> <h3 id="activity_mainxml"><strong><code class="language-plaintext highlighter-rouge">activity_main.xml</code></strong></h3> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;LinearLayout</span>
    <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
    <span class="na">android:orientation=</span><span class="s">"vertical"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;androidx.recyclerview.widget.RecyclerView</span>
        <span class="na">android:id=</span><span class="s">"@+id/recyclerView"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
        <span class="na">app:layoutManager=</span><span class="s">"androidx.recyclerview.widget.LinearLayoutManager"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/LinearLayout&gt;</span>
</code></pre></div></div> <p>This is a basic layout - we use <code class="language-plaintext highlighter-rouge">LinearLayout</code> to make things easier as we don’t need a complex UI for this demo anyways.</p> <p>We add a full screen <code class="language-plaintext highlighter-rouge">RecyclerView</code> to the layout. The grid manager is set to <code class="language-plaintext highlighter-rouge">LinearLayoutManager</code> to stack the RecyclerView items in a linear direction (in our case, vertical).</p> <h3 id="itemxml"><strong><code class="language-plaintext highlighter-rouge">item.xml</code></strong></h3> <p>We need to generate a new layout that serves as a container for the RecyclerView items. Make a minimal <code class="language-plaintext highlighter-rouge">item.xml</code> layout which just shows a text view. Again, use <code class="language-plaintext highlighter-rouge">LinearLayout</code> as it doesn’t need to be complex. Don’t make the LinearLayout full screen as that can cause a lot of whitespace.</p> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;LinearLayout</span>
    <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
    <span class="na">android:layout_margin=</span><span class="s">"8dp"</span>
    <span class="na">android:orientation=</span><span class="s">"vertical"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;TextView</span>
        <span class="na">android:id=</span><span class="s">"@+id/textView"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:textSize=</span><span class="s">"18sp"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/LinearLayout&gt;</span>
</code></pre></div></div> <h2 id="making-a-recyclerview-adapter">Making a RecyclerView Adapter</h2> <p>We need a RecyclerView adapter to show the data in the RecyclerView. Create a <code class="language-plaintext highlighter-rouge">MainAdapter.kt</code> class that inherits from <code class="language-plaintext highlighter-rouge">PagingDataAdapter</code>. It is a special adapter provided by the Paging 3 library that will help us to show the data in the RecyclerView. It also supports header and footer items in RecyclerView that we will use in a moment.</p> <p>Code the <code class="language-plaintext highlighter-rouge">MainAdapter</code> like this:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="nn">com.example.dbpagingdemo</span>

<span class="k">import</span> <span class="nn">...</span>

<span class="kd">class</span> <span class="nc">MainAdapter</span> <span class="p">:</span> <span class="nc">PagingDataAdapter</span><span class="p">&lt;</span><span class="nc">Item</span><span class="p">,</span> <span class="nc">MainAdapter</span><span class="p">.</span><span class="nc">MainViewHolder</span><span class="p">&gt;(</span><span class="nc">DIFF_CALLBACK</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">companion</span> <span class="k">object</span> <span class="p">{</span>
        <span class="kd">val</span> <span class="py">DIFF_CALLBACK</span> <span class="p">=</span> <span class="kd">object</span> <span class="err">: </span><span class="nc">DiffUtil</span><span class="p">.</span><span class="nc">ItemCallback</span><span class="p">&lt;</span><span class="nc">Item</span><span class="p">&gt;()</span> <span class="p">{</span>
            <span class="k">override</span> <span class="k">fun</span> <span class="nf">areItemsTheSame</span><span class="p">(</span><span class="n">oldItem</span><span class="p">:</span> <span class="nc">Item</span><span class="p">,</span> <span class="n">newItem</span><span class="p">:</span> <span class="nc">Item</span><span class="p">):</span> <span class="nc">Boolean</span> <span class="p">=</span>
                <span class="n">oldItem</span><span class="p">.</span><span class="n">id</span> <span class="p">==</span> <span class="n">newItem</span><span class="p">.</span><span class="n">id</span>

            <span class="k">override</span> <span class="k">fun</span> <span class="nf">areContentsTheSame</span><span class="p">(</span><span class="n">oldItem</span><span class="p">:</span> <span class="nc">Item</span><span class="p">,</span> <span class="n">newItem</span><span class="p">:</span> <span class="nc">Item</span><span class="p">):</span> <span class="nc">Boolean</span> <span class="p">=</span>
                <span class="n">oldItem</span> <span class="p">==</span> <span class="n">newItem</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">inner</span> <span class="kd">class</span> <span class="nc">MainViewHolder</span><span class="p">(</span><span class="kd">val</span> <span class="py">binding</span><span class="p">:</span> <span class="nc">ItemBinding</span><span class="p">)</span> <span class="p">:</span> <span class="nc">RecyclerView</span><span class="p">.</span><span class="nc">ViewHolder</span><span class="p">(</span><span class="n">binding</span><span class="p">.</span><span class="n">root</span><span class="p">)</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreateViewHolder</span><span class="p">(</span><span class="n">parent</span><span class="p">:</span> <span class="nc">ViewGroup</span><span class="p">,</span> <span class="n">viewType</span><span class="p">:</span> <span class="nc">Int</span><span class="p">):</span> <span class="nc">MainViewHolder</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nc">MainViewHolder</span><span class="p">(</span>
            <span class="nc">ItemBinding</span><span class="p">.</span><span class="nf">inflate</span><span class="p">(</span><span class="nc">LayoutInflater</span><span class="p">.</span><span class="nf">from</span><span class="p">(</span><span class="n">parent</span><span class="p">.</span><span class="n">context</span><span class="p">),</span> <span class="n">parent</span><span class="p">,</span> <span class="k">false</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onBindViewHolder</span><span class="p">(</span><span class="n">holder</span><span class="p">:</span> <span class="nc">MainViewHolder</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nc">Int</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">val</span> <span class="py">item</span> <span class="p">=</span> <span class="nf">getItem</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>

        <span class="n">holder</span><span class="p">.</span><span class="n">binding</span><span class="p">.</span><span class="nf">apply</span> <span class="p">{</span>
            <span class="n">textView</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">item</span><span class="o">?.</span><span class="n">name</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>To the superclass <code class="language-plaintext highlighter-rouge">PagingDataAdapter</code>, we pass in the <code class="language-plaintext highlighter-rouge">Item</code> data class as that is the type of data we want to show in the RecyclerView and <code class="language-plaintext highlighter-rouge">MainViewHolder</code> as the type of view holder we want to use.</p> <p>The <code class="language-plaintext highlighter-rouge">DIFF_CALLBACK</code> is used by the Paging library to determine if the data in the RecyclerView has changed or not.</p> <p>This callback uses item comparisons to determine data changes and apply changes to RecyclerView only for the changed items. This is a very efficient way to update the RecyclerView as compared to rebuilding the RecyclerView every time the data changes.</p> <p>We instantiate and bind data to the view holder in the <code class="language-plaintext highlighter-rouge">onCreateViewHolder()</code> and <code class="language-plaintext highlighter-rouge">onBindViewHolder()</code> functions respectively.</p> <p>That’s it for the RecyclerView adapter!</p> <h1 id="3-build-the-pagination-logic">3. Build the Pagination Logic</h1> <h2 id="setting-up-pagingsource">Setting up PagingSource</h2> <p>The <code class="language-plaintext highlighter-rouge">PagingSource</code> defines the actual implementation for getting the data from the Room Database and returning loaded data pages, which would be sent to the RecyclerView adapter.</p> <p>Make a package <code class="language-plaintext highlighter-rouge">pagination</code> and define a <code class="language-plaintext highlighter-rouge">MainPagingSource.kt</code> class like this:</p> <h3 id="mainpagingsourcekt"><strong><code class="language-plaintext highlighter-rouge">MainPagingSource.kt</code></strong></h3> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="nn">com.example.dbpagingdemo.pagination</span>

<span class="kd">class</span> <span class="nc">MainPagingSource</span><span class="p">(</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">dao</span><span class="p">:</span> <span class="nc">ItemDao</span>
<span class="p">)</span> <span class="p">:</span> <span class="nc">PagingSource</span><span class="p">&lt;</span><span class="nc">Int</span><span class="p">,</span> <span class="nc">Item</span><span class="p">&gt;()</span> <span class="p">{</span>
    <span class="k">override</span> <span class="k">suspend</span> <span class="k">fun</span> <span class="nf">load</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="nc">LoadParams</span><span class="p">&lt;</span><span class="nc">Int</span><span class="p">&gt;):</span> <span class="nc">LoadResult</span><span class="p">&lt;</span><span class="nc">Int</span><span class="p">,</span> <span class="nc">Item</span><span class="p">&gt;</span> <span class="p">{</span>
        <span class="kd">val</span> <span class="py">page</span> <span class="p">=</span> <span class="n">params</span><span class="p">.</span><span class="n">key</span> <span class="o">?:</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="k">try</span> <span class="p">{</span>
            <span class="kd">val</span> <span class="py">entities</span> <span class="p">=</span> <span class="n">dao</span><span class="p">.</span><span class="nf">getPagedList</span><span class="p">(</span><span class="n">params</span><span class="p">.</span><span class="n">loadSize</span><span class="p">,</span> <span class="n">page</span> <span class="p">*</span> <span class="n">params</span><span class="p">.</span><span class="n">loadSize</span><span class="p">)</span>

            <span class="c1">// simulate page loading</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">page</span> <span class="p">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="nf">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>

            <span class="nc">LoadResult</span><span class="p">.</span><span class="nc">Page</span><span class="p">(</span>
                <span class="n">data</span> <span class="p">=</span> <span class="n">entities</span><span class="p">,</span>
                <span class="n">prevKey</span> <span class="p">=</span> <span class="k">if</span> <span class="p">(</span><span class="n">page</span> <span class="p">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">null</span> <span class="k">else</span> <span class="n">page</span> <span class="p">-</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">nextKey</span> <span class="p">=</span> <span class="k">if</span> <span class="p">(</span><span class="n">entities</span><span class="p">.</span><span class="nf">isEmpty</span><span class="p">())</span> <span class="k">null</span> <span class="k">else</span> <span class="n">page</span> <span class="p">+</span> <span class="mi">1</span>
            <span class="p">)</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="nc">Exception</span><span class="p">)</span> <span class="p">{</span>
            <span class="nc">LoadResult</span><span class="p">.</span><span class="nc">Error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">getRefreshKey</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="nc">PagingState</span><span class="p">&lt;</span><span class="nc">Int</span><span class="p">,</span> <span class="nc">Item</span><span class="p">&gt;):</span> <span class="nc">Int</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">state</span><span class="p">.</span><span class="n">anchorPosition</span><span class="o">?.</span><span class="nf">let</span> <span class="p">{</span> <span class="n">anchorPosition</span> <span class="p">-&gt;</span>
            <span class="kd">val</span> <span class="py">anchorPage</span> <span class="p">=</span> <span class="n">state</span><span class="p">.</span><span class="nf">closestPageToPosition</span><span class="p">(</span><span class="n">anchorPosition</span><span class="p">)</span>
            <span class="n">anchorPage</span><span class="o">?.</span><span class="n">prevKey</span><span class="o">?.</span><span class="nf">plus</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">?:</span> <span class="n">anchorPage</span><span class="o">?.</span><span class="n">nextKey</span><span class="o">?.</span><span class="nf">minus</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>The class inherits from <code class="language-plaintext highlighter-rouge">PagingSource</code>:</p> <ul> <li>We pass an <code class="language-plaintext highlighter-rouge">Int</code> as the first parameter since the pages are differentiated based on pages (1st Page, 2nd Page, and so on).</li> <li>We pass an <code class="language-plaintext highlighter-rouge">Item</code> as the second parameter since the data we are handling here is of type <code class="language-plaintext highlighter-rouge">Item</code>.</li> </ul> <p>Each class that inherits from <code class="language-plaintext highlighter-rouge">PagingSource</code> needs to override <code class="language-plaintext highlighter-rouge">load()</code> and <code class="language-plaintext highlighter-rouge">getRefreshKey()</code> functions.</p> <ul> <li>The <code class="language-plaintext highlighter-rouge">load()</code> function gets details about the page we need to load, loads it, and returns the page with the needed meta-data. It also handles errors that might occur.</li> <li>The <code class="language-plaintext highlighter-rouge">getRefreshKey()</code> method of the <code class="language-plaintext highlighter-rouge">PagingSource</code> class is used to get the key of the page that will be passed into the params for <code class="language-plaintext highlighter-rouge">load()</code> function. This is calculated on subsequent refreshes/invalidation of the data after the initial load.</li> </ul> <p>The <code class="language-plaintext highlighter-rouge">load()</code> function calls <code class="language-plaintext highlighter-rouge">getPagedList()</code> from the dao by passing in values of <code class="language-plaintext highlighter-rouge">limit</code> and <code class="language-plaintext highlighter-rouge">offset</code> from the <code class="language-plaintext highlighter-rouge">params</code>. We will define these parameters in <code class="language-plaintext highlighter-rouge">MainViewModel</code> while accessing data.</p> <p>If the page load was successful, we return <code class="language-plaintext highlighter-rouge">LoadResult.Page()</code> with the data and meta information for the next and preivious pages if the db call was successful, else we return <code class="language-plaintext highlighter-rouge">LoadResult.Error</code> with the exception that occurred.</p> <p>This is basically it for the <code class="language-plaintext highlighter-rouge">PagingSource</code>!</p> <h2 id="setting-up-loadstateadapter">Setting up LoadStateAdapter</h2> <p>The <code class="language-plaintext highlighter-rouge">LoadStateAdapter</code> is used to show the loading state of the RecyclerView. Suppose a user scrolls to the bottom of the screen and the next pagination data isn’t loaded yet. If there’s no visual indication for this, it creates confusion for the user.</p> <p><code class="language-plaintext highlighter-rouge">LoadStateAdapter</code> helps us to show the visual info on the loading state of the RecyclerView. In our case, we will show a progress bar while the next page is loading.</p> <p>To do that, create a <code class="language-plaintext highlighter-rouge">load_state_view.xml</code> layout with a progress bar like this:</p> <h3 id="load_state_viewxml"><code class="language-plaintext highlighter-rouge">load_state_view.xml</code></h3> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;LinearLayout</span> 
    <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
    <span class="na">android:gravity=</span><span class="s">"center"</span>
    <span class="na">android:orientation=</span><span class="s">"vertical"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;ProgressBar</span>
        <span class="na">android:id=</span><span class="s">"@+id/progress"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/LinearLayout&gt;</span>
</code></pre></div></div> <p>Next, create a <code class="language-plaintext highlighter-rouge">MainLoadStateAdapter.kt</code> class inside the <code class="language-plaintext highlighter-rouge">pagination</code> package.</p> <h3 id="mainloadstateadapterkt"><strong><code class="language-plaintext highlighter-rouge">MainLoadStateAdapter.kt</code></strong></h3> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="nn">com.example.dbpagingdemo</span>

<span class="k">import</span> <span class="nn">...</span>

<span class="kd">class</span> <span class="nc">MainLoadStateAdapter</span> <span class="p">:</span> <span class="nc">LoadStateAdapter</span><span class="p">&lt;</span><span class="nc">MainLoadStateAdapter</span><span class="p">.</span><span class="nc">LoadStateViewHolder</span><span class="p">&gt;()</span> <span class="p">{</span>

    <span class="k">inner</span> <span class="kd">class</span> <span class="nc">LoadStateViewHolder</span><span class="p">(</span><span class="kd">val</span> <span class="py">binding</span><span class="p">:</span> <span class="nc">LoadStateViewBinding</span><span class="p">)</span> <span class="p">:</span>
        <span class="nc">RecyclerView</span><span class="p">.</span><span class="nc">ViewHolder</span><span class="p">(</span><span class="n">binding</span><span class="p">.</span><span class="n">root</span><span class="p">)</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreateViewHolder</span><span class="p">(</span><span class="n">parent</span><span class="p">:</span> <span class="nc">ViewGroup</span><span class="p">,</span> <span class="n">loadState</span><span class="p">:</span> <span class="nc">LoadState</span><span class="p">):</span> <span class="nc">LoadStateViewHolder</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nc">LoadStateViewHolder</span><span class="p">(</span>
            <span class="nc">LoadStateViewBinding</span><span class="p">.</span><span class="nf">inflate</span><span class="p">(</span><span class="nc">LayoutInflater</span><span class="p">.</span><span class="nf">from</span><span class="p">(</span><span class="n">parent</span><span class="p">.</span><span class="n">context</span><span class="p">),</span> <span class="n">parent</span><span class="p">,</span> <span class="k">false</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onBindViewHolder</span><span class="p">(</span><span class="n">holder</span><span class="p">:</span> <span class="nc">LoadStateViewHolder</span><span class="p">,</span> <span class="n">loadState</span><span class="p">:</span> <span class="nc">LoadState</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">holder</span><span class="p">.</span><span class="n">binding</span><span class="p">.</span><span class="nf">apply</span> <span class="p">{</span>
            <span class="n">progress</span><span class="p">.</span><span class="n">isVisible</span> <span class="p">=</span> <span class="n">loadState</span> <span class="k">is</span> <span class="nc">LoadState</span><span class="p">.</span><span class="nc">Loading</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>We basically bind the progress bar from <code class="language-plaintext highlighter-rouge">load_state_view.xml</code> to the <code class="language-plaintext highlighter-rouge">LoadStateViewHolder</code> class. The key thing to notice here is the progress bar is visible only if <code class="language-plaintext highlighter-rouge">loadState</code> is <code class="language-plaintext highlighter-rouge">LoadState.Loading</code>.</p> <p>The <code class="language-plaintext highlighter-rouge">onBindViewHolder()</code> inside <code class="language-plaintext highlighter-rouge">MainLoadStateAdapter</code> is called every time the RecyclerView is invalidated, which provides the possibility to show and hide the progress bar based on the load state.</p> <h1 id="4-attaching-data-to-the-ui">4. Attaching Data to the UI</h1> <h2 id="setting-up-the-viewmodel">Setting up the ViewModel</h2> <p>The <code class="language-plaintext highlighter-rouge">MainViewModel</code> should access the data from the <code class="language-plaintext highlighter-rouge">PagingSource</code>, and pass it to the RecyclerView adapter.</p> <p>Let’s build the <code class="language-plaintext highlighter-rouge">MainViewModel</code> class.</p> <h3 id="mainviewmodelkt"><strong><code class="language-plaintext highlighter-rouge">MainViewModel.kt</code></strong></h3> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="nn">com.example.paginationdemo</span>

<span class="k">import</span> <span class="nn">...</span>

<span class="kd">class</span> <span class="nc">MainViewModel</span><span class="p">(</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">dao</span><span class="p">:</span> <span class="nc">ItemDao</span>
<span class="p">):</span> <span class="nc">ViewModel</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">val</span> <span class="py">data</span> <span class="p">=</span> <span class="nc">Pager</span><span class="p">(</span>
        <span class="nc">PagingConfig</span><span class="p">(</span>
            <span class="n">pageSize</span> <span class="p">=</span> <span class="mi">20</span><span class="p">,</span>
            <span class="n">enablePlaceholders</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span>
            <span class="n">initialLoadSize</span> <span class="p">=</span> <span class="mi">20</span>
        <span class="p">),</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="nc">MainPagingSource</span><span class="p">(</span><span class="n">dao</span><span class="p">)</span>
    <span class="p">}.</span><span class="n">flow</span><span class="p">.</span><span class="nf">cachedIn</span><span class="p">(</span><span class="n">viewModelScope</span><span class="p">)</span>
    
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">MainViewModelFactory</span><span class="p">(</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">dao</span><span class="p">:</span> <span class="nc">ItemDao</span>
<span class="p">)</span> <span class="p">:</span> <span class="nc">ViewModelProvider</span><span class="p">.</span><span class="nc">Factory</span> <span class="p">{</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="p">&lt;</span><span class="nc">T</span> <span class="p">:</span> <span class="nc">ViewModel</span><span class="p">&gt;</span> <span class="nf">create</span><span class="p">(</span><span class="n">modelClass</span><span class="p">:</span> <span class="nc">Class</span><span class="p">&lt;</span><span class="nc">T</span><span class="p">&gt;):</span> <span class="nc">T</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">modelClass</span><span class="p">.</span><span class="nf">isAssignableFrom</span><span class="p">(</span><span class="nc">MainViewModel</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">java</span><span class="p">))</span> <span class="p">{</span>
            <span class="nd">@Suppress</span><span class="p">(</span><span class="s">"UNCHECKED_CAST"</span><span class="p">)</span>
            <span class="k">return</span> <span class="nc">MainViewModel</span><span class="p">(</span><span class="n">dao</span><span class="p">)</span> <span class="k">as</span> <span class="nc">T</span>
        <span class="p">}</span>
        <span class="k">throw</span> <span class="nc">IllegalArgumentException</span><span class="p">(</span><span class="s">"Unknown ViewModel class"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>Inside the <code class="language-plaintext highlighter-rouge">MainViewModel</code>, we hold to create a variable <code class="language-plaintext highlighter-rouge">data</code> that is a <code class="language-plaintext highlighter-rouge">Pager</code> object, to which we pass the <code class="language-plaintext highlighter-rouge">PagingConfig</code> and <code class="language-plaintext highlighter-rouge">PagingSource</code> objects. This is the place where we define our pagination configuration.</p> <p>We define that the <code class="language-plaintext highlighter-rouge">pageSize</code> should be <code class="language-plaintext highlighter-rouge">20</code>. This means that the Paging 3 library will load <code class="language-plaintext highlighter-rouge">20</code> values at a time from the data. The <code class="language-plaintext highlighter-rouge">initialLoadSize</code> is also set to <code class="language-plaintext highlighter-rouge">20</code> because if unset, the paging library loads <code class="language-plaintext highlighter-rouge">3 * pageSize</code> for the first load.</p> <p>We pass a lambda that defines a lambda and pass in our <code class="language-plaintext highlighter-rouge">MainPagingSource</code> class. Paging 3 handles calling the <code class="language-plaintext highlighter-rouge">load()</code> function for us as and when needed by the <code class="language-plaintext highlighter-rouge">PagingAdapter</code>, so we don’t need to worry about the hassle of calling it manually.</p> <p>Then we access the <code class="language-plaintext highlighter-rouge">flow</code> property so that we can collect the new emissions of data. We also cache these in <code class="language-plaintext highlighter-rouge">viewModelScope</code> for memory optimizations.</p> <h2 id="finishing-up-mainactivity">Finishing up <code class="language-plaintext highlighter-rouge">MainActivity</code> </h2> <p>We now need to bind everything up through the <code class="language-plaintext highlighter-rouge">MainActivity</code>. Setup the <code class="language-plaintext highlighter-rouge">MainActivity</code> as below:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="nn">com.example.paginationdemo</span>

<span class="k">import</span> <span class="nn">...</span>

<span class="kd">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="nc">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>

    <span class="k">private</span> <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">binding</span><span class="p">:</span> <span class="nc">ActivityMainBinding</span>
    <span class="k">private</span> <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">dao</span><span class="p">:</span> <span class="nc">ItemDao</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">viewModel</span><span class="p">:</span> <span class="nc">MainViewModel</span> <span class="k">by</span> <span class="nf">viewModels</span> <span class="p">{</span> <span class="nc">MainViewModelFactory</span><span class="p">(</span><span class="n">dao</span><span class="p">)</span> <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>

        <span class="n">dao</span> <span class="p">=</span> <span class="nc">ItemDatabase</span><span class="p">.</span><span class="nf">getInstance</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nf">itemDao</span><span class="p">()</span>

        <span class="n">binding</span> <span class="p">=</span> <span class="nc">ActivityMainBinding</span><span class="p">.</span><span class="nf">inflate</span><span class="p">(</span><span class="n">layoutInflater</span><span class="p">)</span>
        <span class="nf">setContentView</span><span class="p">(</span><span class="n">binding</span><span class="p">.</span><span class="n">root</span><span class="p">)</span>

        <span class="kd">val</span> <span class="py">adapter</span> <span class="p">=</span> <span class="nc">MainAdapter</span><span class="p">()</span>
        <span class="n">binding</span><span class="p">.</span><span class="n">recyclerView</span><span class="p">.</span><span class="n">adapter</span> <span class="p">=</span> <span class="n">adapter</span><span class="p">.</span><span class="nf">withLoadStateFooter</span><span class="p">(</span>
            <span class="nc">MainLoadStateAdapter</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="n">lifecycleScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
            <span class="n">viewModel</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="nf">collectLatest</span> <span class="p">{</span>
                <span class="n">adapter</span><span class="p">.</span><span class="nf">submitData</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>We define the <code class="language-plaintext highlighter-rouge">binding</code>, <code class="language-plaintext highlighter-rouge">dao</code> and <code class="language-plaintext highlighter-rouge">viewModel</code> variables and instantiate the needed ones in <code class="language-plaintext highlighter-rouge">onCreate()</code>.</p> <p>Then the magic happens! We assign the <code class="language-plaintext highlighter-rouge">MainAdapter</code> we built and also pass in the <code class="language-plaintext highlighter-rouge">MainLoadStateAdapter()</code> in the <code class="language-plaintext highlighter-rouge">withLoadStateFooter()</code> function. This appropriately handles showing the progress bar while the next page is loading, and also hides it with animation when the next page is loaded / no next page is available.</p> <p>We also launch a coroutine to collect the emissions of data from the <code class="language-plaintext highlighter-rouge">flow</code> property of the <code class="language-plaintext highlighter-rouge">viewModel</code> and pass it to the <code class="language-plaintext highlighter-rouge">adapter</code>. This way our adapter will be updated with the new data as and when it is emitted.</p> <p>It’s time to run our application! You might not see data at the first run because the database itself is being created. But from the second run, the app should work as expected:</p> <p><img src="https://ik.imagekit.io/genicsblog/tr:f-webp/https://user-images.githubusercontent.com/46792249/164981913-dbee3b8d-ccb1-4442-97f0-a91c032c25d7.jpg" alt="Demo of the application we will build" width="40%" loading="lazy"></p> <h1 id="wrapping-up">Wrapping Up</h1> <p>This was a brief intro on how to paginate data from a Room Database using the Paging 3 library. In this tutorial, we covered the setup for situations when we just have a local data source to get the data from.</p> <p>The Paging 3 library supports more use cases like loading the paginated data from a network, or a combination of network and local data sources. You can learn more about the library from the <a href="https://developer.android.com/topic/libraries/architecture/paging/v3-overview" rel="nofollow noopener noreferrer" target="_blank">documentation</a>.</p> <p>I hope you enjoyed reading this in-depth tutorial and hope you learned something new!</p> <p>Happy Coding!</p> </article> <hr> <div class="px-6 pb-6 md:px-8 md:pb-8 flex flex-col items-center rounded-bl-2xl rounded-br-2xl"> <p class="text-center mb-4"> Join discussions at <a href="https://discord.genicsblog.com" target="_blank" class="cta-link"> our discord server &gt; </a> <br> Did you learn something new? Add a comment below and spread the word! </p> <div class="grid grid-flow-col gap-6"> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://facebook.com/sharer.php?u=https://genicsblog.com/gouravkhunger/pagination-in-android-room-database-using-the-paging-3-library" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/facebook.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://api.whatsapp.com/send?text=Checkout%20this%20amazing%20article%20at%20Genics%20Blog%20'Pagination%20in%20Android%20Room%20Database%20using%20the%20Paging%203%20Library':%20https://genicsblog.com/gouravkhunger/pagination-in-android-room-database-using-the-paging-3-library" onclick="window.open(this.href, 'whatsapp-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/whatsapp.svg" class="social-image w-10 h-10" loading="lazy"> </a> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://genicsblog.com/gouravkhunger/pagination-in-android-room-database-using-the-paging-3-library" onclick="window.open(this.href, 'linkedin-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/linkedin.svg" class="social-image w-7 h-7" loading="lazy"> </a> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://twitter.com/intent/tweet?text=Check%20out%20this%20amazing%20article%20by%20@gourav_khunger%20at%20@genicsblog:%20Pagination%20in%20Android%20Room%20Database%20using%20the%20Paging%203%20Library&amp;url=https://genicsblog.com/gouravkhunger/pagination-in-android-room-database-using-the-paging-3-library" onclick="window.open(this.href, 'twitter-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/twitter.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a class="underline-none hover:scale-125 transition flex items-center" rel="nofollow noopener noreferrer" href="https://www.snapchat.com/scan?attachmentUrl=https://genicsblog.com/gouravkhunger/pagination-in-android-room-database-using-the-paging-3-library" onclick="window.open(this.href, 'snapchat-share', 'width=550,height=435');return false;" target="_blank"> <img src="/assets/images/social/snapchat.svg" class="social-image w-14 h-14 -m-2" loading="lazy"> </a> </div> </div> </div> </div> <aside class="m-6 md:m-10 lg:my-14 lg:mr-10 lg:-ml-4 md:mr-8 lg:max-w-[25%] xl:max-w-[20%]"> <figure class="p-6 md:p-8 elevated"> <img class="w-24 h-24 rounded-full mx-auto" src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/46792249" alt="Gourav Khunger" loading="lazy"> <div class="pt-4 space-y-4"> <figcaption class="font-medium text-center"> <div> <a href="/author/gouravkhunger/" class="text-xl font-bold"> Gourav Khunger </a> </div> <div class="text-slate-700 dark:text-slate-200 text-sm"> Founder @ Genics Blog </div> </figcaption> <p class="leading-5 font-medium text-justify">16 year old passionate App developer. I have interests in web development too.</p> </div> </figure> <figure class="bg-white dark:bg-background rounded-2xl p-6 shadow-xl shadow-slate-200 dark:shadow-none mt-8 aspect-square w-full"> <div align="center"> <ins class="adsbygoogle" style="display: block" data-ad-format="auto" data-full-width-responsive="true" data-ad-client="ca-pub-8114751086331659" data-ad-slot="8698895132"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> </figure> <figure class="px-6 pb-6 md:px-8 mt-8 elevated lg:sticky lg:top-24"> <img src="https://dash.beyondwords.io/logo-dark.svg" class="w-full aspect-video hidden dark:block" loading="lazy"> <img src="https://dash.beyondwords.io/logo.svg" class="w-full aspect-video dark:hidden" loading="lazy"> <h4> BeyondWords <span class="text-xs text-white px-3 py-1 align-middle rounded-xl bg-primary">Sponsored</span> </h4> <p>BeyondWords is an AI voice and audio publishing platform that brings frictionless audio to writers, newsrooms, and businesses!</p> <div class="flex justify-center"> <a class="px-3 py-1 mt-4 linkbtn underline-none" href="https://beyondwords.io?utm_source=genicsblog.com&amp;utm_medium=cpc&amp;utm_campaign=advertisement" rel="nofollow" target="_blank"> Check it out &gt; </a> </div> </figure> </aside> </section> <div class="flex justify-center mx-6 md:mx-10 lg:mx-14"> <div class="p-8 md:p-12 grid grid-flow-row sm:grid-flow-col gap-x-8 items-center justify-between elevated"> <section class="md:mr-4"> <h3>Contribute to the Genics Blog!</h3> <p> Genics Blog is a purely <a href="https://github.com/genicsblog" rel="nofollow noreferrer noopener" target="_blank" class="cta-link">open source</a> publication. Authors at Genics post highly resourceful content on varied topics relevant to the developer community. Join us and start publishing today! </p> </section> <a class="px-4 py-1.5 mt-8 md:mt-0 md:ml-4 linkbtn underline-none font-bold text-lg" href="/contribute"> Contribute </a> </div> </div> <br> <div align="center"> <ins class="adsbygoogle" style="display: block" data-ad-format="fluid" data-ad-layout-key="-fb+5w+4e-db+86" data-ad-client="ca-pub-8114751086331659" data-ad-slot="3535897708"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> <br> <h1 class="mx-8 mt-12 md:mx-10 lg:mx-14 -mb-4 lg:-mb-8">Comments</h1> <section class="flex flex-col-reverse lg:flex-row"> <div id="comments" class="md:text-lg m-8 md:m-10 lg:m-14 lg:w-full lg:max-w-[65%] xl:max-w-[70%]"></div> <aside class="m-8 md:m-10 lg:my-14 lg:mr-10 lg:-ml-4 md:mr-8 lg:max-w-[25%] xl:max-w-[20%]"> <div class="p-6 md:p-8 space-y-4 lg:sticky lg:top-24 rounded-2xl bg-white dark:bg-background shadow-xl dark:shadow-none shadow-slate-200"> <p class="leading-5 font-medium text-justify"> Please adhere to our <a href="/code-of-conduct">Code of Conduct</a> while adding a comment. Respect other's opinion. </p> </div> </aside> </section> <div class="m-8 md:m-10 lg:m-14"> <div class="flex justify-center"> <h2>Related content</h2> </div> <div class="flex flex-col sm:grid sm:grid-cols-2 lg:grid-cols-3 sm:gap-4 md:gap-4 lg:gap-6 text-center"> <a class="mt-4 mb-6 px-6 pt-2 pb-6 postbox hover:border-jekyll dark:hover:!border-jekyll underline-none" href="/gouravkhunger/adding-multiple-authors-to-a-jekyll-blog-got-easier"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://user-images.githubusercontent.com/46792249/162621431-f9004144-8a56-4cb5-b3ac-5c5a2660a6fa.png" alt="Adding Multiple Authors to a Jekyll Blog got Easier!" title="Adding Multiple Authors to a Jekyll Blog got Easier!" class="aspect-video w-full mt-4" loading="lazy"> <div class="mt-6 mb-16"> <h2 class="line-clamp-2">Adding Multiple Authors to a Jekyll Blog got Easier!</h2> <p class="line-clamp-3">Jekyll doesn't support multiple authors out of the box. But we can add that functionality using this plugin I made!</p> </div> <div class="absolute mt-20 right-6 bottom-6 left-6"> <div class="flex items-center justify-between mt-6"> <div class="flex items-center"> <img src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/46792249" alt="Gourav Khunger's Profile Picture" title="Gourav Khunger's Profile Picture" class="rounded-full w-10 h-10" width="40px" height="40px" loading="lazy"> <span class="ml-2">Gourav</span> </div> <span>Apr 10, 2022</span> </div> </div> </a> <a class="mt-4 mb-6 px-6 pt-2 pb-6 postbox hover:border-coding dark:hover:!border-coding underline-none" href="/usman/how-to-sort-imports-for-a-javascript-project-using-prettier"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1647939834412/-rOHcxwbV.png" alt="How to sort imports for a JavaScript Project using Prettier" title="How to sort imports for a JavaScript Project using Prettier" class="aspect-video w-full mt-4" loading="lazy"> <div class="mt-6 mb-16"> <h2 class="line-clamp-2">How to sort imports for a JavaScript Project using Prettier</h2> <p class="line-clamp-3">Make your code clean, structured and look better by sorting import statements automatically using the prettier plugin for VS Code</p> </div> <div class="absolute mt-20 right-6 bottom-6 left-6"> <div class="flex items-center justify-between mt-6"> <div class="flex items-center"> <img src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://i.ibb.co/Fs6Kww8/PFP.jpg" alt="Usman Sabuwala's Profile Picture" title="Usman Sabuwala's Profile Picture" class="rounded-full w-10 h-10" width="40px" height="40px" loading="lazy"> <span class="ml-2">Usman</span> </div> <span>Mar 29, 2022</span> </div> </div> </a> <a class="mt-4 mb-6 px-6 pt-2 pb-6 postbox hover:border-android dark:hover:!border-android underline-none" href="/swipe-animation-on-a-cardview-android"> <img src="https://ik.imagekit.io/genicsblog/tr:w-1920,h-1080,f-webp/https://cdn.hashnode.com/res/hashnode/image/upload/v1636707430801/EOfL2jKCy.gif" alt="How to Add Swipe Animations to a CardView in an Android App" title="How to Add Swipe Animations to a CardView in an Android App" class="aspect-video w-full mt-4" loading="lazy"> <div class="mt-6 mb-16"> <h2 class="line-clamp-2">How to Add Swipe Animations to a CardView in an Android App</h2> <p class="line-clamp-3">Learn how to add swipe animation to a card view. In this tutorial, we will add a sliding animation to a card view to simulate slide to refresh behaviour.</p> </div> <div class="absolute mt-20 right-6 bottom-6 left-6"> <div class="flex items-center justify-between mt-6"> <div class="flex items-center"> <img src="https://ik.imagekit.io/genicsblog/tr:w-128,h-128,f-webp/https://avatars.githubusercontent.com/u/46792249" alt="Gourav Khunger's Profile Picture" title="Gourav Khunger's Profile Picture" class="rounded-full w-10 h-10" width="40px" height="40px" loading="lazy"> <span class="ml-2">Gourav</span> </div> <span>Nov 15, 2021</span> </div> </div> </a> </div> </div> <br> <div align="center"> <ins class="adsbygoogle" style="display: block" data-ad-format="fluid" data-ad-layout-key="-fb+5w+4e-db+86" data-ad-client="ca-pub-8114751086331659" data-ad-slot="3535897708"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div> <br> </main> <footer class="px-12 py-8 text-center"> <div class="flex justify-center"> <a aria-label="Genics Blog's Discord server" class="mr-2 underline-none hover:scale-125 transition" href="https://discord.genicsblog.com" target="_blank"> <img alt="Discord's logo" src="/assets/images/social/discord.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a aria-label="Genics Blog's GitHub organization" class="mx-4 underline-none hover:scale-125 transition" href="https://github.com/genicsblog" target="_blank" rel="nofollow noopener noreferrer"> <img alt="GitHub's logo" src="/assets/images/social/github.svg" class="social-image w-8 h-8" loading="lazy"> </a> <a aria-label="Genics Blog's Twitter page" class="ml-2 underline-none hover:scale-125 transition" href="https://twitter.com/genicsblog" target="_blank" rel="nofollow noopener noreferrer"> <img alt="Twitter's logo" src="/assets/images/social/twitter.svg" class="social-image w-8 h-8" loading="lazy"> </a> </div> <br> © 2021 <a href="/">Genics Blog</a> <br> Built with <a href="https://jekyllrb.com" target="_blank" rel="nofollow noopener noreferrer">Jekyll</a>. Hosted on <a href="https://github.com" target="_blank" rel="nofollow noopener noreferrer">GitHub</a>. <br><br> Developed by <a href="https://github.com/gouravkhunger" rel="nofollow noopener noreferrer" target="_blank"> Gourav Khunger</a>. Thanks to the <a href="https://github.com/genicsblog/genicsblog.com/graphs/contributors" rel="nofollow noopener noreferrer" target="_blank"> contributors</a>! <br><br> <a class="nav-item text-white" href="/terms">T&amp;C</a> <a class="nav-item text-white" href="/privacy-policy">Privacy Policy</a> <a class="nav-item text-white" href="/licensing">Licensing</a> </footer> <div class="hidden fixed top-0 w-full h-full p-6 md:p-14 backdrop-blur-md cursor-pointer z-20" id="search-container"> <div class="p-4 bg-white dark:bg-slate-800 mx-auto w-full max-h-full sm:w-3/4 lg:w-1/2 content-center rounded-lg shadow-md shadow-slate-200 dark:shadow-none cursor-auto overflow-auto" id="search-box"> <div class="flex items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 stroke-slate-400" fill="none" viewbox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path> </svg> <input type="text" class="w-full h-full pl-4 text-2xl outline-none dark:bg-slate-800" id="search-input" placeholder="Search..."> <span class="hidden lg:block text-sm text-gray-600 text-right tracking-tight ml-2"> <kbd class="bg-gray-200 dark:bg-slate-600 dark:text-gray-200 rounded-md shadow-sm py-1 px-2">Esc</kbd> </span> </div> <div id="results-container"></div> </div> </div> <script src="/assets/js/theme.js" data-no-instant></script> <script src="/assets/js/search.js" data-no-instant></script> <script src="/assets/js/prism.js" data-no-instant></script> <script src="/assets/js/instantclick.min.js" data-no-instant></script> <script data-no-instant>InstantClick.on("change",()=>{setTheme(),Prism.highlightAll(),initCodeBlocks(),window.onscroll=(()=>{setStickyness()}),document.getElementById("search-container").addEventListener("click",e=>{"search-container"===e.target.id&&hideSearch()});const e=window.location.pathname+window.location.search+window.location.hash;gtag("set","page_path",e),window.BwPlayer&&"function"==typeof window.BwPlayer.pause&&window.BwPlayer.pause();const n=document.getElementById("audio-player");if(n){const e=document.createElement("script");e.type="module",e.text=`import BeyondWords from 'https://proxy.beyondwords.io/npm/@beyondwords/audio-player@latest/dist/module/index.js'\n\n      BeyondWords.sdk.player({\n        renderNode: 'audio-player',\n        projectId: 11987,\n        podcastId: ${n.dataset.audioId},\n      }).then(appInst => {\n        window.BwPlayer = appInst;\n        const player = document.getElementsByClassName("sk-app-container")[0];\n        player.classList.add("rounded-xl");\n        const attribution = document.getElementsByClassName("sk-app-link")[0];\n        attribution.classList.add("underline-none");\n      });`,document.body.appendChild(e)}const t=document.getElementById("comments");if(t){const e={src:"https://giscus.app/client.js","data-repo":"genicsblog/comments","data-repo-id":"R_kgDOG0-Vlw","data-category":"Announcements","data-category-id":"DIC_kwDOG0-Vl84CP8Dz","data-mapping":"pathname","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":`${isDark()?GISCUS_DARK:GISCUS_LIGHT}`,"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},n=document.createElement("script");for(key in e)n.setAttribute(key,e[key]);t.appendChild(n)}}),InstantClick.on("receive",()=>{"function"==typeof window.cleanup&&(window.cleanup(),window.cleanup())}),InstantClick.init("mousedown");</script> </body> </html>